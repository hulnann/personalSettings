{
  "userStyles": {},
  "userPlugins": {
    "speed.keymap": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/speed\"]=t():e[\"video/player/speed\"]=t()}(self,(function(){return function(){\"use strict\";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{plugin:function(){return H}});var n=coreApis.toast,o=coreApis.componentApis.video.playerAgent,s=coreApis.lifeCycle,r=coreApis.observer,i=coreApis.utils,a=coreApis.utils.sort,l=coreApis.settings;const c=e=>\"function\"==typeof e?{next:e}:e,d=e=>function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=!1;const r=[],i=[];let a=!1;const d=()=>{for(;r.length;)r.pop()();i.length=0,a=!0},p=e=>{a||(i.forEach((t=>{var n;null===(n=t.error)||void 0===n||n.call(t,e),(0,l.getGeneralSettings)().devMode&&console.error(e)})),d())},u=e=>{a||i.forEach((t=>{try{t.next(e)}catch(e){p(e)}}))},h=()=>{i.forEach((e=>{var t;null===(t=e.complete)||void 0===t||t.call(e)})),d()},b=()=>{if(s)return;const e=null==t?void 0:t({next:u,error:p,complete:h});e&&r.push(e),s=!0},m=e=>null==e?null:(i.push(e),()=>{lodash.pull(i,e)}),v=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return 0===n.length?{subscribe:e=>{const t=m(c(e));return((null==o?void 0:o.connect)??b)(),t},pipe:v,next:u,error:p,complete:h,...o}:e(n[0],{subscribe:m},o||{connect:b,next:u}).pipe(...n.slice(1))};if(n){const e=null==t?void 0:t({subscribe:e=>n.subscribe({error:p,complete:h,...c(e)}),next:u,error:p,complete:h});e&&r.push(e)}return v()}(e),p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d((e=>{let{next:n,complete:o}=e;t.forEach((e=>{n(e)})),o()}))},u=(e,t)=>d((n=>{let{next:o}=n;return e.addEventListener(t,o),()=>e.removeEventListener(t,o)})),h=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return d((t=>{let{next:o}=t;e(...n,o)}))},b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d((e=>{let{next:n,complete:o}=e;const s=[...t],r=()=>{const e=s.shift();e||o(),e.subscribe({next:n,complete:()=>{r()}})};r()}))},m=e=>new Promise(((t,n)=>{const o=e.subscribe({next:e=>{t(e),o()},error:()=>{n(),o()},complete:()=>{n(),o()}})})),v=e=>t=>{let{subscribe:n,next:o,complete:s,error:r}=t;n(lodash.mapValues({next:o,complete:s,error:r},(t=>e(t))))},f=e=>function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];Promise.resolve().then((()=>e(...n)))},g=e=>{const t=new Set;return e((e=>{lodash.castArray(e).forEach((e=>{t.add(e)}))})),()=>{t.forEach((e=>{e()}))}},y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d((e=>{let{next:n,error:o,complete:s}=e;return g((e=>{const r=[];let i=0;e(t.map(((e,a)=>e.pipe(v(f)).subscribe({next:e=>{r[a]=e,r.reduce((e=>e+1),0)===t.length&&n(r.slice())},complete:()=>{i++,i===t.length&&s()},error:o})))),e((()=>{r.length=0,i=0}))}))}))},x=e=>t=>{let{subscribe:n,next:o,error:s}=t;n(lodash.debounce((e=>{try{o(e)}catch(e){s(e)}}),e))},w=e=>t=>{let{subscribe:n,next:o}=t;n((t=>{e(t)&&o(t)}))},S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let{next:n,subscribe:o}=e,s=!1;o((e=>{s||t.forEach((e=>n(e))),n(e),s=!0}))}};var E=coreApis.pluginApis.data;const A=e=>e.split(\",\").map((e=>e.trim().replace(/^\\./,\"\"))).join(\",\"),k=(e,t)=>{const n=t=>{(0,E.registerAndGetData)(e,t)[0]=t},o=(0,E.getData)(e);if(o.length)return[o[0],n];if(t){const e=t();return n(e),[e,n]}return[void 0,n]},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&1===e?\"倍速\":Math.trunc(e)===e?`${e}.0x`:`${e}x`},C=e=>{if(\"倍速\"===e)return 1;const t=/([0-9]*[.]?[0-9]+)x/.exec(e);if(t)return parseFloat(t[1]);throw new Error(`unknown speed text: ${e}`)};const O=o.playerAgent.provideCustomQuery({video:{speedMenuList:\".bilibili-player-video-btn-speed-menu,.bpx-player-ctrl-playbackrate-menu\",speedMenuItem:\".bilibili-player-video-btn-speed-menu-list,.bpx-player-ctrl-playbackrate-menu-item\",speedNameBtn:\".bilibili-player-video-btn-speed-name,.bpx-player-ctrl-playbackrate-result\",speedContainer:\".bilibili-player-video-btn-speed,.bpx-player-ctrl-playbackrate\",active:\".bilibili-player-active,.bpx-state-active\",show:\".bilibili-player-speed-show,.bpx-state-show\"},bangumi:{speedMenuList:\".squirtle-speed-select-list\",speedMenuItem:\".squirtle-select-item\",speedNameBtn:\".squirtle-speed-select-result\",speedContainer:\".squirtle-speed-wrap\",active:\".active\",show:\".bilibili-player-speed-show\"}});let N;!function(e){e[e.MIN=0]=\"MIN\",e[e.CURRENT=1]=\"CURRENT\",e[e.MAX=2]=\"MAX\"}(N||(N={}));const $=(e,t,n)=>{const o=new MutationObserver(n);return o.observe(e,t),o},T=e=>{let[t,n]=e;if(!t)throw new Error(\"speed container element not found!\");if(!n)throw new Error(\"video element not found!\");const o=t.querySelector(O.custom.speedNameBtn.selector),s=t.querySelector(O.custom.speedMenuList.selector);let r,l,c;const p=d(),u=d().pipe((e=>{let t,{subscribe:n,next:o}=e,s=!0;n((e=>{(s||t!==e)&&(s=!1,t=e,o(e))}))}));u.pipe(S(void 0),(e=>{let{subscribe:t,next:n}=e;const o=[];return t((e=>{2===o.length&&o.shift(),o.push(e),2===o.length&&n(o.slice())})),()=>{o.length=0}})).subscribe((e=>{let[t,n]=e;l=t,r=n}));const h=e=>{if(e)switch(e.nodeType){case Node.TEXT_NODE:u.next(C(e.data));break;case Node.ELEMENT_NODE:u.next(C(e.innerHTML));break;default:console.warn(\"The target parameter of updateActiveVideoSpeed must be a Node, and the node type must be one of TEXT_NODE and ELEMENT_NODE\")}},b=()=>{c=lodash([...s.children]).map((e=>lodash.attempt((()=>C(e.textContent))))).reject((e=>lodash.isError(e))).sort((0,a.ascendingSort)()).value()};h(o),b();const m=$(s,{childList:!0,attributes:!0},(e=>{const{attributes:t=[],childList:n=[]}=lodash.groupBy(e,\"type\");n.length&&b(),p.next({attributes:t,childList:n})})),v=$(o,{childList:!0,subtree:!0},(e=>{e.forEach((e=>{const[t]=e.addedNodes;h(t)}))}));return{containerElement:t,videoElement:n,nameBtnElement:o,menuListElement:s,query:e=>(0,i.des)(`./*[(${function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"or\";return e.split(\",\").map(A).flat().map((e=>`contains(@class, \"${e}\")`)).join(` ${t} `)}(O.custom.speedMenuItem.selector)}) and normalize-space()=\"${V(e)}\"]`,s),dispose:()=>{m.disconnect(),v.disconnect()},activeVideoSpeed$:u,menuListElementMutations$:p,getActiveVideoSpeed:()=>r,getOldActiveVideoSpeed:()=>l,getAvailableSpeedValues:()=>c}},M=e=>{const{videoElement:t,menuListElement:n}=e,o=u(n,\"click\").pipe((s=e=>{const{innerText:t,innerHTML:n}=e.target,o=t.trim()||n.trim();return lodash.attempt((()=>C(o)))},e=>{let{subscribe:t,next:n}=e;t((e=>{n(s(e))}))}),w((e=>!lodash.isError(e))));var s;const r=d((e=>{let{next:n}=e,o=t;do{o=Object.getPrototypeOf(o)}while(null===o||!Object.prototype.hasOwnProperty.call(o,\"playbackRate\"));const s=Object.getOwnPropertyDescriptor(o,\"playbackRate\");return Object.defineProperty(o,\"playbackRate\",{set(e){s.set.call(this,e),n(e)}}),()=>{Object.defineProperty(o,\"playbackRate\",s)}})),i=o.pipe((e=>{let t,{subscribe:n,next:o}=e,s=!0;n((e=>{(s||t!==e)&&(s=!1,t=e,o(e))}))})),a=r.pipe((e=>{let t,{subscribe:n,next:o}=e,s=!0;n((e=>{(s||t!==e)&&(s=!1,t=e,o(e))}))})),l=d((e=>{let{next:t}=e;const n=y(i,a);return n.subscribe((e=>{let[n,o]=e;n===o&&t(o)})),()=>n.complete()})).pipe((e=>{let t,{subscribe:n,next:o}=e,s=!0;n((e=>{(s||t!==e)&&(s=!1,t=e,o(e))}))}));let c;a.pipe(x(200),S(void 0),(e=>{let{subscribe:t,next:n}=e;const o=[];return t((e=>{2===o.length&&o.shift(),o.push(e),2===o.length&&n(o.slice())})),()=>{o.length=0}})).subscribe((e=>{let[t]=e;c=t}));const p={menuListElementClickSpeed$:o,menuListElementClickSpeedChange$:i,playbackRate$:r,playbackRateChange$:a,videoSpeedChange$:l};return{...e,...p,dispose:()=>{lodash.values(p).forEach((e=>{e.complete()})),e.dispose()},getOldPlaybackRate:()=>c}},[j]=k(\"speed.NoSuchSpeedMenuItemElementError\",(()=>class extends Error{constructor(e){const t=lodash.attempt((()=>V(e))),n=lodash.isError(t)?String(e):String(t);var o,s,r;super(`There is no such speed menu item as ${n}`),this.speed=e,r=void 0,(s=\"formattedSpeed\")in(o=this)?Object.defineProperty(o,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[s]=r,this.formattedSpeed=n}})),L=e=>{const{query:t,videoElement:n,videoSpeedChange$:o,getOldActiveVideoSpeed:s,getAvailableSpeedValues:r,getActiveVideoSpeed:i}=e,a=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;const r=t(e);if(null==r)throw new j(e);r.click();const i=t=>{if((t??n.playbackRate)!==e)throw new Error(`failed to set ${V(e)} video speed.`)},a=[m(o.pipe(x(Math.max(0,s||0))))];s>0&&a.push(new Promise(((e,t)=>setTimeout((()=>setTimeout(t,s)))))),await Promise.all(a).then(i).catch(i)},l=async()=>{await a(1)},c=async(e,t)=>{if(lodash.isNil(e)&&(e=!1),\"boolean\"==typeof e)e||1===n.playbackRate?await a(s()):await l();else{const n=r();switch(t){case N.MIN:await a(n[e]);break;case N.MAX:await a(n[n.length-1+e]);break;case N.CURRENT:default:{const t=n.indexOf(i());if(-1===t)throw new Error(\"Unexpected Error: The available speed values do not include the active speed value, this should be a bug, please report the issue on github!\");await a(n[t+e])}}}},d=async e=>{try{await c(e,N.CURRENT)}catch(e){if(console.warn(e),!(e instanceof j))throw e}};return Object.assign(e,{set:a,force:async e=>{n.playbackRate=e},reset:l,toggle:c,step:d,increase:async()=>{await d(1)},decrease:async()=>{await d(-1)}})},R=()=>k(\"speed.speedContext\"),P=()=>k(\"speed.buildArguments$\",(()=>{return d().pipe((e=e=>e.settings.enabled,t=>{let{subscribe:n,next:o}=t;const s=new Set;return n((t=>{const n=s.size;e(t)?s.add(t):s.delete(t),s.size!==n&&o([...s])})),()=>{s.clear()}}));var e})),I=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lodash.identity;const[t,n]=R();if(t)return t;let o,i;const[a]=k(\"lifeCycleComponentLoaded$\",(()=>u(unsafeWindow,s.LifeCycleEventTypes.ComponentsLoaded))),[l]=P(),[c]=k(\"speed.videoChange$\",(()=>h(r.videoChange).pipe(w((e=>{let{aid:t,cid:n}=e;return t||n}))))),[v]=k(\"speed.speedContext$\",(()=>d((t=>{let{next:n}=t;return y(c,b(p([]),l),a).subscribe((t=>{var s;let[r,a]=t;const[l]=R();null==l||l.dispose(),null===(s=i)||void 0===s||s(\"context update\");const d=new Promise(((e,t)=>{o=e,i=t}));Promise.all([Promise.all([O.custom.speedContainer(),O.query.video.element()]).then(o),d]).then((e=>{let[,t]=e;return t})).then(T).then(M).then(L).then((e=>Object.assign(e,{videoIdObject:r,speedContext$:v,videoChange$:c}))).then(e(a)).then(n).catch((e=>console.error(e)))}))}))));return v.subscribe(n),m(v)};var D=coreApis.utils.log,q=coreApis.pluginApis.hook;function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B{constructor(e){var t;this.entryContext=e,U(this,\"speedContext\",void 0),U(this,\"settings\",void 0),U(this,\"coreApis\",void 0),U(this,\"metadata\",void 0),U(this,\"options\",void 0),U(this,\"getVideoIdObject\",void 0),U(this,\"getAvailableSpeedValues\",void 0),U(this,\"getOldActiveVideoSpeed\",void 0),U(this,\"forceVideoSpeed\",void 0),U(this,\"getVideoSpeed\",void 0),U(this,\"setVideoSpeed\",void 0),U(this,\"resetVideoSpeed\",void 0),U(this,\"toggleVideoSpeed\",void 0),U(this,\"increaseVideoSpeed\",void 0),U(this,\"decreaseVideoSpeed\",void 0),lodash.assign(this,e,{options:e.settings.options}),null===(t=this.migrate)||void 0===t||t.call(this),lodash.assign(this,lodash.mapValues(B.contextMap,(e=>async function(){const t=await I(),n=lodash.get(t,e),o=lodash.isFunction(n)?await n(...arguments):n;return o})))}}U(B,\"create\",void 0),U(B,\"contextMap\",{getVideoIdObject:\"videoIdObject\",getAvailableSpeedValues:\"getAvailableSpeedValues\",getOldActiveVideoSpeed:\"getOldActiveVideoSpeed\",getVideoSpeed:\"videoElement.playbackRate\",setVideoSpeed:\"set\",forceVideoSpeed:\"force\",resetVideoSpeed:\"reset\",toggleVideoSpeed:\"toggle\",increaseVideoSpeed:\"increase\",decreaseVideoSpeed:\"decrease\"}),I((e=>t=>{const n=lodash.omit(t,\"dispose\"),o=e.map((e=>e.getSpeedContextMixin(n)));if(o.length>1){const e=lodash.intersection(...o.map(Object.keys));if(e.length)throw new Error(`In the registered speed component, there is an implementation of getSpeedContextMixin that causes the speed context to be mixed in ambiguous.\\nThe repeated key names are ${e.join(\", \")}`)}lodash.assign(n,...o);const s=[];return e.forEach((e=>{const t=lodash(e.settings.options).mapValues(((t,n)=>h(l.addComponentListener,`${e.metadata.name}.${n}`).pipe((e=>{let t,{subscribe:n,next:o}=e,s=!0;n((e=>{(s||t!==e)&&(s=!1,t=e,o(e))}))})))).mapKeys(((e,t)=>`${t}$`)).value();s.push(...lodash.values(t)),e.options=new Proxy(e.settings.options,{get:(e,n,o)=>lodash.isSymbol(n)?Reflect.get(e,n,o):!Reflect.has(e,n)&&n.endsWith(\"$\")?t[n]:Reflect.get(e,n,o)}),e.speedContext=n,e.onSpeedContext(n),e.settings.enabled&&lodash(t).entries().forEach((t=>{let[n,o]=t;o.next(e.settings.options[n.slice(0,-1)])}))})),{...n,dispose:()=>{s.forEach((e=>e.complete())),t.dispose()}}})),B.create=function(e){const t=d().pipe((e=>{let t,{subscribe:n,next:o}=e,s=!0;n((e=>{(s||t!==e)&&(s=!1,t=e,o(e))}))}));return{...e,entry:n=>{const o=lodash.attempt((()=>new this(n)));if(o instanceof Error)return(0,D.logError)(o),null;const[s]=P();return t.subscribe((()=>{s.next(o)})),s.next(o),(0,q.getHook)(`speed.component.${e.name}`).after(o),o},reload:()=>t.next(!0),unload:()=>t.next(!1)}};const H={name:\"speed.keymap\",displayName:\"快捷键扩展 - 视频倍速\",author:{name:\"JLoeve\",link:\"https://github.com/LonelySteve\"},description:\"\\n\\n为操作视频倍速提供快捷键支持：\\n\\n- 提高倍速\\n- 降低倍速\\n- 切换倍速\\n\\n若添加并启用了记忆倍速组件，则还会增加一个快捷键：\\n\\n- 清除倍速记忆\\n  \",setup:e=>{let{addData:t,addHook:o}=e;const s=e=>async t=>{const n=await I();return await e(n),t.showTip(V(n.videoElement.playbackRate),\"mdi-fast-forward\"),!0};t(\"keymap.actions\",(e=>{Object.assign(e,{videoSpeedIncrease:{displayName:\"提高倍速\",run:s((e=>{let{increase:t}=e;return t()}))},videoSpeedDecrease:{displayName:\"降低倍速\",run:s((e=>{let{decrease:t}=e;return t()}))},videoSpeedToggle:{displayName:\"切换倍速\",run:s((e=>{let{toggle:t}=e;t()}))}})})),t(\"keymap.presets\",(e=>{e.videoSpeedIncrease=\"shift > 》 arrowUp\",e.videoSpeedDecrease=\"shift < 《 arrowDown\",e.videoSpeedToggle=\"shift ? ？\"})),o(\"speed.component.rememberVideoSpeed\",{after:e=>{t(\"keymap.actions\",(t=>{t.videoSpeedForget={displayName:\"清除倍速记忆\",run:lodash.debounce(s((async()=>{e.settings.enabled?e.options.individualRemember?(e.forgetSpeed(),await e.resetVideoSpeed(),n.Toast.success(\"已清除当前视频倍速记忆值\",e.metadata.displayName,3e3)):n.Toast.error(\"选项「各视频分别记忆」已禁用，不能清除当前视频倍速记忆值\",e.metadata.displayName,5e3):n.Toast.error(\"组件已禁用，不能清除当前视频倍速记忆值\",e.metadata.displayName,5e3)})),200)}})),t(\"keymap.presets\",(e=>{e.videoSpeedForget=\"shift : ：\"}))}})},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"};return t=t.plugin}()}));",
      "displayName": "快捷键扩展 - 视频倍速",
      "name": "speed.keymap",
      "author": {
        "name": "JLoeve",
        "link": "https://github.com/LonelySteve"
      },
      "description": "\n\n为操作视频倍速提供快捷键支持：\n\n- 提高倍速\n- 降低倍速\n- 切换倍速\n\n若添加并启用了记忆倍速组件，则还会增加一个快捷键：\n\n- 清除倍速记忆\n  ",
      "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
      "coreVersion": "2.4.0"
    }
  },
  "userComponents": {
    "downloadVideo": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/download\"]=t():e[\"video/download\"]=t()}(self,(function(){return function(){var e={828:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".download-video-panel {\\n  background-color: #fff;\\n  color: black;\\n  border-radius: 8px;\\n  border: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  box-sizing: border-box;\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05);\\n  font-size: 12px;\\n  padding: 6px;\\n  top: 100px;\\n  left: 50%;\\n  transform: translateX(-50%) scale(0.95);\\n  transition: 0.2s ease-out;\\n  z-index: 1000;\\n  width: 320px;\\n  height: calc(100vh - 200px);\\n  display: flex;\\n  flex-direction: column;\\n}\\nbody.dark .download-video-panel {\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\\n}\\nbody.dark .download-video-panel {\\n  background-color: #282828;\\n  color: #eee;\\n}\\n.download-video-panel.open {\\n  transform: translateX(-50%);\\n}\\n.download-video-panel .be-textbox,\\n.download-video-panel .be-textarea {\\n  flex-grow: 1;\\n}\\n.download-video-panel-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n  border-bottom: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  padding: 6px 0;\\n  margin: 0 6px;\\n}\\n.download-video-panel-header .title {\\n  font-size: 16px;\\n  font-weight: bold;\\n  flex-grow: 1;\\n  margin: 0 8px;\\n}\\n.download-video-panel-header .be-button {\\n  padding: 4px;\\n}\\n.download-video-panel-content {\\n  overflow: auto;\\n  scrollbar-width: none !important;\\n  overscroll-behavior: contain;\\n  display: flex;\\n  align-items: stretch;\\n  flex-direction: column;\\n  gap: 0;\\n  flex: 1 0 0;\\n  padding: 12px 6px;\\n  align-items: flex-start;\\n}\\n.download-video-panel-content::-webkit-scrollbar {\\n  height: 0 !important;\\n  width: 0 !important;\\n}\\n.download-video-panel-content > :not(:first-child) {\\n  margin-top: 12px;\\n}\\n.download-video-panel .download-video-config-item {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n}\\n.download-video-panel .download-video-config-item .download-video-config-title {\\n  margin-right: 8px;\\n}\\n.download-video-panel .download-video-config-item.error {\\n  color: #E57373;\\n}\\n.download-video-panel .download-video-config-section {\\n  align-self: stretch;\\n}\\n.download-video-panel .download-video-config-description {\\n  opacity: 0.5;\\n  margin-top: 4px;\\n}\\n.download-video-panel-footer {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n  border-top: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  padding: 6px 0;\\n  margin: 0 6px;\\n  justify-content: center;\\n}\\n.download-video-panel .run-download {\\n  font-size: 13px;\\n  padding: 6px 12px;\\n}\",\"\"]),e.exports=i},635:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".episodes-picker-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n}\\n.episodes-picker-checked-ratio {\\n  flex-grow: 1;\\n  margin-left: 4px;\\n}\\n.episodes-picker-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n}\\n.episodes-picker-actions .be-button {\\n  padding: 4px;\\n}\\n.episodes-picker-actions .be-button.invert-selection .be-icon {\\n  font-size: 14px;\\n}\\n.episodes-picker-actions .be-button.select-all .be-icon, .episodes-picker-actions .be-button.deselect-all .be-icon {\\n  transform: translateY(1px);\\n}\\n.episodes-picker-items {\\n  max-height: 400px;\\n  overflow: auto;\\n}\\n.episodes-picker-items:not(:empty) {\\n  margin-top: 4px;\\n  border: 1px solid rgba(136, 136, 136, 0.2666666667);\\n  border-radius: 6px;\\n}\\n.episodes-picker-items .be-check-box {\\n  padding: 2px 6px;\\n}\\n.episodes-picker-items .episode-duration {\\n  margin-right: 4px;\\n  text-align: right;\\n  flex: 1 1 0;\\n  opacity: 0.5;\\n}\",\"\"]),e.exports=i},307:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".single-video-info.download-video-config-section {\\n  position: relative;\\n  height: 125px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.single-video-info.download-video-config-section img {\\n  height: 125px;\\n  -o-object-fit: contain;\\n     object-fit: contain;\\n  border-radius: 8px;\\n}\\n.single-video-info.download-video-config-section img.shadow {\\n  position: absolute;\\n  filter: blur(8px) brightness(0.8);\\n  transform: scaleY(0.95) translateY(4px);\\n  z-index: -1;\\n  opacity: 0.3;\\n}\",\"\"]),e.exports=i},645:function(e){\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,i){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(i)for(var s=0;s<this.length;s++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[s][0];null!=a&&(o[a]=!0)}for(var d=0;d<e.length;d++){var r=[].concat(e[d]);i&&o[r[0]]||(n&&(r[2]?r[2]=\"\".concat(n,\" and \").concat(r[2]):r[2]=n),t.push(r))}},t}},379:function(e,t,n){\"use strict\";var i,o=function(){return void 0===i&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\ni=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function d(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function r(e,t){for(var n={},i=[],o=0;o<e.length;o++){var s=e[o],r=t.base?s[0]+t.base:s[0],l=n[r]||0,c=\"\".concat(r,\" \").concat(l);n[r]=l+1;var u=d(c),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:c,updater:m(p,t),references:1}),i.push(c)}return i}function l(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var a=s(e.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join(\"\\n\")});function p(e,t,n,i){var o=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var s=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function f(e,t,n){var i=n.css,o=n.media,s=n.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),s&&\"undefined\"!=typeof btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,v=0;function m(e,t){var n,i,o;if(t.singleton){var s=v++;n=h||(h=l(t)),i=p.bind(null,n,s,!1),o=p.bind(null,n,s,!0)}else n=l(t),i=f.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var n=r(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=d(n[i]);a[o].references--}for(var s=r(e,t),l=0;l<n.length;l++){var c=d(n[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=s}}}},605:function(e,t,n){\"use strict\";n.r(t),n.d(t,{default:function(){return ae}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"VPopup\",{staticClass:\"download-video-panel\",attrs:{fixed:\"\",\"trigger-element\":e.triggerElement},model:{value:e.open,callback:function(t){e.open=t},expression:\"open\"}},[n(\"div\",{staticClass:\"download-video-panel-header\"},[n(\"VIcon\",{attrs:{icon:\"mdi-download\"}}),e._v(\" \"),n(\"div\",{staticClass:\"title\"},[e._v(\"\\n      下载视频\\n    \")]),e._v(\" \"),n(\"VButton\",{attrs:{type:\"transparent\",title:\"关闭\"},on:{click:function(t){e.open=!1}}},[n(\"VIcon\",{attrs:{icon:\"mdi-close\",size:20}})],1)],1),e._v(\" \"),n(\"div\",{staticClass:\"download-video-panel-content\"},[e.selectedInput?n(\"div\",{staticClass:\"download-video-config-item\"},[n(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"\\n        输入源:\\n      \")]),e._v(\" \"),n(\"VDropdown\",{attrs:{items:e.inputs},model:{value:e.selectedInput,callback:function(t){e.selectedInput=t},expression:\"selectedInput\"}})],1):e._e(),e._v(\" \"),0===e.inputs.length?n(\"div\",{staticClass:\"download-video-config-item error\"},[e._v(\"\\n      没有匹配的输入源, 请确保安装了适合此页面的插件.\\n    \")]):e._e(),e._v(\" \"),e.selectedInput&&e.selectedInput.component?n(e.selectedInput.component,{ref:\"inputOptions\",tag:\"component\"}):e._e(),e._v(\" \"),e.selectedApi?n(\"div\",{staticClass:\"download-video-config-item\"},[n(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"\\n        格式:\\n      \")]),e._v(\" \"),n(\"VDropdown\",{attrs:{items:e.apis},model:{value:e.selectedApi,callback:function(t){e.selectedApi=t},expression:\"selectedApi\"}})],1):e._e(),e._v(\" \"),e.selectedApi&&e.selectedApi.description?n(\"div\",{staticClass:\"download-video-config-description\",domProps:{innerHTML:e._s(e.selectedApi.description)}}):e._e(),e._v(\" \"),e.selectedQuality?n(\"div\",{staticClass:\"download-video-config-item\"},[n(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"\\n        清晰度:\\n      \")]),e._v(\" \"),n(\"VDropdown\",{attrs:{items:e.filteredQualities},on:{change:function(t){return e.saveSelectedQuality()}},model:{value:e.selectedQuality,callback:function(t){e.selectedQuality=t},expression:\"selectedQuality\"}})],1):e._e(),e._v(\" \"),!e.testData.multiple&&e.selectedQuality?[e.testData.videoInfo?n(\"div\",{staticClass:\"download-video-config-description\"},[e._v(\"\\n        预计大小: \"+e._s(e.formatFileSize(e.testData.videoInfo.totalSize))+\"\\n      \")]):e._e(),e._v(\" \"),null===e.testData.videoInfo?n(\"div\",{staticClass:\"download-video-config-description\"},[e._v(\"\\n        正在计算大小\\n      \")]):e._e()]:e._e(),e._v(\" \"),e._l(e.assetsWithOptions,(function(e){return n(e.component,{key:e.name,ref:\"assetsOptions\",refInFor:!0,tag:\"component\",attrs:{name:e.name}})})),e._v(\" \"),e.selectedOutput?n(\"div\",{staticClass:\"download-video-config-item\"},[n(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"\\n        输出方式:\\n      \")]),e._v(\" \"),n(\"VDropdown\",{attrs:{items:e.outputs},model:{value:e.selectedOutput,callback:function(t){e.selectedOutput=t},expression:\"selectedOutput\"}})],1):e._e(),e._v(\" \"),e.selectedOutput&&e.selectedOutput.description?n(\"div\",{staticClass:\"download-video-config-description\"},[e._v(\"\\n      \"+e._s(e.selectedOutput.description)+\"\\n    \")]):e._e(),e._v(\" \"),e.selectedOutput&&e.selectedOutput.component?n(e.selectedOutput.component,{ref:\"outputOptions\",tag:\"component\"}):e._e()],2),e._v(\" \"),n(\"div\",{staticClass:\"download-video-panel-footer\"},[n(\"VButton\",{staticClass:\"run-download\",attrs:{type:\"primary\",disabled:!e.canStartDownload},on:{click:function(t){return e.startDownload(e.$refs.outputOptions,e.selectedOutput)}}},[e._v(\"\\n      开始\\n    \")])],1)])};i._withStripped=!0;var o=coreApis.settings,s=coreApis.utils,a=n(414),d=coreApis.utils.formatters,r=coreApis.ui,l=coreApis.pluginApis.data,c=coreApis.componentApis.video.videoQuality,u=coreApis.toast,p=coreApis.utils.title,f=coreApis.ajax,h=coreApis.utils.urls,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"episodes-picker download-video-config-section\"},[n(\"div\",{staticClass:\"episodes-picker-header\"},[n(\"div\",{staticClass:\"episodes-picker-title\"},[e._v(\"\\n      选集:\\n    \")]),e._v(\" \"),n(\"div\",{staticClass:\"episodes-picker-checked-ratio\"},[e._v(\"\\n      \"+e._s(e.checkedRatio)+\"\\n    \")]),e._v(\" \"),n(\"div\",{staticClass:\"episodes-picker-actions\"},[n(\"VButton\",{staticClass:\"select-all\",attrs:{title:\"全选\",type:\"transparent\"},on:{click:function(t){e.forEachItem((function(e){return e.isChecked=!0}))}}},[n(\"VIcon\",{attrs:{size:16,icon:\"mdi-checkbox-multiple-marked-circle\"}})],1),e._v(\" \"),n(\"VButton\",{staticClass:\"deselect-all\",attrs:{title:\"全不选\",type:\"transparent\"},on:{click:function(t){e.forEachItem((function(e){return e.isChecked=!1}))}}},[n(\"VIcon\",{attrs:{size:16,icon:\"mdi-checkbox-multiple-blank-circle-outline\"}})],1),e._v(\" \"),n(\"VButton\",{staticClass:\"invert-selection\",attrs:{title:\"反选\",type:\"transparent\"},on:{click:function(t){e.forEachItem((function(e){return e.isChecked=!e.isChecked}))}}},[n(\"VIcon\",{attrs:{size:16,icon:\"mdi-circle-slice-4\"}})],1)],1)]),e._v(\" \"),n(\"div\",{staticClass:\"episodes-picker-items\"},e._l(e.episodeItems,(function(t,i){return n(\"div\",{key:t.key,staticClass:\"episodes-picker-item\"},[n(\"CheckBox\",{attrs:{\"icon-position\":\"left\",\"data-aid\":t.inputItem.aid,\"data-cid\":t.inputItem.cid,\"data-bvid\":t.inputItem.bvid},nativeOn:{click:function(n){return e.shiftSelect(n,t,i)}},model:{value:t.isChecked,callback:function(n){e.$set(t,\"isChecked\",n)},expression:\"item.isChecked\"}},[n(\"span\",{staticClass:\"episode-title\"},[e._v(\"\\n          \"+e._s(t.title)+\"\\n        \")]),e._v(\" \"),t.durationText?n(\"span\",{staticClass:\"episode-duration\"},[e._v(\"\\n          \"+e._s(t.durationText)+\"\\n        \")]):e._e()])],1)})),0)])};v._withStripped=!0;var m=Vue.extend({components:{VButton:r.VButton,VIcon:r.VIcon,CheckBox:r.CheckBox},props:{api:{type:Function,required:!0}},data:()=>({episodeItems:[],maxCheckedItems:32,lastCheckedEpisodeIndex:-1}),computed:{checkedRatio(){return`(${this.episodeItems.filter((e=>e.isChecked)).length}/${this.episodeItems.length})`},inputItems(){return this.episodeItems.map((e=>e.inputItem))},checkedInputItems(){return this.episodeItems.filter((e=>e.isChecked)).map((e=>e.inputItem))}},created(){this.getEpisodeItems()},methods:{shiftSelect(e,t,n){e.shiftKey&&-1!==this.lastCheckedEpisodeIndex?e.shiftKey&&-1!==this.lastCheckedEpisodeIndex&&(this.episodeItems.slice(Math.min(this.lastCheckedEpisodeIndex,n)+1,Math.max(this.lastCheckedEpisodeIndex,n)).forEach((e=>{e.isChecked=!e.isChecked})),this.lastCheckedEpisodeIndex=n,e.preventDefault()):this.lastCheckedEpisodeIndex=n},forEachItem(e){this.episodeItems.forEach(e)},async getEpisodeItems(){this.episodeItems.length>0||(this.episodeItems=await this.api(this))}}}),g=n(379),w=n.n(g),b=n(635),y=n.n(b),x={insert:\"head\",singleton:!1},_=(w()(y(),x),y().locals,n(900)),I=(0,_.Z)(m,v,[],!1,null,null,null);I.options.__file=\"registry/lib/components/video/download/inputs/EpisodesPicker.vue\";var k=I.exports;const C=e=>Vue.extend({computed:{checkedInputItems(){return this.$refs.picker.checkedInputItems}},render:t=>t(k,{props:{api:e},ref:\"picker\"})}),A={name:\"bangumi.batch\",displayName:\"当前番剧 (多P)\",match:h.bangumiUrls,batch:!0,getInputs:async e=>(null==e?void 0:e.checkedInputItems)??[],component:async()=>C((async e=>{var t,n;const i=document.querySelector(\"meta[property='og:url']\");if(null===i)return(0,a.logError)(\"获取番剧数据失败: 无法找到 Season ID\"),[];const s=null===(t=i.getAttribute(\"content\"))||void 0===t||null===(n=t.match(/play\\/ss(\\d+)/))||void 0===n?void 0:n[1];if(void 0===s)return(0,a.logError)(\"获取番剧数据失败: 无法解析 Season ID\"),[];const r=await(0,f.getJson)(`https://api.bilibili.com/pgc/web/season/section?season_id=${s}`);if(0!==r.code)return(0,a.logError)(`获取番剧数据失败: 无法获取番剧集数列表, message=${r.message}`),[];const l=r.result.main_section.episodes;return l.map(((t,n)=>{const i=t.long_title?t.title:(n+1).toString(),s=t.long_title?t.long_title:t.title;return{key:t.cid,title:`${i} - ${s}`,isChecked:n<e.maxCheckedItems,inputItem:{aid:t.aid,cid:t.cid,title:(0,p.formatTitle)((0,o.getGeneralSettings)().batchFilenameFormat,!1,{ep:s,cid:t.cid,aid:t.aid,n:(0,d.formatNumber)(parseFloat(i),l.length)??i}),allowQualityDrop:!0}}}))}))},V={name:\"video.batch\",displayName:\"当前视频 (多P)\",match:h.videoUrls,batch:!0,getInputs:async e=>(null==e?void 0:e.checkedInputItems)??[],component:async()=>C((async e=>{const{aid:t}=unsafeWindow,n=`https://api.bilibili.com/x/web-interface/view?aid=${t}`,i=await(0,f.getJsonWithCredentials)(n);if(0!==i.code)return(0,a.logError)(`获取视频选集列表失败, message = ${i.message}`),[];const{pages:s}=i.data;return void 0===s?((0,a.logError)(\"获取视频选集列表失败, 没有找到选集信息.\"),[]):s.map(((n,i)=>({key:n.cid,title:`P${n.page} ${n.part}`,isChecked:i<e.maxCheckedItems,durationText:(0,d.formatDuration)(n.duration),inputItem:{allowQualityDrop:!0,title:(0,p.formatTitle)((0,o.getGeneralSettings)().batchFilenameFormat,!1,{cid:n.cid,n:(0,d.formatNumber)(n.page,s.length),ep:n.part}),cid:n.cid,aid:t}})))}))},D={name:\"video\",displayName:\"当前视频\",match:h.videoUrls,getInputs:async()=>[{aid:unsafeWindow.aid,cid:unsafeWindow.cid,title:(0,p.getFriendlyTitle)(!0)}],component:()=>Promise.resolve().then(n.bind(n,573)).then((e=>e.default))};var E=coreApis.utils.sort;const S=(e,t)=>{e.quality&&t.currentQuality.value!==e.quality.value&&(e.allowQualityDrop?console.warn(`'${e.title}' 不支持选择的清晰度${e.quality.displayName}, 已降级为${t.currentQuality.displayName}`):(e=>{if(c.vipRequiredQualities.find((t=>t.value===e)))throw new Error(\"您选择的清晰度需要大会员, 请更改清晰度后重试.\");if(c.loginRequiredQualities.find((t=>t.value===e)))throw new Error(\"您选择的清晰度需要先登录.\");throw new Error(\"获取下载链接失败, 请尝试更换清晰度或更换格式.\")})(e.quality.value))};var $=coreApis.download;function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class q{constructor(e){O(this,\"input\",void 0),O(this,\"fragments\",void 0),O(this,\"qualities\",void 0),O(this,\"currentQuality\",void 0),O(this,\"jsonData\",void 0),Object.assign(this,e)}get totalSize(){return lodash.sumBy(this.fragments,(e=>e.size))}get totalLength(){return lodash.sumBy(this.fragments,(e=>e.length))}get titledFragments(){return this.fragments.map(((e,t)=>{const n=this.fragments.filter((t=>t.extension===e.extension)).length>1?` - ${(0,d.formatNumber)(t+1,this.fragments.length)}`:\"\";return{...e,title:`${this.input.title}${n}${e.extension}`}}))}}class Q{constructor(e){this.infos=e,O(this,\"inputs\",[]),O(this,\"extraAssets\",[]),this.inputs=e.map((e=>e.input))}get isSingleVideo(){return this.inputs.length<2}async downloadExtraAssets(){console.log(\"[downloadExtraAssets]\",this.extraAssets);const e=`${(0,p.getFriendlyTitle)(!1)}.zip`;await new $.DownloadPackage(this.extraAssets).emit(e)}}const T=e=>`https://api.bilibili.com/x/player/playurl?${e}`,U=e=>`https://api.bilibili.com/pgc/player/web/playurl?${e}`,j={video:\".mp4\",audio:\".m4a\",flacAudio:\".flac\"};let P;!function(e){e.Avc=\"AVC/H.264\",e.Hevc=\"HEVC/H.265\",e.Av1=\"AV1\"}(P||(P={}));const N=e=>({url:e.downloadUrl,backupUrls:e.backupUrls,length:e.duration,size:Math.trunc(e.bandWidth*e.duration/8),extension:j[e.type]??\".m4s\"}),W=e=>{const{videoDashes:t,audioDashes:n,videoCodec:i}=e,o=[];if(0!==t.length){const e=e=>e.videoCodec===i;if(t.some(e)){const n=t.filter(e).sort((0,E.ascendingSort)((e=>e.bandWidth)))[0];o.push(N(n))}else o.push(N(t.sort((0,E.ascendingSort)((e=>e.bandWidth)))[0]))}if(0!==n.length){const e=n.sort((0,E.descendingSort)((e=>e.bandWidth)))[0];o.push(N(e))}return o},z=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{codec:n=P.Avc,filters:i}=t,o={video:()=>!0,audio:()=>!0,...i},{aid:a,cid:d,quality:r}=e,l={avid:a,cid:d,qn:(null==r?void 0:r.value)??\"\",otype:\"json\",fourk:1,fnver:0,fnval:4048},u=h.bangumiUrls.some((e=>(0,s.matchUrlPattern)(e))),p=u?U((0,s.formData)(l)):T((0,s.formData)(l)),v=await(0,f.bilibiliApi)((0,f.getJsonWithCredentials)(p),\"获取视频链接失败\");if(!v.dash)throw new Error(\"此视频没有 dash 格式, 请改用其他格式.\");const m=c.allQualities.find((e=>e.value===v.quality)),{duration:g,video:w,audio:b,dolby:y,flac:x}=v.dash,_=e=>{switch(e){case 12:return P.Hevc;case 13:return P.Av1;default:return P.Avc}},I=w.filter((e=>e.id===m.value)).map((e=>({type:\"video\",videoCodec:_(e.codecid),quality:m,width:e.width,height:e.height,codecs:e.codecs,codecId:e.codecid,bandWidth:e.bandwidth,frameRate:e.frameRate,backupUrls:(e.backupUrl||e.backup_url||[]).map((e=>e.replace(\"http:\",\"https:\"))),downloadUrl:(e.baseUrl||e.base_url||\"\").replace(\"http:\",\"https:\"),duration:g}))).filter((e=>o.video(e))),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"audio\";return{type:t,bandWidth:e.bandwidth,codecs:e.codecs,codecId:e.codecid??0,backupUrls:(e.backupUrl||e.backup_url||[]).map((e=>e.replace(\"http:\",\"https:\"))),downloadUrl:(e.baseUrl||e.base_url||\"\").replace(\"http:\",\"https:\"),duration:g}},C=(b||[]).map((e=>k(e))).filter((e=>o.audio(e)));var A;y&&C.push(...(null===(A=y.audio)||void 0===A?void 0:A.map((e=>k(e))))??[]);x&&C.push(...x.audio?[k(x.audio,\"flacAudio\")]:[]);const V=W({audioDashes:C,videoDashes:I,videoCodec:n}),D=v.accept_quality.map((e=>c.allQualities.find((t=>t.value===e)))).filter((e=>void 0!==e)),E=new q({input:e,jsonData:v,fragments:V,qualities:D,currentQuality:m});return S(e,E),E},B={name:\"video.dash.avc\",displayName:\"dash (AVC/H.264)\",description:\"音画分离的 mp4 格式, 编码为 H.264, 体积较大, 兼容性较好. 下载后可以合并为单个 mp4 文件. 如果视频源没有此编码, 则会自动选择其他同清晰度的编码格式.\",downloadVideoInfo:async e=>z(e,{codec:P.Avc})},F={name:\"video.dash.hevc\",displayName:\"dash (HEVC/H.265)\",description:\"音画分离的 mp4 格式, 编码为 H.265, 体积中等, 兼容性较差. 下载后可以合并为单个 mp4 文件. 如果视频源没有此编码, 则会自动选择其他同清晰度的编码格式.\",downloadVideoInfo:async e=>z(e,{codec:P.Hevc})},H={name:\"video.dash.av1\",displayName:\"dash (AV1)\",description:\"音画分离的 mp4 格式, 编码为 AV1, 体积较小, 兼容性中等. 下载后可以合并为单个 mp4 文件. 如果视频源没有此编码, 则会自动选择其他同清晰度的编码格式.\",downloadVideoInfo:async e=>z(e,{codec:P.Av1})},M={name:\"video.dash.audio\",displayName:\"dash (仅音频)\",description:\"仅下载视频中的音频轨道.\",downloadVideoInfo:async e=>z(e,{filters:{video:()=>!1}})},R=(e,t)=>{const n=e=>t.length>e?t[e]:t[t.length-1];return{fragments:e.durl.map(((e,t)=>({length:e.length,size:e.size,url:e.url,backupUrls:e.backup_url,extension:n(t)}))),qualities:e.accept_quality.map((e=>c.allQualities.find((t=>t.value===e)))).filter((e=>void 0!==e)),currentQuality:c.allQualities.find((t=>t.value===e.quality))}},G={name:\"video.flv\",displayName:\"flv\",description:\"使用 flv 格式下载, 兼容 H.264 编码.\",downloadVideoInfo:e=>(async e=>{const{aid:t,cid:n,quality:i}=e,o={avid:t,cid:n,qn:(null==i?void 0:i.value)??\"\",otype:\"json\",fourk:1,fnver:0,fnval:0},a=h.bangumiUrls.some((e=>(0,s.matchUrlPattern)(e)))?U((0,s.formData)(o)):T((0,s.formData)(o)),d=await(0,f.bilibiliApi)((0,f.getJsonWithCredentials)(a),\"获取视频链接失败\"),r=new q({input:e,jsonData:d,...R(d,[\".flv\"])});return S(e,r),r})(e)},L={name:\"consoleLogDemo\",displayName:\"Toast\",description:\"弹一条消息显示出下载链接, 右键新标签页打开就可以下载. 链接有 referer 限制, 复制无用, 且不能保留视频文件名.\",runAction:async e=>{const t=e.infos.flatMap((e=>e.titledFragments)),n=t.map((e=>e.url)).join(\"\\n\");u.Toast.show(t.map((e=>`<a class=\"link\" href=\"${e.url}\" download=\"${e.title}\">${e.title}</a>`)).join(\"\\n\"),\"下载视频\"),console.log(n),console.log(e)}},[J]=(0,l.registerAndGetData)(\"downloadVideo.inputs\",[D,V,A]),[Z]=(0,l.registerAndGetData)(\"downloadVideo.apis\",[G,B,F,H,M]),[X]=(0,l.registerAndGetData)(\"downloadVideo.assets\",[]),[Y]=(0,l.registerAndGetData)(\"downloadVideo.outputs\",[L]),{basicConfig:K}=(0,o.getComponentSettings)(\"downloadVideo\").options,ee=e=>e.filter((e=>{var t;return(null===(t=e.match)||void 0===t?void 0:t.some((e=>(0,s.matchUrlPattern)(e))))??!0}));var te=Vue.extend({components:{VPopup:r.VPopup,VButton:r.VButton,VDropdown:r.VDropdown,VIcon:r.VIcon},props:{triggerElement:{required:!0}},data(){const e=K.output;return{open:!1,busy:!1,testData:{videoInfo:null,multiple:!1},assets:X,qualities:[],selectedQuality:void 0,inputs:[],selectedInput:void 0,apis:[],selectedApi:void 0,outputs:Y,selectedOutput:Y.find((t=>t.name===e))||Y[0]}},computed:{assetsWithOptions(){return this.assets.filter((e=>e.component))},filteredQualities(){return 0===this.qualities.length?c.allQualities:this.qualities},canStartDownload(){if(this.busy||!this.open)return!1;return!Object.entries(this).filter((e=>{let[t]=e;return t.startsWith(\"selected\")})).some((e=>{let[,t]=e;return!t}))}},watch:{selectedInput(e){void 0!==e&&this.updateTestVideoInfo()},selectedApi(e){void 0!==e&&(this.updateTestVideoInfo(),K.api=e.name)},selectedOutput(e){void 0!==e&&(K.output=e.name)}},mounted(){coreApis.observer.videoChange((()=>{this.selectedInput=void 0,this.selectedApi=void 0;const e=ee(J);this.inputs=e,this.selectedInput=e[0];const t=ee(Z);this.apis=t;const n=t.find((e=>e.name===K.api));this.selectedApi=n||t[0]}))},methods:{formatFileSize:d.formatFileSize,saveSelectedQuality(){const e=this.selectedQuality;void 0!==e&&(K.quality=e.value,this.updateTestVideoInfo())},async getVideoItems(){const e=this.selectedInput;return await e.getInputs(this.$refs.inputOptions)},async updateTestVideoInfo(){var e;if(!this.selectedInput||!this.selectedApi)return;this.testData.videoInfo=null;const t=this.selectedInput,n=(null===(e=t.getTestInput)||void 0===e?void 0:e.call(t))??{aid:unsafeWindow.aid,cid:unsafeWindow.cid,title:(0,p.getFriendlyTitle)(!0)};console.log(\"[updateTestVideoInfo]\",n),this.testData.multiple=t.batch;const i=this.selectedApi;try{const e=await i.downloadVideoInfo(n);this.qualities=e.qualities;if((!this.selectedQuality||!e.qualities.some((e=>e.value===this.selectedQuality.value)))&&(this.selectedQuality=e.qualities[0],K.quality)){const[t]=e.qualities.filter((e=>e.value<=K.quality));t&&(this.selectedQuality=t)}n.quality=this.selectedQuality;const t=await i.downloadVideoInfo(n);this.testData.videoInfo=t}catch(e){this.testData.videoInfo=void 0}},async startDownload(e,t){try{this.busy=!0;const n=this.selectedInput,i=this.selectedApi,o=await n.getInputs(this.$refs.inputOptions);if(0===o.length)return void u.Toast.info(\"未接收到视频, 如果输入源支持批量, 请至少选择一个视频.\",\"下载视频\",3e3);o.forEach((e=>{e.quality=this.selectedQuality}));const s=await Promise.all(o.map((e=>i.downloadVideoInfo(e))));if(0===s.length||0===lodash.sumBy(s,(e=>e.fragments.length)))return void u.Toast.info(\"未接收到可下载数据, 请检查输入源和格式是否适用于当前视频.\",\"下载视频\",3e3);const a=new Q(s),d=(await Promise.all(X.map((e=>e.getAssets(s,this.$refs.assetsOptions.find((t=>t.$attrs.name===e.name))))))).flat();a.extraAssets.push(...d),await a.downloadExtraAssets(),await t.runAction(a,e)}catch(e){(0,a.logError)(e)}finally{this.busy=!1}}}}),ne=n(828),ie=n.n(ne),oe={insert:\"head\",singleton:!1},se=(w()(ie(),oe),ie().locals,(0,_.Z)(te,i,[],!1,null,null,null));se.options.__file=\"registry/lib/components/video/download/DownloadVideo.vue\";var ae=se.exports},185:function(e,t,n){\"use strict\";n.r(t),n.d(t,{default:function(){return d}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"multiple-widgets\"},[n(\"DefaultWidget\",{ref:\"button\",attrs:{name:\"下载视频\",icon:\"mdi-download\"},on:{mouseover:function(t){return e.createDownloadPanel()},click:function(t){return e.toggleDownloadPanel()}}})],1)};let o;i._withStripped=!0;var s=Vue.extend({components:{DefaultWidget:coreApis.ui.DefaultWidget},methods:{async createDownloadPanel(){if(!o){const e=document.createElement(\"div\");document.body.appendChild(e);const t=await Promise.resolve().then(n.bind(n,605)).then((e=>e.default));o=new t({propsData:{triggerElement:this.$refs.button}}).$mount(e)}},async toggleDownloadPanel(){o&&(o.open=!o.open)}}}),a=(0,n(900).Z)(s,i,[],!1,null,null,null);a.options.__file=\"registry/lib/components/video/download/Widget.vue\";var d=a.exports},573:function(e,t,n){\"use strict\";n.r(t),n.d(t,{default:function(){return h}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"single-video-info download-video-config-section\"},[e.imageUrl?n(\"img\",{staticClass:\"shadow\",attrs:{src:e.imageUrl}}):e._e(),e._v(\" \"),e.imageUrl?n(\"img\",{attrs:{src:e.imageUrl}}):e._e()])};i._withStripped=!0;var o=coreApis.observer,s=n(414),a=coreApis.componentApis.video.videoInfo,d=Vue.extend({data:()=>({imageUrl:\"\"}),created(){(0,o.videoChange)((async()=>{const{aid:e}=unsafeWindow,t=new a.VideoInfo(e);try{await t.fetchInfo()}catch(e){throw(0,s.logError)(e),e}this.imageUrl=t.coverUrl.replace(\"http:\",\"https:\")}))}}),r=n(379),l=n.n(r),c=n(307),u=n.n(c),p={insert:\"head\",singleton:!1},f=(l()(u(),p),u().locals,(0,n(900).Z)(d,i,[],!1,null,null,null));f.options.__file=\"registry/lib/components/video/download/inputs/video/SingleVideoInfo.vue\";var h=f.exports},900:function(e,t,n){\"use strict\";function i(e,t,n,i,o,s,a,d){var r,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),s&&(l._scopeId=\"data-v-\"+s),a?(r=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=r):o&&(r=d?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),r)if(l.functional){l._injectStyles=r;var c=l.render;l.render=function(e,t){return r.call(t),c(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,r):[r]}return{exports:e,options:l}}n.d(t,{Z:function(){return i}})},414:function(e){\"use strict\";e.exports=coreApis.utils.log}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return function(){\"use strict\";n.d(i,{component:function(){return t}});var e=coreApis.spinQuery;const t={name:\"downloadVideo\",displayName:\"下载视频\",description:\"在功能面板中添加下载视频支持. 请注意不能下载超出账号权限的视频, 例如非大会员下载大会员清晰度视频, 或者大陆地区网络下载港澳台地区番剧, 都是不可以的.\",entry:none,reload:none,unload:none,widget:{component:()=>Promise.resolve().then(n.bind(n,185)).then((e=>e.default)),condition:()=>(0,e.hasVideo)()},tags:[componentsTags.video],options:{basicConfig:{defaultValue:{},displayName:\"基础配置\",hidden:!0}},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"}}(),i=i.component}()}));",
      "metadata": {
        "name": "downloadVideo",
        "displayName": "下载视频",
        "description": "在功能面板中添加下载视频支持. 请注意不能下载超出账号权限的视频, 例如非大会员下载大会员清晰度视频, 或者大陆地区网络下载港澳台地区番剧, 都是不可以的.",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "options": {
          "basicConfig": {
            "defaultValue": {},
            "displayName": "基础配置",
            "hidden": true
          }
        },
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {
          "basicConfig": {}
        }
      }
    },
    "downloadDanmaku": {
      "code": "!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"video/danmaku/download\"]=e():t[\"video/danmaku/download\"]=e()}(self,(function(){return function(){var t={701:function(t,e,i){\"use strict\";i.r(e),i.d(e,{decodeDanmakuSegment:function(){return a},decodeDanmakuView:function(){return s},proto:function(){return o}});var n=coreApis.runtimeLibrary;const o={nested:{DmWebViewReply:{fields:{state:{type:\"int32\",id:1},text:{type:\"string\",id:2},textSide:{type:\"string\",id:3},dmSge:{type:\"DmSegConfig\",id:4},flag:{type:\"DanmakuFlagConfig\",id:5},specialDms:{rule:\"repeated\",type:\"string\",id:6},checkBox:{type:\"bool\",id:7},count:{type:\"int64\",id:8},commandDms:{rule:\"repeated\",type:\"CommandDm\",id:9},dmSetting:{type:\"DanmuWebPlayerConfig\",id:10}}},CommandDm:{fields:{id:{type:\"int64\",id:1},oid:{type:\"int64\",id:2},mid:{type:\"int64\",id:3},command:{type:\"string\",id:4},content:{type:\"string\",id:5},progress:{type:\"int32\",id:6},ctime:{type:\"string\",id:7},mtime:{type:\"string\",id:8},extra:{type:\"string\",id:9},idStr:{type:\"string\",id:10}}},DmSegConfig:{fields:{pageSize:{type:\"int64\",id:1},total:{type:\"int64\",id:2}}},DanmakuFlagConfig:{fields:{recFlag:{type:\"int32\",id:1},recText:{type:\"string\",id:2},recSwitch:{type:\"int32\",id:3}}},DmSegMobileReply:{fields:{elems:{rule:\"repeated\",type:\"DanmakuElem\",id:1}}},DanmakuElem:{fields:{id:{type:\"int64\",id:1},progress:{type:\"int32\",id:2},mode:{type:\"int32\",id:3},fontsize:{type:\"int32\",id:4},color:{type:\"uint32\",id:5},midHash:{type:\"string\",id:6},content:{type:\"string\",id:7},ctime:{type:\"int64\",id:8},weight:{type:\"int32\",id:9},action:{type:\"string\",id:10},pool:{type:\"int32\",id:11},idStr:{type:\"string\",id:12},attr:{type:\"int32\",id:13}}},DanmuWebPlayerConfig:{fields:{dmSwitch:{type:\"bool\",id:1},aiSwitch:{type:\"bool\",id:2},aiLevel:{type:\"int32\",id:3},blocktop:{type:\"bool\",id:4},blockscroll:{type:\"bool\",id:5},blockbottom:{type:\"bool\",id:6},blockcolor:{type:\"bool\",id:7},blockspecial:{type:\"bool\",id:8},preventshade:{type:\"bool\",id:9},dmask:{type:\"bool\",id:10},opacity:{type:\"float\",id:11},dmarea:{type:\"int32\",id:12},speedplus:{type:\"float\",id:13},fontsize:{type:\"float\",id:14},screensync:{type:\"bool\",id:15},speedsync:{type:\"bool\",id:16},fontfamily:{type:\"string\",id:17},bold:{type:\"bool\",id:18},fontborder:{type:\"int32\",id:19},drawType:{type:\"string\",id:20}}}}},r=lodash.curry((async(t,e)=>{const i=new Uint8Array(\"arrayBuffer\"in Blob.prototype?await e.arrayBuffer():await new Response(e).arrayBuffer()),r=(await n.protobufLibrary).Root.fromJSON(o).lookupType(t),a=r.decode(i);return r.toObject(a)})),a=r(\"DmSegMobileReply\"),s=r(\"DmWebViewReply\")},570:function(t,e,i){\"use strict\";i.r(e),i.d(e,{JsonDanmaku:function(){return T},convertToAss:function(){return $},convertToAssFromJson:function(){return F},convertToXmlFromJson:function(){return D},getBlobByType:function(){return H},getUserDanmakuConfig:function(){return x}});var n=coreApis.utils.lazyPanel,o=i(414),r=coreApis.utils.sort,a=i(674),s=coreApis.componentApis.video.assUtils;function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class c{constructor(t){let{content:e,time:i,type:n,fontSize:o,color:r}=t;l(this,\"content\",void 0),l(this,\"time\",void 0),l(this,\"startTime\",void 0),l(this,\"type\",void 0),l(this,\"fontSize\",void 0),l(this,\"color\",void 0),this.content=e,this.time=i,this.startTime=parseFloat(i),this.type=parseInt(n),this.fontSize=parseFloat(o),this.color=parseInt(r)}}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class u extends c{constructor(t){let{content:e,time:i,type:n,fontSize:o,color:r,typeTag:a,colorTag:s,endTime:l}=t;super({content:e,time:i,type:n,fontSize:o,color:r}),d(this,\"typeTag\",void 0),d(this,\"colorTag\",void 0),d(this,\"endTime\",void 0),this.typeTag=a,this.colorTag=s,this.endTime=l}text(t){let e=t[this.fontSize];e||(e=t[25]);const i=e.match(/Style:(.*?),/)[1].trim();return`Dialogue: 0,${this.time},${this.endTime},${i},,0,0,0,,{${this.typeTag}${this.colorTag}}${this.content}`}}class p{constructor(t,e,i,n,o){d(this,\"danmakus\",void 0),d(this,\"title\",void 0),d(this,\"fontStyles\",void 0),d(this,\"blockTypes\",void 0),d(this,\"resolution\",void 0),this.danmakus=t,this.title=e,this.fontStyles=i,this.blockTypes=n,this.resolution=o}generateAss(){return`${`\\n[Script Info]\\n; Script generated by Bilibili Evolved Danmaku Converter\\n; https://github.com/the1812/Bilibili-Evolved/\\nTitle: ${this.title}\\nScriptType: v4.00+\\nPlayResX: ${this.resolution.x}\\nPlayResY: ${this.resolution.y}\\nTimer: 10.0000\\nWrapStyle: 2\\nScaledBorderAndShadow: no\\n\\n[V4+ Styles]\\nFormat: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\\n${Object.values(this.fontStyles).join(\"\\n\")}\\n\\n[Events]\\nFormat: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text\\n                `.trim()}\\n${this.danmakus.map((t=>t.text(this.fontStyles))).filter((t=>\"\"!==t)).join(\"\\n\")}`}}var h=coreApis.componentApis.video.xmlUtils;function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class f extends c{constructor(t){let{content:e,time:i,type:n,fontSize:o,color:r,timeStamp:a,pool:s,userHash:l,rowId:c}=t;super({content:e,time:i,type:n,fontSize:o,color:r}),m(this,\"timeStamp\",void 0),m(this,\"pool\",void 0),m(this,\"userHash\",void 0),m(this,\"rowId\",void 0),m(this,\"pDataArray\",void 0),this.timeStamp=parseInt(a),this.pool=parseInt(s),this.userHash=l,this.rowId=parseInt(c),this.pDataArray=[i,n,o,r,a,s,l,c]}text(){return`<d p=\"${this.pDataArray.join(\",\")}\">${(0,h.escapeContent)(this.content)}</d>`}static parse(t){const e=t.getAttribute(\"p\"),[i,n,o,r,a,s,l,c]=e.split(\",\"),d=t.innerHTML;return new f({content:d,time:i,type:n,fontSize:o,color:r,timeStamp:a,pool:s,userHash:l,rowId:c})}}class g{constructor(t){m(this,\"xml\",void 0),m(this,\"danmakus\",void 0),this.xml=t;const e=(new DOMParser).parseFromString(t,\"application/xml\").documentElement;this.danmakus=[...e.querySelectorAll(\"d[p]\")].map((t=>f.parse(t)))}}var y=coreApis.utils;let v;function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(t){t[t.Normal=1]=\"Normal\",t[t.Normal2=2]=\"Normal2\",t[t.Normal3=3]=\"Normal3\",t[t.Bottom=4]=\"Bottom\",t[t.Top=5]=\"Top\",t[t.Reversed=6]=\"Reversed\",t[t.Special=7]=\"Special\",t[t.Special2=8]=\"Special2\"}(v||(v={}));class k{constructor(t,e,i,n){b(this,\"horizontalStack\",void 0),b(this,\"horizontalTrack\",void 0),b(this,\"verticalStack\",void 0),b(this,\"verticalTrack\",void 0),b(this,\"resolution\",void 0),b(this,\"duration\",void 0),b(this,\"canvas\",void 0),b(this,\"context\",void 0),b(this,\"fontSizes\",void 0),b(this,\"bottomMarginPercent\",void 0),b(this,\"danmakuHeight\",void 0),b(this,\"trackHeight\",void 0),b(this,\"trackCount\",void 0),this.horizontalStack=[],this.horizontalTrack=[],this.verticalStack=[],this.verticalTrack=[],this.resolution=e,this.duration=i,this.canvas=document.createElement(\"canvas\"),this.context=this.canvas.getContext(\"2d\"),this.fontSizes={30:`64px ${t}`,25:`52px ${t}`,18:`36px ${t}`,45:`90px ${t}`},this.bottomMarginPercent=n,this.generateTracks()}generateTracks(){this.danmakuHeight=52,this.trackHeight=2*k.margin+52,this.trackCount=parseInt((0,y.fixed)(this.resolution.y*(1-this.bottomMarginPercent)/this.trackHeight,0))}getTextSize(t){this.context.font=this.fontSizes[t.fontSize];return[this.context.measureText(t.content).width/2,this.danmakuHeight/2]}getTags(t,e){let{targetTrack:i,initTrackNumber:n,nextTrackNumber:o,willOverlay:r,getTrackItem:a,getTag:s}=e;const[l,c]=this.getTextSize(t),d=2*l,u=this.duration(t)*d/(this.resolution.x+d)+k.nextDanmakuDelay;let p=n,h=null;const m=t=>r(t,p,d);do{h=i.find(m),p+=o}while(h&&p<=this.trackCount&&p>=0);return p>this.trackCount||p<0?\"\\\\pos(0,-999)\":(p-=o,i.push(a(p,d,u)),s({trackNumber:p,x:l,y:c}))}getHorizontalTags(t){return this.getTags(t,{targetTrack:this.horizontalTrack,initTrackNumber:0,nextTrackNumber:1,willOverlay:(e,i,n)=>e.trackNumber===i&&(e.width<n?this.duration(t)*this.resolution.x/(this.resolution.x+n)<=e.end-t.startTime:e.visible>t.startTime),getTrackItem:(e,i,n)=>({width:i,start:t.startTime,visible:t.startTime+n,end:t.startTime+this.duration(t),trackNumber:e}),getTag:e=>{let{trackNumber:i,x:n,y:o}=e;return`\\\\move(${this.resolution.x+n},${i*this.trackHeight+k.margin+o},${-n},${i*this.trackHeight+k.margin+o},0,${1e3*this.duration(t)})`}})}getVerticalTags(t){const e=\"top\"===k.danmakuType[t.type];return this.getTags(t,{targetTrack:this.verticalTrack,initTrackNumber:e?0:this.trackCount-1,nextTrackNumber:e?1:-1,willOverlay:(e,i)=>e.trackNumber===i&&e.end>t.startTime,getTrackItem:e=>({start:t.startTime,end:t.startTime+this.duration(t),trackNumber:e}),getTag:t=>{let{trackNumber:i,y:n}=t;return e?`\\\\pos(${this.resolution.x/2},${i*this.trackHeight+k.margin+n})`:`\\\\pos(${this.resolution.x/2},${this.resolution.y-k.margin-n-(this.trackCount-1-i)*this.trackHeight})`}})}push(t){let e=\"\",i=[];switch(k.danmakuType[t.type]){case\"normal\":case\"reversed\":e=this.getHorizontalTags(t),i=this.horizontalStack;break;case\"top\":case\"bottom\":e=this.getVerticalTags(t),i=this.verticalStack;break;default:return{tags:\"\\\\pos(0,-999)\"}}const n={tags:e};return i.push(n),n}}function w(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}b(k,\"danmakuType\",{[v.Normal]:\"normal\",[v.Normal2]:\"normal\",[v.Normal3]:\"normal\",[v.Bottom]:\"bottom\",[v.Top]:\"top\",[v.Reversed]:\"reversed\",[v.Special]:\"special\",[v.Special2]:\"special\"}),b(k,\"margin\",4),b(k,\"nextDanmakuDelay\",.05);class S{constructor(t){let{title:e,font:i,alpha:n,duration:o,blockTypes:r,blockFilter:a,resolution:s,bottomMarginPercent:l,bold:c}=t;w(this,\"title\",void 0),w(this,\"font\",void 0),w(this,\"alpha\",void 0),w(this,\"duration\",void 0),w(this,\"blockTypes\",void 0),w(this,\"blockFilter\",void 0),w(this,\"resolution\",void 0),w(this,\"bold\",void 0),w(this,\"danmakuStack\",void 0),this.title=e,this.font=i,this.alpha=Math.round(255*n).toString(16).toUpperCase().padStart(2,\"0\"),this.duration=o,this.blockTypes=r,this.blockFilter=a||(()=>!0),this.resolution=s,this.bold=c,this.danmakuStack=new k(i,s,o,l)}get fontStyles(){return{36:`Style: Larger,${this.font},72,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,30:`Style: Large,${this.font},64,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,25:`Style: Medium,${this.font},52,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,18:`Style: Small,${this.font},36,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,45:`Style: ExtraLarge,${this.font},90,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`}}xmlDanmakuToAssDocument(t){const e=[];for(const i of t){const t=-1!==this.blockTypes.indexOf(i.type),n=-1!==this.blockTypes.indexOf(\"color\")&&i.color!==S.white;if(t||n)continue;if(!this.blockFilter(i))continue;const[o,r]=(0,s.convertTimeByDuration)(i.startTime,this.duration(i));e.push(new u({content:(0,s.normalizeContent)(i.content),time:o,endTime:r,type:i.type.valueOf().toString(),fontSize:i.fontSize.toString(),color:i.color.toString(),typeTag:this.convertType(i),colorTag:(0,s.convertHexColorForDialogue)(i.color.toString(16))}))}return new p(e,this.title,this.fontStyles,this.blockTypes,this.resolution)}xmlStringToAssDocument(t){const e=new g(t);return this.xmlDanmakuToAssDocument(e.danmakus.sort((0,r.ascendingSort)((t=>t.startTime))))}convertType(t){return this.danmakuStack.push(t).tags}}w(S,\"white\",16777215);class T{constructor(t,e){var i,n,o;this.aid=t,this.cid=e,o=[],(n=\"jsonDanmakus\")in(i=this)?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o}get xmlDanmakus(){return this.jsonDanmakus.map((t=>{var e,i,n,o,r;return{content:t.content,time:t.progress?(t.progress/1e3).toString():\"0\",type:(null===(e=t.mode)||void 0===e?void 0:e.toString())??\"1\",fontSize:(null===(i=t.fontsize)||void 0===i?void 0:i.toString())??\"25\",color:(null===(n=t.color)||void 0===n?void 0:n.toString())??\"16777215\",timeStamp:(null===(o=t.ctime)||void 0===o?void 0:o.toString())??\"0\",pool:(null===(r=t.pool)||void 0===r?void 0:r.toString())??\"0\",userHash:t.midHash??\"0\",rowId:t.idStr??\"0\"}}))}async fetchInfo(){const{decodeDanmakuSegment:t,decodeDanmakuView:e}=await Promise.resolve().then(i.bind(i,701)),n=async t=>(await fetch(t)).blob(),a=await n(`https://api.bilibili.com/x/v2/dm/web/view?type=1&oid=${this.cid}&pid=${this.aid}`);if(!a)throw new Error(\"获取弹幕信息失败\");const s=await e(a),{total:l}=s.dmSge;if(void 0===l)throw new Error(`获取弹幕分页数失败: ${JSON.stringify(lodash.omit(s,\"flag\"))}`);console.log(\"segment count =\",l);const c=await Promise.all(new Array(l).fill(0).map((async(e,i)=>{const r=await n(`https://api.bilibili.com/x/v2/dm/web/seg.so?type=1&oid=${this.cid}&pid=${this.aid}&segment_index=${i+1}`);if(!r)return(0,o.logError)(new Error(`弹幕片段${i+1}下载失败`)),[];console.log(`received blob for segment ${i+1}`,r);return(await t(r)).elems??[]})));return this.jsonDanmakus=c.flat().sort((0,r.ascendingSort)((t=>t.progress))),this}}const x=async()=>{const t=(0,a.getFriendlyTitle)(),e={font:\"微软雅黑\",alpha:.4,duration:t=>{switch(t.type){case 4:case 5:return 4;default:return 6}},blockTypes:[7,8],resolution:{x:1920,y:1080},bottomMarginPercent:.15,bold:!1};let i={...e,title:t};try{await(0,n.loadDanmakuSettingsPanel)();const t=localStorage.getItem(\"bilibili_player_settings\");if(t){const e=JSON.parse(t),n=(t,i)=>lodash.get(e,`setting_config.${t}`,i);i.blockTypes=(()=>{const t=[],i={scroll:[1,2,3],top:[5],bottom:[4],color:[\"color\"]};for(const[n,o]of Object.entries(i))!1===lodash.get(e,`block.type_${n}`,!0)&&t.push(...o);return t.concat(7,8)})(),i.bold=n(\"bold\",!1),i.alpha=lodash.clamp(1-parseFloat(n(\"opacity\",\"0.4\")),0,1);const o=1.4-.4*n(\"fontsize\",1);i.resolution={x:Math.round(1920*o),y:Math.round(1080*o)},i.duration=(()=>{const t=18-3*n(\"speedplus\",0);return e=>{switch(e.type){case 4:case 5:return 4;default:return t}}})();const r=n(\"danmakuArea\",0);i.bottomMarginPercent=r>=100?0:r/100,0===i.bottomMarginPercent&&n(\"preventshade\",!1)&&(i.bottomMarginPercent=.15);const a=lodash.get(e,\"block.list\",[]);i.blockFilter=t=>{for(const e of a)if(e.s)switch(e.t){default:return!0;case\"keyword\":if(t.content.includes(e.v))return!1;break;case\"regexp\":if(new RegExp(e.v).test(t.content))return!1;break;case\"user\":if(t.userHash===e.v)return!1}return!0}}else console.warn(\"[弹幕转换] 未找到播放器设置\"),i={...i,...e};i.font=dq(\".bilibili-player-video-danmaku-setting-right-font .bui-select-result\").innerText}catch(t){(0,o.logError)(t),i={...i,...e}}for(const[t,n]of Object.entries(i))null==n&&(console.warn(\"danmaku config invalid for key\",t,\", value =\",n),i[t]=e[n]);return console.log(i),i},$=async t=>new S(await x()).xmlStringToAssDocument(t).generateAss(),F=async t=>new S(await x()).xmlDanmakuToAssDocument(t.xmlDanmakus.map((t=>new f(t)))).generateAss(),D=t=>`\\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><i><chatserver>chat.bilibili.com</chatserver><chatid>${t.cid}</chatid><mission>0</mission><maxlimit>${t.xmlDanmakus.length}</maxlimit><state>0</state><real_name>0</real_name><source>k-v</source>\\n${t.xmlDanmakus.map((t=>new f(t).text())).join(\"\\n\")}\\n</i>\\n  `.trim(),H=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:unsafeWindow;const{aid:i,cid:n}=e,o=await new T(i,n).fetchInfo();switch(t){case\"xml\":return new Blob([D(o)],{type:\"text/xml\"});default:case\"json\":return new Blob([JSON.stringify(o.jsonDanmakus)],{type:\"text/json\"});case\"ass\":return new Blob([await F(o)],{type:\"text/ass\"})}}},29:function(t,e,i){var n=i(645)((function(t){return t[1]}));n.push([t.id,\".download-danmaku-config.download-video-config-section .be-dropdown {\\n  text-transform: uppercase;\\n}\",\"\"]),t.exports=n},645:function(t){\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(i,\"}\"):i})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(t,i,n){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var o={};if(n)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&o[l[0]]||(i&&(l[2]?l[2]=\"\".concat(i,\" and \").concat(l[2]):l[2]=i),e.push(l))}},e}},379:function(t,e,i){\"use strict\";var n,o=function(){return void 0===n&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\nn=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),a=[];function s(t){for(var e=-1,i=0;i<a.length;i++)if(a[i].identifier===t){e=i;break}return e}function l(t,e){for(var i={},n=[],o=0;o<t.length;o++){var r=t[o],l=e.base?r[0]+e.base:r[0],c=i[l]||0,d=\"\".concat(l,\" \").concat(c);i[l]=c+1;var u=s(d),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:d,updater:g(p,e),references:1}),n.push(d)}return n}function c(t){var e=document.createElement(\"style\"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),\"function\"==typeof t.insert)t.insert(e);else{var a=r(t.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join(\"\\n\")});function p(t,e,i,n){var o=i?\"\":n.media?\"@media \".concat(n.media,\" {\").concat(n.css,\"}\"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function h(t,e,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?t.setAttribute(\"media\",o):t.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var m=null,f=0;function g(t,e){var i,n,o;if(e.singleton){var r=f++;i=m||(m=c(e)),n=p.bind(null,i,r,!1),o=p.bind(null,i,r,!0)}else i=c(e),n=h.bind(null,i,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||\"boolean\"==typeof e.singleton||(e.singleton=o());var i=l(t=t||[],e);return function(t){if(t=t||[],\"[object Array]\"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=s(i[n]);a[o].references--}for(var r=l(t,e),c=0;c<i.length;c++){var d=s(i[c]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}i=r}}}},627:function(t,e,i){\"use strict\";i.r(e),i.d(e,{default:function(){return p}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"multiple-widgets\"},[i(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载弹幕 (XML)\",icon:\"danmaku\"},on:{click:function(e){return t.download(\"xml\")}}}),t._v(\" \"),i(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载弹幕 (JSON)\",icon:\"danmaku\"},on:{click:function(e){return t.download(\"json\")}}}),t._v(\" \"),i(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载弹幕 (ASS)\",icon:\"danmaku\"},on:{click:function(e){return t.download(\"ass\")}}})],1)};n._withStripped=!0;var o=coreApis.download,r=i(414),a=i(674),s=coreApis.pluginApis.data,l=i(648),c=i(570);(0,s.addData)(\"ui.icons\",(t=>{t.danmaku='<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\"  viewBox=\"0 0 24 24\"><path d=\"M20,4H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h4h5.9H20c1.1,0,2-0.9,2-2V6C22,4.9,21.1,4,20,4z M5,7h8v2H5V7z M7,17H5v-2h2V17z M6.3,13v-2H18v2H6.3z M19,17H9v-2h10V17z M19,9h-4.1V7H19V9z\"/></svg>'}));var d=Vue.extend({components:{DefaultWidget:l.DefaultWidget},data:()=>({disabled:!1}),methods:{async download(t){try{this.disabled=!0;const e=(0,a.getFriendlyTitle)(),i=await(0,c.getBlobByType)(t);await o.DownloadPackage.single(`${e}.${t}`,i)}catch(t){(0,r.logError)(t)}finally{this.disabled=!1}}}}),u=(0,i(900).Z)(d,n,[],!1,null,null,null);u.options.__file=\"registry/lib/components/video/danmaku/download/DownloadDanmaku.vue\";var p=u.exports},290:function(t,e,i){\"use strict\";i.r(e),i.d(e,{default:function(){return m}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"download-danmaku-config download-video-config-section\"},[i(\"div\",{staticClass:\"download-video-config-item\"},[i(\"div\",{staticClass:\"download-video-config-title\"},[t._v(\"\\n      弹幕:\\n    \")]),t._v(\" \"),i(\"VDropdown\",{attrs:{items:t.items},scopedSlots:t._u([{key:\"item\",fn:function(e){var i=e.item;return[t._v(\"\\n        \"+t._s(i)+\"\\n      \")]}}]),model:{value:t.type,callback:function(e){t.type=e},expression:\"type\"}})],1)])};n._withStripped=!0;var o=coreApis.settings,r=i(648);const a=(0,o.getComponentSettings)(\"downloadVideo\").options;var s=Vue.extend({components:{VDropdown:r.VDropdown},data:()=>({type:a.danmakuType??\"无\",items:[\"无\",\"ass\",\"json\",\"xml\"]}),computed:{enabled(){return\"无\"!==this.type}},watch:{type(t){a.danmakuType=t}}}),l=i(379),c=i.n(l),d=i(29),u=i.n(d),p={insert:\"head\",singleton:!1},h=(c()(u(),p),u().locals,(0,i(900).Z)(s,n,[],!1,null,null,null));h.options.__file=\"registry/lib/components/video/danmaku/download/Plugin.vue\";var m=h.exports},900:function(t,e,i){\"use strict\";function n(t,e,i,n,o,r,a,s){var l,c=\"function\"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId=\"data-v-\"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}i.d(e,{Z:function(){return n}})},648:function(t){\"use strict\";t.exports=coreApis.ui},414:function(t){\"use strict\";t.exports=coreApis.utils.log},674:function(t){\"use strict\";t.exports=coreApis.utils.title}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={id:n,exports:{}};return t[n](r,r.exports,i),r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var n={};return function(){\"use strict\";i.d(n,{component:function(){return r}});var t=coreApis.spinQuery,e=coreApis.toast,o=coreApis.utils.urls;const r={name:\"downloadDanmaku\",displayName:\"下载弹幕\",description:{\"zh-CN\":\"启用下载弹幕支持, 在视频和番剧页面中可从功能面板里下载弹幕. 请注意 ASS 弹幕下载不会包含高级弹幕, 字幕弹幕等.\"},tags:[componentsTags.video],entry:none,reload:none,unload:none,plugin:{displayName:\"下载视频 - 下载弹幕支持\",setup:t=>{let{addData:n}=t;n(\"downloadVideo.assets\",(async t=>{const{getBlobByType:n}=await Promise.resolve().then(i.bind(i,570));t.push({name:\"downloadDanmaku\",displayName:\"下载弹幕\",getAssets:async(t,i)=>{const{type:o,enabled:r}=i;if(!r)return[];const a=e.Toast.info(\"获取弹幕中...\",\"下载弹幕\");let s=0;const l=await Promise.allSettled(t.map((async e=>{const i=await n(o,e.input);return s++,a.message=`获取弹幕中... (${s}/${t.length})`,{name:`${e.input.title}.${o}`,data:i}}))),c=l.filter((t=>\"fulfilled\"===t.status)),d=l.filter((t=>\"rejected\"===t.status));return a.message=`获取完成. 成功 ${c.length} 个, 失败 ${d.length} 个.`,c.map((t=>t.value))},component:()=>Promise.resolve().then(i.bind(i,290)).then((t=>t.default))})}))}},urlInclude:o.videoAndBangumiUrls,widget:{condition:t.hasVideo,component:()=>Promise.resolve().then(i.bind(i,627)).then((t=>t.default))},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"}}(),n=n.component}()}));",
      "metadata": {
        "name": "downloadDanmaku",
        "displayName": "下载弹幕",
        "description": {
          "zh-CN": "启用下载弹幕支持, 在视频和番剧页面中可从功能面板里下载弹幕. 请注意 ASS 弹幕下载不会包含高级弹幕, 字幕弹幕等."
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "downloadLiveRecords": {
      "code": "!function(e,o){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=o():\"function\"==typeof define&&define.amd?define([],o):\"object\"==typeof exports?exports[\"live/download-records\"]=o():e[\"live/download-records\"]=o()}(self,(function(){return function(){\"use strict\";var e={65:function(e,o,t){t.r(o),t.d(o,{default:function(){return l}});var n=function(){var e=this,o=e.$createElement;return(e._self._c||o)(\"DefaultWidget\",{staticClass:\"download-live-records\",attrs:{disabled:e.disabled,name:\"下载录像\",icon:\"mdi-download\"},on:{click:function(o){return e.download()}}})};n._withStripped=!0;var r=coreApis.ui,i=coreApis.ajax,d=coreApis.toast,s=coreApis.utils.log;var a=function(e,o,t,n,r,i,d,s){var a,l=\"function\"==typeof e?e.options:e;if(o&&(l.render=o,l.staticRenderFns=t,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=\"data-v-\"+i),d?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(d)},l._ssrRegister=a):r&&(a=s?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),a)if(l.functional){l._injectStyles=a;var c=l.render;l.render=function(e,o){return a.call(o),c(e,o)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,a):[a]}return{exports:e,options:l}}(Vue.extend({components:{DefaultWidget:r.DefaultWidget},data:()=>({disabled:!1}),methods:{async download(){try{this.disabled=!0;const e=document.URL.replace(window.location.search,\"\").match(/^https:\\/\\/live\\.bilibili\\.com\\/record\\/(.+)/);if(!e)return void(0,s.logError)(new Error(`获取录像ID失败: ${document.URL}`));const o=e[1],t=await(0,i.getJson)(`https://api.live.bilibili.com/xlive/web-room/v1/record/getLiveRecordUrl?rid=${o}&platform=html5`);if(0!==t.code)return void(0,s.logError)(new Error(`获取录像链接失败: ${t.message}`));const n=t.data.list.map((e=>e.url));d.Toast.success(n.map((e=>`<a class=\"download-link\" target=\"_blank\" href=\"${e}\">${e}</a>`)).join(\"\\n\"),\"下载录像\")}finally{this.disabled=!1}}}}),n,[],!1,null,null,null);a.options.__file=\"registry/lib/components/live/download-records/DownloadRecords.vue\";var l=a.exports}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var n={};return function(){t.d(n,{component:function(){return e}});const e=(0,coreApis.componentApis.define.defineComponentMetadata)({name:\"downloadLiveRecords\",displayName:\"直播录像下载\",description:{\"zh-CN\":\"在直播录像页面 `live.bilibili.com/record/` 中添加下载支持.\"},tags:[componentsTags.live],entry:none,widget:{component:()=>Promise.resolve().then(t.bind(t,65)).then((e=>e.default))},urlInclude:[/^https:\\/\\/live\\.bilibili\\.com\\/record\\/(.+)/],commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"})}(),n=n.component}()}));",
      "metadata": {
        "name": "downloadLiveRecords",
        "displayName": "直播录像下载",
        "description": {
          "zh-CN": "在直播录像页面 `live.bilibili.com/record/` 中添加下载支持."
        },
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          }
        ],
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "downloadSubtitle": {
      "code": "!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"video/subtitle/download\"]=e():t[\"video/subtitle/download\"]=e()}(self,(function(){return function(){var t,e,n={550:function(t,e,n){\"use strict\";n.d(e,{mE:function(){return c}});var o=coreApis.ajax,i=n(391),r=n(674);const a=async()=>{const{SubtitleConverter:t,SubtitleSize:e,SubtitleLocation:o}=await Promise.resolve().then(n.bind(n,941)),{playerAgent:i}=await Promise.resolve().then(n.t.bind(n,833,23)),a=localStorage.getItem(\"bilibili_player_settings\");if(!a)return[t.defaultConfig,\"\"];const s=JSON.parse(a).subtitle,c=s.lan,l=(0,r.getFriendlyTitle)(!0),u={.6:e.VerySmall,.8:e.Small,1:e.Medium,1.3:e.Large,1.6:e.VeryLarge}[s.fontsize],d=s.color.toString(16),f=s.backgroundopacity,p={bc:o.BottomCenter,bl:o.BottomLeft,br:o.BottomRight,tc:o.TopCenter,tl:o.TopLeft,tr:o.TopRight}[s.position],g=i.query.video.element.sync();return[{title:l,height:g.videoHeight,width:g.videoWidth,color:d,location:p,opacity:f,size:u,boxPadding:1,boxMargin:32},c]},s=async(t,e)=>{const{VideoInfo:o}=await Promise.resolve().then(n.t.bind(n,77,23)),i=new o(t);return i.cid=\"string\"==typeof e?parseInt(e):e,await i.fetchInfo(),i.subtitles},c=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{...lodash.pick(unsafeWindow,\"aid\",\"cid\"),title:(0,r.getFriendlyTitle)(!0)};const{aid:c,cid:l}=e;if(!c||!l)throw new Error(\"未找到视频AID和CID\");const u=await s(c,l);if(0===u.length)return i.Toast.info(\"当前视频没有字幕.\",\"下载字幕\",3e3),null;const[d,f]=await a(),p=u.find((t=>t.language===f))||u[0],g=await(0,o.getJson)(p.url),v=g.body;if(\"ass\"===t){const{SubtitleConverter:t}=await Promise.resolve().then(n.bind(n,941)),o=new t({...d,title:e.title}),i=await o.convertToAss(v);return new Blob([i],{type:\"text/ass\"})}return new Blob([JSON.stringify(v)],{type:\"text/json\"})}},941:function(t,e,n){\"use strict\";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e),n.d(e,{SubtitleConverter:function(){return a},SubtitleLocation:function(){return i},SubtitleSize:function(){return r}});const i={TopLeft:7,TopCenter:8,TopRight:9,BottomLeft:1,BottomCenter:2,BottomRight:3};let r;!function(t){t[t.VerySmall=1]=\"VerySmall\",t[t.Small=2]=\"Small\",t[t.Medium=3]=\"Medium\",t[t.Large=4]=\"Large\",t[t.VeryLarge=5]=\"VeryLarge\"}(r||(r={}));class a{constructor(t){o(this,\"config\",void 0),this.config=Object.assign(a.defaultConfig,t)}async getAssMeta(){const{convertHexColorForStyle:t}=await Promise.resolve().then(n.t.bind(n,726,23)),e=t(this.config.color),o=t(\"#000000\",this.config.opacity),r=[],a=(10*(this.config.size-3)+48)*this.config.height/720;console.log(a);for(const[t,n]of Object.entries(i))r.push(`Style: ${t},微软雅黑,${a},${e},${e},${o},${o},0,0,0,0,100,100,0,0,3,${this.config.boxPadding},0,${n},${this.config.boxMargin},${this.config.boxMargin},${this.config.boxMargin},0`);return`\\n[Script Info]\\n; Script generated by Bilibili Evolved Danmaku Converter\\n; https://github.com/the1812/Bilibili-Evolved/\\nTitle: ${this.config.title}\\nScriptType: v4.00+\\nPlayResX: ${this.config.width}\\nPlayResY: ${this.config.height}\\nTimer: 10.0000\\nWrapStyle: 0\\nScaledBorderAndShadow: no\\n\\n[V4+ Styles]\\nFormat: Name, Fontname, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\\n${r.join(\"\\n\")}\\n\\n[Events]\\nFormat: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text`.trim()}async convertToAss(t){const{convertTimeByEndTime:e,normalizeContent:o}=await Promise.resolve().then(n.t.bind(n,726,23));return`${await this.getAssMeta()}\\n${t.map((t=>{const[n,r]=e(t.from,t.to);var a;return`Dialogue: 0,${n},${r},${a=this.config.location,Object.entries(i).filter((t=>{let[,e]=t;return e===a})).map((t=>{let[e]=t;return e})).shift()},,0,0,0,,${o(t.content)}`})).join(\"\\n\")}`}}o(a,\"defaultConfig\",void 0),a.defaultConfig={title:\"\",color:\"#ffffff\",width:1920,height:1080,size:r.Medium,opacity:.5,location:i.BottomCenter,boxPadding:1,boxMargin:32}},427:function(t,e,n){var o=n(645)((function(t){return t[1]}));o.push([t.id,\".download-subtitle-config.download-video-config-section .be-dropdown {\\n  text-transform: uppercase;\\n}\",\"\"]),t.exports=o},645:function(t){\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(t,n,o){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var i={};if(o)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[r][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);o&&i[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),e.push(c))}},e}},379:function(t,e,n){\"use strict\";var o,i=function(){return void 0===o&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\no=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function s(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},o=[],i=0;i<t.length;i++){var r=t[i],c=e.base?r[0]+e.base:r[0],l=n[c]||0,u=\"\".concat(c,\" \").concat(l);n[c]=l+1;var d=s(u),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(a[d].references++,a[d].updater(f)):a.push({identifier:u,updater:m(f,e),references:1}),o.push(u)}return o}function l(t){var e=document.createElement(\"style\"),o=t.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),\"function\"==typeof t.insert)t.insert(e);else{var a=r(t.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join(\"\\n\")});function f(t,e,n,o){var i=n?\"\":o.media?\"@media \".concat(o.media,\" {\").concat(o.css,\"}\"):o.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function p(t,e,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?t.setAttribute(\"media\",i):t.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var g=null,v=0;function m(t,e){var n,o,i;if(e.singleton){var r=v++;n=g||(g=l(e)),o=f.bind(null,n,r,!1),i=f.bind(null,n,r,!0)}else n=l(e),o=p.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||\"boolean\"==typeof e.singleton||(e.singleton=i());var n=c(t=t||[],e);return function(t){if(t=t||[],\"[object Array]\"===Object.prototype.toString.call(t)){for(var o=0;o<n.length;o++){var i=s(n[o]);a[i].references--}for(var r=c(t,e),l=0;l<n.length;l++){var u=s(n[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=r}}}},202:function(t,e,n){\"use strict\";n.r(e),n.d(e,{default:function(){return f}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"multiple-widgets\"},[n(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载字幕 (JSON)\",icon:\"subtitle\"},on:{click:function(e){return t.download(\"json\")}}}),t._v(\" \"),n(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载字幕 (ASS)\",icon:\"subtitle\"},on:{click:function(e){return t.download(\"ass\")}}})],1)};o._withStripped=!0;var i=coreApis.pluginApis.data,r=n(648),a=coreApis.utils.log,s=n(674),c=coreApis.download,l=n(550);(0,i.addData)(\"ui.icons\",(t=>{t.subtitle='<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 22\"><path d=\"M4 4h14a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2zm5 5.5a1 1 0 100-2H6a2 2 0 00-2 2v3a2 2 0 002 2h3a1 1 0 000-2H7a1 1 0 01-1-1v-1a1 1 0 011-1h2zm8 0a1 1 0 000-2h-3a2 2 0 00-2 2v3a2 2 0 002 2h3a1 1 0 000-2h-2a1 1 0 01-1-1v-1a1 1 0 011-1h2z\" fill-rule=\"evenodd\"/></svg>'}));var u=Vue.extend({components:{DefaultWidget:r.DefaultWidget},data:()=>({disabled:!1}),methods:{async download(t){try{this.disabled=!0;const e=await(0,l.mE)(t);c.DownloadPackage.single(`${(0,s.getFriendlyTitle)(!0)}.${t}`,e)}catch(t){(0,a.logError)(t)}finally{this.disabled=!1}}}}),d=(0,n(900).Z)(u,o,[],!1,null,null,null);d.options.__file=\"registry/lib/components/video/subtitle/download/DownloadSubtitle.vue\";var f=d.exports},175:function(t,e,n){\"use strict\";n.r(e),n.d(e,{default:function(){return g}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"download-subtitle-config download-video-config-section\"},[n(\"div\",{staticClass:\"download-video-config-item\"},[n(\"div\",{staticClass:\"download-video-config-title\"},[t._v(\"\\n      字幕:\\n    \")]),t._v(\" \"),n(\"VDropdown\",{attrs:{items:t.items},scopedSlots:t._u([{key:\"item\",fn:function(e){var n=e.item;return[t._v(\"\\n        \"+t._s(n)+\"\\n      \")]}}]),model:{value:t.type,callback:function(e){t.type=e},expression:\"type\"}})],1)])};o._withStripped=!0;var i=coreApis.settings,r=n(648);const a=(0,i.getComponentSettings)(\"downloadVideo\").options;var s=Vue.extend({components:{VDropdown:r.VDropdown},data:()=>({type:a.subtitleType??\"无\",items:[\"无\",\"ass\",\"json\"]}),computed:{enabled(){return\"无\"!==this.type}},watch:{type(t){a.subtitleType=t}}}),c=n(379),l=n.n(c),u=n(427),d=n.n(u),f={insert:\"head\",singleton:!1},p=(l()(d(),f),d().locals,(0,n(900).Z)(s,o,[],!1,null,null,null));p.options.__file=\"registry/lib/components/video/subtitle/download/Plugin.vue\";var g=p.exports},900:function(t,e,n){\"use strict\";function o(t,e,n,o,i,r,a,s){var c,l=\"function\"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),o&&(l.functional=!0),r&&(l._scopeId=\"data-v-\"+r),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}n.d(e,{Z:function(){return o}})},726:function(t){\"use strict\";t.exports=coreApis.componentApis.video.assUtils},833:function(t){\"use strict\";t.exports=coreApis.componentApis.video.playerAgent},77:function(t){\"use strict\";t.exports=coreApis.componentApis.video.videoInfo},391:function(t){\"use strict\";t.exports=coreApis.toast},648:function(t){\"use strict\";t.exports=coreApis.ui},674:function(t){\"use strict\";t.exports=coreApis.utils.title}},o={};function i(t){var e=o[t];if(void 0!==e)return e.exports;var r=o[t]={id:t,exports:{}};return n[t](r,r.exports,i),r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},i.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if(\"object\"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&\"function\"==typeof n.then)return n}var r=Object.create(null);i.r(r);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&o&&n;\"object\"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){a[t]=function(){return n[t]}}));return a.default=function(){return n},i.d(r,a),r},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var r={};return function(){\"use strict\";i.d(r,{component:function(){return a}});var t=coreApis.spinQuery,e=i(391),n=coreApis.utils.urls,o=i(550);const a={name:\"downloadSubtitle\",displayName:\"下载字幕\",description:{\"zh-CN\":\"启用下载字幕支持, 在视频页面中可从功能面板里下载字幕.\"},tags:[componentsTags.video],entry:none,urlInclude:n.videoUrls,widget:{condition:t.hasVideo,component:()=>Promise.resolve().then(i.bind(i,202)).then((t=>t.default))},plugin:{displayName:\"下载视频 - 下载字幕支持\",setup:t=>{let{addData:n}=t;n(\"downloadVideo.assets\",(async t=>{t.push({name:\"downloadSubtitles\",displayName:\"下载字幕\",getAssets:async(t,n)=>{const{type:i,enabled:r}=n;if(!r)return[];const a=e.Toast.info(\"获取字幕中...\",\"下载字幕\");let s=0;const c=await Promise.allSettled(t.map((async e=>{const n=await(0,o.mE)(i,e.input);return s++,a.message=`获取字幕中... (${s}/${t.length})`,{name:`${e.input.title}.${i}`,data:n}}))),l=c.filter((t=>\"fulfilled\"===t.status)),u=c.filter((t=>\"rejected\"===t.status));return a.message=`获取完成. 成功 ${l.length} 个, 失败 ${u.length} 个.`,l.map((t=>t.value))},component:()=>Promise.resolve().then(i.bind(i,175)).then((t=>t.default))})}))}},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"}}(),r=r.component}()}));",
      "metadata": {
        "name": "downloadSubtitle",
        "displayName": "下载字幕",
        "description": {
          "zh-CN": "启用下载字幕支持, 在视频页面中可从功能面板里下载字幕."
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "downloadAudio": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/download-audio\"]=t():e[\"utils/download-audio\"]=t()}(self,(function(){return function(){\"use strict\";var e,t,o={395:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"DefaultWidget\",{attrs:{disabled:e.disabled||e.downloading,name:e.progress||\"下载音频\",icon:\"mdi-download\"},on:{click:function(t){return e.download()}}})};n._withStripped=!0;var r=coreApis.spinQuery,i=coreApis.observer,s=coreApis.download,d=coreApis.ui;function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class l{constructor(){a(this,\"progress\",null),a(this,\"sid\",void 0)}async getDownloadUrl(){const{getJsonWithCredentials:e}=await Promise.resolve().then(o.t.bind(o,375,23)),{Toast:t}=await Promise.resolve().then(o.t.bind(o,391,23)),n=`https://www.bilibili.com/audio/music-service-c/web/url?sid=${this.sid}&privilege=2&quality=2`,r=await e(n);return 0!==r.code?(t.error(\"获取下载链接失败, 请确保当前账号有下载权限.\",\"下载音频\",1e4),null):r.data.cdns.shift()}async download(){const e=await this.getDownloadUrl();return new Promise(((t,o)=>{const n=new XMLHttpRequest;n.open(\"GET\",e),n.responseType=\"blob\",n.addEventListener(\"load\",(()=>t(n.response))),n.addEventListener(\"error\",(()=>o(n.status))),n.addEventListener(\"progress\",(e=>{var t;return null===(t=this.progress)||void 0===t?void 0:t.call(this,100*e.loaded/e.total)})),n.send()}))}}var u=function(e,t,o,n,r,i,s,d){var a,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=o,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=\"data-v-\"+i),s?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=a):r&&(a=d?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),a)if(l.functional){l._injectStyles=a;var u=l.render;l.render=function(e,t){return a.call(t),u(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,a):[a]}return{exports:e,options:l}}(Vue.extend({components:{DefaultWidget:d.DefaultWidget},data:()=>({progress:\"\",disabled:!0,downloader:new l,downloading:!1}),async mounted(){const e=await(0,r.select)(\"#app\"),t=this.downloader;t.progress=e=>{this.progress=`${Math.round(e)}%`},(0,i.childList)(e,(()=>{const e=document.URL.match(/bilibili\\.com\\/audio\\/au([\\d]+)/);e&&e[1]?(this.disabled=!1,[,t.sid]=e):this.disabled=!0}))},methods:{async download(){if(!this.downloading){this.downloading=!0;try{const e=this.downloader;if(null===e.sid)return;const t=await e.download(),o=`${(()=>{const e=document.querySelector(\".song-title\");return e?e.getAttribute(\"title\"):\"神秘音频\"})()}.mp3`;this.progress=\"\",await s.DownloadPackage.single(o,t)}finally{this.downloading=!1}}}}}),n,[],!1,null,null,null);u.options.__file=\"registry/lib/components/utils/download-audio/DownloadAudio.vue\";var c=u.exports},375:function(e){e.exports=coreApis.ajax},391:function(e){e.exports=coreApis.toast}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return o[e](i,i.exports,r),i.exports}t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if(\"object\"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&\"function\"==typeof o.then)return o}var i=Object.create(null);r.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var d=2&n&&o;\"object\"==typeof d&&!~e.indexOf(d);d=t(d))Object.getOwnPropertyNames(d).forEach((function(e){s[e]=function(){return o[e]}}));return s.default=function(){return o},r.d(i,s),i},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return function(){r.d(i,{component:function(){return e}});const e={name:\"downloadAudio\",displayName:\"下载音频\",entry:none,tags:[componentsTags.utils],description:{\"zh-CN\":\"\\n开启音频下载支持, 音频页面中可以在功能面板中下载当前音频.\\n\\n> 需要进入音频的详细信息页面才能下载, 在其他页面中此按钮将不可点击.\\n    \".trim()},widget:{component:()=>Promise.resolve().then(r.bind(r,395)).then((e=>e.default))},urlInclude:[\"//www.bilibili.com/audio/\"],commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"}}(),i=i.component}()}));",
      "metadata": {
        "name": "downloadAudio",
        "displayName": "下载音频",
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "description": {
          "zh-CN": "开启音频下载支持, 音频页面中可以在功能面板中下载当前音频.\n\n> 需要进入音频的详细信息页面才能下载, 在其他页面中此按钮将不可点击."
        },
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "alwaysShowDuration": {
      "code": "!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"style/always-show-duration\"]=e():t[\"style/always-show-duration\"]=e()}(self,(function(){return function(){var t,e,n={524:function(t,e,n){var o=n(645)((function(t){return t[1]}));o.push([t.id,\".watchlater-card .duration,\\n.time-group-item .duration,\\n.favorite-card .duration,\\n.video-card .duration {\\n  opacity: 1 !important;\\n}\",\"\"]),t.exports=o},645:function(t){\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(t,n,o){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var r={};if(o)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar u=this[i][0];null!=u&&(r[u]=!0)}for(var c=0;c<t.length;c++){var a=[].concat(t[c]);o&&r[a[0]]||(n&&(a[2]?a[2]=\"\".concat(n,\" and \").concat(a[2]):a[2]=n),e.push(a))}},e}},151:function(t,e,n){var o=n(524);o&&o.__esModule&&(o=o.default),t.exports=\"string\"==typeof o?o:o.toString()}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={id:t,exports:{}};return n[t](i,i.exports,r),i.exports}e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if(\"object\"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&\"function\"==typeof n.then)return n}var i=Object.create(null);r.r(i);var u={};t=t||[null,e({}),e([]),e(e)];for(var c=2&o&&n;\"object\"==typeof c&&!~t.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach((function(t){u[t]=function(){return n[t]}}));return u.default=function(){return n},r.d(i,u),i},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var i={};return function(){\"use strict\";r.d(i,{component:function(){return e}});var t=coreApis.componentApis.styledComponent;const e=(0,coreApis.componentApis.define.defineComponentMetadata)({...(0,t.toggleStyle)(\"alwaysShowDuration\",(()=>Promise.resolve().then(r.t.bind(r,151,23)))),displayName:\"总是显示视频时长\",description:{\"zh-CN\":\"使脚本展示的各种视频卡片中的时长无需鼠标经过也能一直显示.\"},tags:[componentsTags.video,componentsTags.style],commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"})}(),i=i.component}()}));",
      "metadata": {
        "name": "alwaysShowDuration",
        "displayName": "总是显示视频时长",
        "description": {
          "zh-CN": "使脚本展示的各种视频卡片中的时长无需鼠标经过也能一直显示."
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "simplifyLiveroom": {
      "code": "!function(i,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"style/simplify/live\"]=e():i[\"style/simplify/live\"]=e()}(self,(function(){return function(){var i,e,t={506:function(i,e,t){\"use strict\";t.r(e),t.d(e,{setupSkinSimplify:function(){return r}});var n=coreApis.settings,o=coreApis.spinQuery;const r=async()=>{(0,n.addComponentListener)(\"simplifyLiveroom.switch-skin\",(async i=>{const e=await(0,o.select)(\"#skin-css\");e&&(e.media=i?\"none\":\"all\")}),!0)}},978:function(i,e,t){var n=t(645)((function(i){return i[1]}));n.push([i.id,\".simplifyLiveroom-switch-vip .vip-icon, .simplifyLiveroom-switch-fansMedal .fans-medal-item-ctnr, .simplifyLiveroom-switch-title .title-label, .simplifyLiveroom-switch-userLevel .user-level-icon, .simplifyLiveroom-switch-guard .chat-history-panel .guard-icon, .simplifyLiveroom-switch-systemMessage .system-msg, .simplifyLiveroom-switch-systemMessage .announcement-wrapper, .simplifyLiveroom-switch-welcomeMessage .welcome-guard, .simplifyLiveroom-switch-welcomeMessage .welcome-msg, .simplifyLiveroom-switch-popup .chat-popups-section, .simplifyLiveroom-switch-popup #chat-draw-area-vm, .simplifyLiveroom-switch-giftMessage .chat-item.gift-item, .simplifyLiveroom-switch-giftMessage .chat-history-panel .penury-gift-msg, .simplifyLiveroom-switch-guardPurchase .chat-item.guard-buy, .simplifyLiveroom-switch-eventsBanner .z-section-blocks .left-container .flip-view, .simplifyLiveroom-switch-eventsBanner .activity-pushing-out, .simplifyLiveroom-switch-userEffect .live-room-app .aside-area .activity-welcome-section, .simplifyLiveroom-switch-kanban .live-haruna-ctnr, .simplifyLiveroom-switch-enterPrompt .chat-item.important-prompt-item, .simplifyLiveroom-switch-enterPrompt .chat-history-panel .brush-prompt, .simplifyLiveroom-switch-enterPrompt .chat-item.convention-msg, .simplifyLiveroom-switch-pk .chaos-pk, .simplifyLiveroom-switch-topRank .chat-item.top3-notice, .simplifyLiveroom-switch-topRank .chat-item .rank-icon {\\n  display: none !important;\\n}\\n\\n.simplifyLiveroom-switch-headerPanel .control-panel-ctnr .dialog-ctnr {\\n  z-index: 800 !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .player-ctnr .room-info-ctnr {\\n  display: inline-flex !important;\\n  flex: 1 0 auto;\\n  align-items: center !important;\\n  margin-left: 12px !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .head-info-section {\\n  height: 52px !important;\\n  box-sizing: content-box !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .header-info-ctnr {\\n  display: flex !important;\\n  padding: 10px 24px 10px 12px !important;\\n  height: auto !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .header-info-ctnr .blive-avatar-icons,\\n.simplifyLiveroom-switch-headerPanel .header-info-ctnr .face-pendants {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .header-info-ctnr .blive-avatar-pendant {\\n  width: 48px !important;\\n  height: 48px !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .header-info-ctnr .blive-avatar-face,\\n.simplifyLiveroom-switch-headerPanel .header-info-ctnr .blive-avatar,\\n.simplifyLiveroom-switch-headerPanel .header-info-ctnr .avatar {\\n  height: 32px !important;\\n  width: 32px !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .room-cover {\\n  width: 32px !important;\\n  height: 32px !important;\\n  border-radius: 50% !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr {\\n  display: flex !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row {\\n  display: flex !important;\\n  align-items: center !important;\\n  flex: 1 0 auto !important;\\n  flex-direction: row-reverse !important;\\n  position: static !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .left-ctnr,\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .normal-mode,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .left-ctnr,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .normal-mode {\\n  position: absolute !important;\\n  left: 50% !important;\\n  transform: translateX(-50%) !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .live-area,\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .area-text,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .live-area,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .area-text {\\n  display: inline-flex !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .right-ctnr,\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .upper-right-ctnr,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .right-ctnr,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .upper-right-ctnr {\\n  position: static !important;\\n  transform: none !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .live-title,\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .room-title,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .live-title,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .room-title {\\n  display: flex !important;\\n  align-items: center !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .live-title .text,\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .room-title .text,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .live-title .text,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .room-title .text {\\n  line-height: normal !important;\\n}\\n@media screen and (max-width: 1750px) {\\n  .simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .live-title .title-length-limit,\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .room-title .title-length-limit,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .live-title .title-length-limit,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .room-title .title-length-limit {\\n    max-width: 250px !important;\\n  }\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .upper-row .info-section,\\n.simplifyLiveroom-switch-headerPanel .room-info-upper-row .info-section {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .lower-row,\\n.simplifyLiveroom-switch-headerPanel .room-info-down-row {\\n  margin: 0 !important;\\n  order: -1;\\n}\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .lower-row .right-ctnr,\\n.simplifyLiveroom-switch-headerPanel .rows-ctnr .lower-row .left-ctnr > :nth-child(n+3),\\n.simplifyLiveroom-switch-headerPanel .room-info-down-row .right-ctnr,\\n.simplifyLiveroom-switch-headerPanel .room-info-down-row .left-ctnr > :nth-child(n+3) {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .room-owner-username {\\n  max-width: 150px !important;\\n}\\n.simplifyLiveroom-switch-headerPanel .live-status,\\n.simplifyLiveroom-switch-headerPanel .live-status-label {\\n  display: none !important;\\n}\\n\\n.simplifyLiveroom-switch-giftMessage:not(.simplifyLiveroom-switch-enterPrompt) .chat-history-list.with-penury-gift:not(.with-brush-prompt) {\\n  height: 100% !important;\\n}\\n.simplifyLiveroom-switch-giftMessage:not(.simplifyLiveroom-switch-enterPrompt) .chat-history-list.with-penury-gift.with-brush-prompt {\\n  height: calc(100% - 32px) !important;\\n}\\n\\n.simplifyLiveroom-switch-enterPrompt:not(.simplifyLiveroom-switch-giftMessage) .chat-history-list.with-brush-prompt:not(.with-penury-gift) {\\n  height: 100% !important;\\n}\\n.simplifyLiveroom-switch-enterPrompt:not(.simplifyLiveroom-switch-giftMessage) .chat-history-list.with-brush-prompt.with-penury-gift {\\n  height: calc(100% - 32px) !important;\\n}\\n\\n.simplifyLiveroom-switch-enterPrompt.simplifyLiveroom-switch-giftMessage .chat-history-list {\\n  height: 100% !important;\\n}\\n\\n.simplifyLiveroom-switch-rankList .live-room-app .rank-list-section {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-rankList .live-room-app .chat-history-panel {\\n  height: calc(100% - 145px) !important;\\n}\\n.simplifyLiveroom-switch-rankList .live-room-app .chat-history-panel .chat-history-list::-webkit-scrollbar-track {\\n  background: transparent !important;\\n}\\n.simplifyLiveroom-switch-rankList .live-room-app .chat-history-panel,\\n.simplifyLiveroom-switch-rankList .live-room-app #pay-note-panel-vm .pay-note-panel,\\n.simplifyLiveroom-switch-rankList .live-room-app #pay-note-panel-vm .pay-note-panel .detail-info .mask {\\n  border-radius: 11px 11px 0 0 !important;\\n}\\n.simplifyLiveroom-switch-rankList.player-full-win .chat-history-panel,\\n.simplifyLiveroom-switch-rankList.player-full-win #pay-note-panel-vm .pay-note-panel,\\n.simplifyLiveroom-switch-rankList.player-full-win #pay-note-panel-vm .pay-note-panel .detail-info .mask {\\n  border-radius: 0 !important;\\n}\\n\\n.simplifyLiveroom-switch-giftPanel .gift-panel,\\n.simplifyLiveroom-switch-giftPanel .gift-panel-switch,\\n.simplifyLiveroom-switch-giftPanel .gift-section.guard-ent,\\n.simplifyLiveroom-switch-giftPanel .seeds-wrap > .dp-i-block > .item:not(.seeds),\\n.simplifyLiveroom-switch-giftPanel .gift-control-panel .wish-icon,\\n.simplifyLiveroom-switch-giftPanel .gift-control-panel .wish-tip {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .gift-control-section,\\n.simplifyLiveroom-switch-giftPanel .gift-control-panel {\\n  height: 48px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry,\\n.simplifyLiveroom-switch-giftPanel .treasure-box {\\n  display: flex !important;\\n  align-items: center !important;\\n  padding: 10px 0 0 16px !important;\\n  max-height: 36px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box .draw-box-pic,\\n.simplifyLiveroom-switch-giftPanel .draw-box .anchor-lot-icon,\\n.simplifyLiveroom-switch-giftPanel .draw-box .box-icon,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .draw-box-pic,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .anchor-lot-icon,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .box-icon,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .draw-box-pic,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .anchor-lot-icon,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .box-icon {\\n  margin: 0 !important;\\n  width: 24px !important;\\n  height: 24px !important;\\n  background-position: 0 -2.5px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box .draw-box-pic.open,\\n.simplifyLiveroom-switch-giftPanel .draw-box .anchor-lot-icon.open,\\n.simplifyLiveroom-switch-giftPanel .draw-box .box-icon.open,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .draw-box-pic.open,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .anchor-lot-icon.open,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .box-icon.open,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .draw-box-pic.open,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .anchor-lot-icon.open,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .box-icon.open {\\n  background-position: 0 -1px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box .draw-box-pic,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .draw-box-pic,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .draw-box-pic {\\n  transform: scale(1.1);\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box #BLRHH_treasure_div_tip br,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry #BLRHH_treasure_div_tip br,\\n.simplifyLiveroom-switch-giftPanel .treasure-box #BLRHH_treasure_div_tip br {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box #BLRHH_treasure_div img,\\n.simplifyLiveroom-switch-giftPanel .draw-box #BLRHH_treasure_div canvas,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry #BLRHH_treasure_div img,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry #BLRHH_treasure_div canvas,\\n.simplifyLiveroom-switch-giftPanel .treasure-box #BLRHH_treasure_div img,\\n.simplifyLiveroom-switch-giftPanel .treasure-box #BLRHH_treasure_div canvas {\\n  max-height: 24px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box .draw-box-text,\\n.simplifyLiveroom-switch-giftPanel .draw-box .anchor-lot-text,\\n.simplifyLiveroom-switch-giftPanel .draw-box .count-down,\\n.simplifyLiveroom-switch-giftPanel .draw-box #BLRHH_treasure_div_tip,\\n.simplifyLiveroom-switch-giftPanel .draw-box #BLRHH_treasure_div_timer,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .draw-box-text,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .anchor-lot-text,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .count-down,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry #BLRHH_treasure_div_tip,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry #BLRHH_treasure_div_timer,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .draw-box-text,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .anchor-lot-text,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .count-down,\\n.simplifyLiveroom-switch-giftPanel .treasure-box #BLRHH_treasure_div_tip,\\n.simplifyLiveroom-switch-giftPanel .treasure-box #BLRHH_treasure_div_timer {\\n  margin-left: 12px !important;\\n  padding: 4px 8px !important;\\n  max-width: unset !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box .awarding-panel,\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry .awarding-panel,\\n.simplifyLiveroom-switch-giftPanel .treasure-box .awarding-panel {\\n  bottom: 42px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .draw-box {\\n  padding-top: 11px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .anchor-lottery-entry {\\n  padding-top: 12px !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .gift-control-panel .right-part {\\n  height: 48px !important;\\n  display: flex !important;\\n  justify-content: flex-end !important;\\n  min-width: unset !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .gift-control-panel .right-part > .dp-table-cell {\\n  display: flex !important;\\n  align-items: center !important;\\n}\\n.simplifyLiveroom-switch-giftPanel .gift-control-panel .right-part > .dp-table-cell .supporting-info {\\n  transform: translateY(-2px) !important;\\n}\\n\\n.simplifyLiveroom-switch-guard .guard-danmaku::before {\\n  -o-border-image: none !important;\\n     border-image: none !important;\\n  background-color: transparent !important;\\n}\\n.simplifyLiveroom-switch-guard .guard-danmaku::before .guard-danmaku {\\n  margin: 0 !important;\\n  padding: 4px 5px !important;\\n}\\n.simplifyLiveroom-switch-guard .guard-danmaku::before .guard-danmaku::after {\\n  background-image: none !important;\\n}\\n.simplifyLiveroom-switch-guard .chat-history-panel [class*=guard-level-] {\\n  padding: 4px 5px !important;\\n  margin: 0 !important;\\n}\\n.simplifyLiveroom-switch-guard .chat-history-panel [class*=guard-level-]::after {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-guard .chat-history-panel .chat-colorful-bubble {\\n  margin: 0 !important;\\n  display: block !important;\\n  border-radius: 0 !important;\\n  background-color: transparent !important;\\n}\\n.simplifyLiveroom-switch-guard .fans-medal-item.medal-guard {\\n  margin-left: 0 !important;\\n}\\n\\n.simplifyLiveroom-switch-emoticons .control-panel-icon-row .emoticons-panel {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-emoticons .chat-history-list .chat-item .emoticon img {\\n  display: none !important;\\n}\\n.simplifyLiveroom-switch-emoticons .chat-history-list .chat-item .emoticon span {\\n  display: inline-flex !important;\\n}\\n.simplifyLiveroom-switch-emoticons .danmaku-item-container .bilibili-danmaku img {\\n  display: none !important;\\n}\",\"\"]),i.exports=n},645:function(i){\"use strict\";\n// eslint-disable-next-line func-names\ni.exports=function(i){var e=[];return e.toString=function(){return this.map((function(e){var t=i(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(t,\"}\"):t})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(i,t,n){\"string\"==typeof i&&(\n// eslint-disable-next-line no-param-reassign\ni=[[null,i,\"\"]]);var o={};if(n)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<i.length;s++){var l=[].concat(i[s]);n&&o[l[0]]||(t&&(l[2]?l[2]=\"\".concat(t,\" and \").concat(l[2]):l[2]=t),e.push(l))}},e}},693:function(i,e,t){var n=t(978);n&&n.__esModule&&(n=n.default),i.exports=\"string\"==typeof n?n:n.toString()}},n={};function o(i){var e=n[i];if(void 0!==e)return e.exports;var r=n[i]={id:i,exports:{}};return t[i](r,r.exports,o),r.exports}e=Object.getPrototypeOf?function(i){return Object.getPrototypeOf(i)}:function(i){return i.__proto__},o.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if(\"object\"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&\"function\"==typeof t.then)return t}var r=Object.create(null);o.r(r);var a={};i=i||[null,e({}),e([]),e(e)];for(var s=2&n&&t;\"object\"==typeof s&&!~i.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(i){a[i]=function(){return t[i]}}));return a.default=function(){return t},o.d(r,a),r},o.d=function(i,e){for(var t in e)o.o(e,t)&&!o.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})},o.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},o.r=function(i){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(i,\"__esModule\",{value:!0})};var r={};return function(){\"use strict\";o.d(r,{component:function(){return n}});var i=coreApis.componentApis.switchOptions,e=coreApis.componentApis.styledComponent,t=coreApis.utils.urls;const n=(0,i.createSwitchOptions)({name:\"simplifyOptions\",dimAt:\"checked\",switchProps:{checkedIcon:\"mdi-eye-off-outline\",notCheckedIcon:\"mdi-eye-outline\"},switches:{vip:{defaultValue:!0,displayName:\"老爷图标\"},enterPrompt:{defaultValue:!0,displayName:\"入场通知\"},fansMedal:{defaultValue:!0,displayName:\"粉丝勋章\"},title:{defaultValue:!0,displayName:\"活动头衔\"},guard:{defaultValue:!0,displayName:\"舰长图标\"},systemMessage:{defaultValue:!0,displayName:\"全区广播\"},welcomeMessage:{defaultValue:!0,displayName:\"欢迎信息\"},giftMessage:{defaultValue:!0,displayName:\"礼物弹幕\"},emoticons:{defaultValue:!0,displayName:\"表情特效\"},guardPurchase:{defaultValue:!0,displayName:\"上舰提示\"},giftPanel:{defaultValue:!0,displayName:\"付费礼物\"},headerPanel:{defaultValue:!1,displayName:\"标题栏活动\"},userEffect:{defaultValue:!0,displayName:\"入场特效\"},kanban:{defaultValue:!0,displayName:\"看板娘\"},eventsBanner:{defaultValue:!1,displayName:\"活动横幅\"},rankList:{defaultValue:!1,displayName:\"排行榜\"},popup:{defaultValue:!1,displayName:\"抽奖提示\"},pk:{defaultValue:!1,displayName:\"PK浮窗\"},topRank:{defaultValue:!1,displayName:\"高能榜提示\"},skin:{defaultValue:!1,displayName:\"房间皮肤\"}}})({name:\"simplifyLiveroom\",displayName:\"简化直播间\",entry:(0,e.styledComponentEntry)((()=>Promise.resolve().then(o.t.bind(o,693,23))),(async()=>{const{setupSkinSimplify:i}=await Promise.resolve().then(o.bind(o,506));i()})),description:{\"zh-CN\":\"隐藏直播间中各种不需要的内容.\"},tags:[componentsTags.live,componentsTags.style],urlInclude:t.liveUrls,commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"})}(),r=r.component}()}));",
      "metadata": {
        "name": "simplifyLiveroom",
        "displayName": "简化直播间",
        "description": {
          "zh-CN": "隐藏直播间中各种不需要的内容."
        },
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0",
        "options": {
          "switch-vip": {
            "defaultValue": true,
            "displayName": "老爷图标",
            "hidden": true
          },
          "switch-enterPrompt": {
            "defaultValue": true,
            "displayName": "入场通知",
            "hidden": true
          },
          "switch-fansMedal": {
            "defaultValue": true,
            "displayName": "粉丝勋章",
            "hidden": true
          },
          "switch-title": {
            "defaultValue": true,
            "displayName": "活动头衔",
            "hidden": true
          },
          "switch-guard": {
            "defaultValue": true,
            "displayName": "舰长图标",
            "hidden": true
          },
          "switch-systemMessage": {
            "defaultValue": true,
            "displayName": "全区广播",
            "hidden": true
          },
          "switch-welcomeMessage": {
            "defaultValue": true,
            "displayName": "欢迎信息",
            "hidden": true
          },
          "switch-giftMessage": {
            "defaultValue": true,
            "displayName": "礼物弹幕",
            "hidden": true
          },
          "switch-emoticons": {
            "defaultValue": true,
            "displayName": "表情特效",
            "hidden": true
          },
          "switch-guardPurchase": {
            "defaultValue": true,
            "displayName": "上舰提示",
            "hidden": true
          },
          "switch-giftPanel": {
            "defaultValue": true,
            "displayName": "付费礼物",
            "hidden": true
          },
          "switch-headerPanel": {
            "defaultValue": false,
            "displayName": "标题栏活动",
            "hidden": true
          },
          "switch-userEffect": {
            "defaultValue": true,
            "displayName": "入场特效",
            "hidden": true
          },
          "switch-kanban": {
            "defaultValue": true,
            "displayName": "看板娘",
            "hidden": true
          },
          "switch-eventsBanner": {
            "defaultValue": false,
            "displayName": "活动横幅",
            "hidden": true
          },
          "switch-rankList": {
            "defaultValue": false,
            "displayName": "排行榜",
            "hidden": true
          },
          "switch-popup": {
            "defaultValue": false,
            "displayName": "抽奖提示",
            "hidden": true
          },
          "switch-pk": {
            "defaultValue": false,
            "displayName": "PK浮窗",
            "hidden": true
          },
          "switch-topRank": {
            "defaultValue": false,
            "displayName": "高能榜提示",
            "hidden": true
          },
          "switch-skin": {
            "defaultValue": false,
            "displayName": "房间皮肤",
            "hidden": true
          },
          "simplifyOptions": {
            "defaultValue": {
              "name": "simplifyOptions",
              "dimAt": "checked",
              "switchProps": {
                "checkedIcon": "mdi-eye-off-outline",
                "notCheckedIcon": "mdi-eye-outline"
              },
              "switches": {
                "vip": {
                  "defaultValue": true,
                  "displayName": "老爷图标"
                },
                "enterPrompt": {
                  "defaultValue": true,
                  "displayName": "入场通知"
                },
                "fansMedal": {
                  "defaultValue": true,
                  "displayName": "粉丝勋章"
                },
                "title": {
                  "defaultValue": true,
                  "displayName": "活动头衔"
                },
                "guard": {
                  "defaultValue": true,
                  "displayName": "舰长图标"
                },
                "systemMessage": {
                  "defaultValue": true,
                  "displayName": "全区广播"
                },
                "welcomeMessage": {
                  "defaultValue": true,
                  "displayName": "欢迎信息"
                },
                "giftMessage": {
                  "defaultValue": true,
                  "displayName": "礼物弹幕"
                },
                "emoticons": {
                  "defaultValue": true,
                  "displayName": "表情特效"
                },
                "guardPurchase": {
                  "defaultValue": true,
                  "displayName": "上舰提示"
                },
                "giftPanel": {
                  "defaultValue": true,
                  "displayName": "付费礼物"
                },
                "headerPanel": {
                  "defaultValue": false,
                  "displayName": "标题栏活动"
                },
                "userEffect": {
                  "defaultValue": true,
                  "displayName": "入场特效"
                },
                "kanban": {
                  "defaultValue": true,
                  "displayName": "看板娘"
                },
                "eventsBanner": {
                  "defaultValue": false,
                  "displayName": "活动横幅"
                },
                "rankList": {
                  "defaultValue": false,
                  "displayName": "排行榜"
                },
                "popup": {
                  "defaultValue": false,
                  "displayName": "抽奖提示"
                },
                "pk": {
                  "defaultValue": false,
                  "displayName": "PK浮窗"
                },
                "topRank": {
                  "defaultValue": false,
                  "displayName": "高能榜提示"
                },
                "skin": {
                  "defaultValue": false,
                  "displayName": "房间皮肤"
                }
              },
              "radio": false,
              "componentName": "simplifyLiveroom",
              "optionDisplayName": "简化直播间选项"
            },
            "displayName": "简化直播间选项"
          }
        }
      },
      "settings": {
        "enabled": true,
        "options": {
          "switch-vip": true,
          "switch-enterPrompt": true,
          "switch-fansMedal": true,
          "switch-title": true,
          "switch-guard": true,
          "switch-systemMessage": true,
          "switch-welcomeMessage": true,
          "switch-giftMessage": true,
          "switch-emoticons": true,
          "switch-guardPurchase": true,
          "switch-giftPanel": true,
          "switch-headerPanel": false,
          "switch-userEffect": true,
          "switch-kanban": true,
          "switch-eventsBanner": false,
          "switch-rankList": false,
          "switch-popup": false,
          "switch-pk": false,
          "switch-topRank": false,
          "switch-skin": false,
          "simplifyOptions": {
            "name": "simplifyOptions",
            "dimAt": "checked",
            "switchProps": {
              "checkedIcon": "mdi-eye-off-outline",
              "notCheckedIcon": "mdi-eye-outline"
            },
            "switches": {
              "vip": {
                "defaultValue": true,
                "displayName": "老爷图标"
              },
              "enterPrompt": {
                "defaultValue": true,
                "displayName": "入场通知"
              },
              "fansMedal": {
                "defaultValue": true,
                "displayName": "粉丝勋章"
              },
              "title": {
                "defaultValue": true,
                "displayName": "活动头衔"
              },
              "guard": {
                "defaultValue": true,
                "displayName": "舰长图标"
              },
              "systemMessage": {
                "defaultValue": true,
                "displayName": "全区广播"
              },
              "welcomeMessage": {
                "defaultValue": true,
                "displayName": "欢迎信息"
              },
              "giftMessage": {
                "defaultValue": true,
                "displayName": "礼物弹幕"
              },
              "emoticons": {
                "defaultValue": true,
                "displayName": "表情特效"
              },
              "guardPurchase": {
                "defaultValue": true,
                "displayName": "上舰提示"
              },
              "giftPanel": {
                "defaultValue": true,
                "displayName": "付费礼物"
              },
              "headerPanel": {
                "defaultValue": false,
                "displayName": "标题栏活动"
              },
              "userEffect": {
                "defaultValue": true,
                "displayName": "入场特效"
              },
              "kanban": {
                "defaultValue": true,
                "displayName": "看板娘"
              },
              "eventsBanner": {
                "defaultValue": false,
                "displayName": "活动横幅"
              },
              "rankList": {
                "defaultValue": false,
                "displayName": "排行榜"
              },
              "popup": {
                "defaultValue": false,
                "displayName": "抽奖提示"
              },
              "pk": {
                "defaultValue": false,
                "displayName": "PK浮窗"
              },
              "topRank": {
                "defaultValue": false,
                "displayName": "高能榜提示"
              },
              "skin": {
                "defaultValue": false,
                "displayName": "房间皮肤"
              }
            },
            "radio": false,
            "componentName": "simplifyLiveroom",
            "optionDisplayName": "简化直播间选项"
          }
        }
      }
    },
    "keymap": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/keymap\"]=t():e[\"utils/keymap\"]=t()}(self,(function(){return function(){var e,t,n={709:function(e,t,n){\"use strict\";n.d(t,{Nw:function(){return u},vN:function(){return l},$j:function(){return s},kW:function(){return d}});var i=coreApis.componentApis.video.playerAgent,o=n(986),r=n(153);const s=(e,t)=>{const{event:n}=t,i=new MouseEvent(\"click\",{...lodash.pick(n,\"ctrlKey\",\"shiftKey\",\"altKey\",\"metaKey\")});if(\"string\"==typeof e){const t=dq(e);if(!t)return!1;t.dispatchEvent(i)}else{if(!e)return!1;e.dispatchEvent(i)}return!0},a=e=>t=>s(e,t),l=e=>()=>i.playerAgent.changeTime(\"number\"==typeof e?e:e());let c;const d=async(e,t)=>{let n=dq(\".keymap-tip\");if(!n){const o=await i.playerAgent.query.playerArea();if(!o)return;o.insertAdjacentHTML(\"afterbegin\",`\\n      <div class=\"keymap-tip-container\">\\n        <i class=\"keymap-tip-icon mdi ${t}\"></i>\\n        <div class=\"keymap-tip\">${e}</div>\\n      </div>\\n    `),n=dq(\".keymap-tip\")}n.innerHTML=e;const o=dq(\".keymap-tip-container\"),r=dq(o,\".mdi\");r.classList.remove(...r.classList.values()),r.classList.add(\"mdi\",t),c&&clearTimeout(c),o.classList.add(\"show\"),c=window.setTimeout((()=>{o.classList.remove(\"show\")}),2e3)},p={fullscreen:{displayName:\"全屏\",run:()=>i.playerAgent.fullscreen()},webFullscreen:{displayName:\"网页全屏\",run:()=>i.playerAgent.webFullscreen()},wideScreen:{displayName:\"宽屏\",run:()=>i.playerAgent.widescreen()},volumeUp:{displayName:\"增加音量\",run:()=>{const e=i.playerAgent.changeVolume(10);return lodash.isNil(e)?e:(d(`${e}%`,\"mdi-volume-high\"),!0)}},volumeDown:{displayName:\"降低音量\",run:()=>{const e=i.playerAgent.changeVolume(-10);return lodash.isNil(e)?e:(0===e?d(\"静音\",\"mdi-volume-off\"):d(`${e}%`,\"mdi-volume-high\"),!0)}},mute:{displayName:\"静音\",run:()=>{const e=i.playerAgent.toggleMute();return lodash.isNil(e)?e:(i.playerAgent.isMute()?d(\"已静音\",\"mdi-volume-off\"):d(\"已取消静音\",\"mdi-volume-high\"),!0)}},pictureInPicture:{displayName:\"画中画\",run:()=>i.playerAgent.togglePip()},coin:{displayName:\"投币\",run:a(\".video-toolbar .coin, .tool-bar .coin-info, .video-toolbar-module .coin-box, .play-options-ul > li:nth-child(2), .video-toolbar-v1 .coin\")},favorite:{displayName:\"收藏\",run:a(\".video-toolbar .collect, .video-toolbar-module .fav-box, .play-options-ul > li:nth-child(3), .video-toolbar-v1 .collect\")},pause:{displayName:\"暂停/播放\",run:()=>i.playerAgent.togglePlay()},like:{displayName:\"点赞\",run:(()=>{let e=!0;return t=>{const{event:n}=t,i=dq(\".video-toolbar .like, .tool-bar .like-info, .video-toolbar-v1 .like\");if(!i)return!1;n.preventDefault();const o=(e,t)=>{const n=new CustomEvent(e,t);i.dispatchEvent(n)};return e=!0,setTimeout((()=>e=!1),200),o(\"mousedown\",n),document.body.addEventListener(\"keyup\",(t=>{t.preventDefault(),o(\"mouseup\",t),e&&o(\"click\",t)}),{once:!0}),!0}})()},danmaku:{displayName:\"弹幕开关\",run:()=>i.playerAgent.toggleDanmaku()},longJumpBackward:{displayName:\"长倒退\",run:()=>i.playerAgent.changeTime(-(0,o.getComponentSettings)(\"keymap\").options.longJumpSeconds)},longJumpForward:{displayName:\"长前进\",run:()=>i.playerAgent.changeTime((0,o.getComponentSettings)(\"keymap\").options.longJumpSeconds)},jumpBackward:{displayName:\"倒退\",run:()=>i.playerAgent.changeTime(-5)},jumpForward:{displayName:\"前进\",run:()=>i.playerAgent.changeTime(5)},playerMenu:{displayName:\"播放器菜单\",run:()=>{const e=i.playerAgent.query.video.container.sync();if(!e)return null;const t=e.getBoundingClientRect();return e.dispatchEvent(new MouseEvent(\"contextmenu\",{bubbles:!0,cancelable:!1,view:unsafeWindow,button:2,buttons:0,clientX:t.x+t.width/2-88.325,clientY:t.y+t.height/2-97})),!0}},seekBegin:{displayName:\"回开头\",run:()=>i.playerAgent.seek(0)},sendComment:{displayName:\"发送评论\",ignoreTyping:!1,run:()=>{var e;const t=null===(e=document.activeElement)||void 0===e?void 0:e.nextElementSibling;return t?(t.click(),!0):null}}},[u]=(0,r.registerAndGetData)(\"keymap.actions\",p)},455:function(e,t,n){\"use strict\";n.d(t,{Wb:function(){return o},um:function(){return r}});var i=n(153);const o={fullscreen:\"f\",webFullscreen:\"w\",wideScreen:\"t\",volumeUp:\"arrowUp\",volumeDown:\"arrowDown\",mute:\"m\",pictureInPicture:\"p\",coin:\"c\",favorite:\"s\",pause:\"space\",like:\"l\",playerMenu:\"`\",longJumpForward:\"j\",longJumpBackward:\"shift j\",jumpBackward:\"arrowLeft\",jumpForward:\"arrowRight\",danmaku:\"d\",seekBegin:\"0\",sendComment:\"ctrl enter\"},[,r]=(0,i.registerAndGetData)(\"keymap.presets\",o,{Default:{},YouTube:{like:\"\",pause:\"space k\",longJumpForward:\"l\",longJumpBackward:\"j\",seekBegin:\"0 Home\"},HTML5Player:{coin:\"shift c\",danmaku:\"shift d\",fullscreen:\"enter\",webFullscreen:\"shift enter\",pictureInPicture:\"shift p\",longJumpBackward:\"ctrl arrowLeft\",longJumpForward:\"ctrl arrowRight\"},PotPlayer:{coin:\"shift c\",danmaku:\"shift d\",fullscreen:\"enter\",webFullscreen:\"6\",longJumpBackward:\"ctrl arrowLeft\",longJumpForward:\"ctrl arrowRight\",seekBegin:\"backspace\"}})},781:function(e,t,n){\"use strict\";n.r(t),n.d(t,{loadKeymapSettings:function(){return r},toggleKeymapSettings:function(){return s}});var i=n(605);let o;const r=async e=>{if(o)return;const t=await Promise.resolve().then(n.bind(n,742)).then((e=>e.default));o=(0,i.mountVueComponent)(t),e&&(o.triggerElement=e),document.body.insertAdjacentElement(\"beforeend\",o.$el)},s=async e=>{o||await r(e),o.popupOpen=!o.popupOpen}},786:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".keymap-extra-options {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n  justify-content: center;\\n}\\n.keymap-extra-options .keymap-settings-button .be-icon {\\n  margin-right: 8px;\\n}\",\"\"]),e.exports=i},848:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".keymap-settings-popup {\\n  background-color: #fff;\\n  color: black;\\n  border-radius: 8px;\\n  border: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  box-sizing: border-box;\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05);\\n  transition: 0.2s ease-out;\\n  width: 550px;\\n  top: 50%;\\n  left: 50%;\\n  z-index: 100002;\\n  transform: translateX(-50%) translateY(-50%) scale(0.9);\\n  display: flex;\\n  flex-direction: column;\\n}\\nbody.dark .keymap-settings-popup {\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\\n}\\nbody.dark .keymap-settings-popup {\\n  background-color: #282828;\\n  color: #eee;\\n}\\nbody.dark .keymap-settings-popup {\\n  background-color: #222;\\n}\\n.keymap-settings-popup.open {\\n  transform: translateX(-50%) translateY(-50%) scale(1);\\n}\\n.keymap-settings {\\n  font-size: 12px;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 12px 12px 0 18px;\\n}\\n.keymap-settings-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n  margin-bottom: 8px;\\n}\\n.keymap-settings-header-title {\\n  flex: 1 0 auto;\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n  font-size: 18px;\\n  font-weight: bold;\\n}\\n.keymap-settings-header-title .be-icon {\\n  margin-right: 6px;\\n}\\n.keymap-settings-header-help, .keymap-settings-header-close {\\n  display: flex;\\n  padding: 6px;\\n  cursor: pointer;\\n  transition: 0.2s ease-out;\\n  color: inherit;\\n}\\n.keymap-settings-header-help:hover, .keymap-settings-header-close:hover {\\n  color: var(--theme-color);\\n}\\n.keymap-settings-content {\\n  flex: 1 0 auto;\\n  max-height: calc(100vh - 200px);\\n  overflow: auto;\\n  padding-bottom: 12px;\\n}\\n.keymap-settings-content .keymap-settings-grid .grid-header,\\n.keymap-settings-content .keymap-settings-grid .grid-row {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n  gap: 8px;\\n  justify-content: space-between;\\n  height: 24px;\\n  box-sizing: content-box;\\n}\\n.keymap-settings-content .keymap-settings-grid .grid-header > *,\\n.keymap-settings-content .keymap-settings-grid .grid-row > * {\\n  flex: 1 0 0;\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n}\\n.keymap-settings-content .keymap-settings-grid .grid-header {\\n  margin-bottom: 4px;\\n  padding: 4px 0 6px 0;\\n  border-bottom: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  position: sticky;\\n  top: 0;\\n  z-index: 1;\\n  background-color: #fff;\\n}\\nbody.dark .keymap-settings-content .keymap-settings-grid .grid-header {\\n  background-color: #222;\\n}\",\"\"]),e.exports=i},542:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".keymap-settings-grid .grid-row {\\n  padding: 2px 0;\\n}\\n.keymap-settings-grid .grid-row .row-name,\\n.keymap-settings-grid .grid-row .row-default-binding,\\n.keymap-settings-grid .grid-row .row-preset-binding {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: auto;\\n  scrollbar-width: none !important;\\n  overscroll-behavior: contain;\\n}\\n.keymap-settings-grid .grid-row .row-name::-webkit-scrollbar,\\n.keymap-settings-grid .grid-row .row-default-binding::-webkit-scrollbar,\\n.keymap-settings-grid .grid-row .row-preset-binding::-webkit-scrollbar {\\n  height: 0 !important;\\n  width: 0 !important;\\n}\\n.keymap-settings-grid .grid-row .row-name.not-set, .keymap-settings-grid .grid-row .row-name.overwritten,\\n.keymap-settings-grid .grid-row .row-default-binding.not-set,\\n.keymap-settings-grid .grid-row .row-default-binding.overwritten,\\n.keymap-settings-grid .grid-row .row-preset-binding.not-set,\\n.keymap-settings-grid .grid-row .row-preset-binding.overwritten {\\n  opacity: 0.25;\\n}\\n.keymap-settings-grid .grid-row .row-custom-binding .be-button {\\n  padding: 4px;\\n  margin-right: 4px;\\n}\\n.keymap-settings-grid .grid-row .row-custom-binding .be-icon {\\n  margin: 0;\\n}\\n.keymap-settings-grid .grid-row .row-custom-binding .be-textbox {\\n  margin-right: 6px;\\n  flex: 1 0 auto;\\n}\\n.keymap-settings-grid .grid-row .row-custom-binding .custom-binding-edit,\\n.keymap-settings-grid .grid-row .row-custom-binding .custom-binding-add {\\n  display: flex;\\n  align-items: center;\\n  gap: 0;\\n  flex: 1 0 auto;\\n}\",\"\"]),e.exports=i},280:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".keymap-tip-container {\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  padding: 8px 16px;\\n  background-color: rgba(0, 0, 0, 0.6666666667);\\n  color: white;\\n  pointer-events: none;\\n  opacity: 0;\\n  z-index: 100;\\n  display: flex;\\n  align-items: center;\\n  font-size: 14pt;\\n  border-radius: 4px;\\n  transition: 0.2s ease-out;\\n}\\nbody.player-mode-blackmask .keymap-tip-container {\\n  z-index: 10017;\\n}\\n.keymap-tip-container.show {\\n  opacity: 1;\\n}\\n.keymap-tip-container i {\\n  line-height: 1;\\n  margin-right: 8px;\\n  font-size: 18pt;\\n}\\n\\n.bilibili-player .bilibili-player-area .bilibili-player-video-wrap .bilibili-player-volumeHint {\\n  background-color: rgba(0, 0, 0, 0.6666666667);\\n  color: white;\\n}\\n.bilibili-player .bilibili-player-area .bilibili-player-video-wrap .bilibili-player-volumeHint-icon {\\n  line-height: 1;\\n}\",\"\"]),e.exports=i},645:function(e){\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,i){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(i)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);i&&o[l[0]]||(n&&(l[2]?l[2]=\"\".concat(n,\" and \").concat(l[2]):l[2]=n),t.push(l))}},t}},379:function(e,t,n){\"use strict\";var i,o=function(){return void 0===i&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\ni=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],l=t.base?r[0]+t.base:r[0],c=n[l]||0,d=\"\".concat(l,\" \").concat(c);n[l]=c+1;var p=a(d),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==p?(s[p].references++,s[p].updater(u)):s.push({identifier:d,updater:y(u,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var s=r(e.insert||\"head\");if(!s)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");s.appendChild(t)}return t}var d,p=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join(\"\\n\")});function u(e,t,n,i){var o=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=p(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function m(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var g=null,f=0;function y(e,t){var n,i,o;if(t.singleton){var r=f++;n=g||(g=c(t)),i=u.bind(null,n,r,!1),o=u.bind(null,n,r,!0)}else n=c(t),i=m.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var n=l(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=a(n[i]);s[o].references--}for(var r=l(e,t),c=0;c<n.length;c++){var d=a(n[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}n=r}}}},233:function(e,t,n){var i=n(280);i&&i.__esModule&&(i=i.default),e.exports=\"string\"==typeof i?i:i.toString()},658:function(e,t,n){\"use strict\";n.r(t),n.d(t,{default:function(){return m}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"keymap-extra-options\"},[n(\"VButton\",{ref:\"button\",staticClass:\"keymap-settings-button\",on:{mouseover:function(t){return e.loadSettings()},click:function(t){return e.toggleSettings()}}},[n(\"VIcon\",{attrs:{icon:\"mdi-keyboard-settings-outline\",size:18}}),e._v(\"\\n    快捷键设置\\n  \")],1)],1)};i._withStripped=!0;var o=n(648),r=n(781),s=Vue.extend({components:{VButton:o.VButton,VIcon:o.VIcon},data:()=>({popupOpen:!1}),methods:{async loadSettings(){await(0,r.loadKeymapSettings)(this.$refs.button)},async toggleSettings(){await(0,r.toggleKeymapSettings)(this.$refs.button)}}}),a=n(379),l=n.n(a),c=n(786),d=n.n(c),p={insert:\"head\",singleton:!1},u=(l()(d(),p),d().locals,(0,n(900).Z)(s,i,[],!1,null,null,null));u.options.__file=\"registry/lib/components/utils/keymap/settings/ExtraOptions.vue\";var m=u.exports},742:function(e,t,n){\"use strict\";n.r(t),n.d(t,{default:function(){return S}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"VPopup\",{staticClass:\"keymap-settings-popup be-settings-extra-options\",attrs:{fixed:\"\",\"trigger-element\":e.triggerElement},model:{value:e.popupOpen,callback:function(t){e.popupOpen=t},expression:\"popupOpen\"}},[n(\"div\",{staticClass:\"keymap-settings\"},[n(\"div\",{staticClass:\"keymap-settings-header\"},[n(\"div\",{staticClass:\"keymap-settings-header-title\"},[n(\"VIcon\",{attrs:{icon:\"mdi-keyboard-settings-outline\"}}),e._v(\"\\n        快捷键设置\\n      \")],1),e._v(\" \"),n(\"a\",{staticClass:\"keymap-settings-header-help\",attrs:{href:\"https://github.com/the1812/Bilibili-Evolved/blob/preview/registry/lib/components/utils/keymap/help.md\",target:\"_blank\",title:\"查看帮助\"}},[n(\"VIcon\",{attrs:{size:18,icon:\"mdi-help-circle-outline\"}})],1),e._v(\" \"),n(\"div\",{staticClass:\"keymap-settings-header-close\",attrs:{title:\"关闭\"}},[n(\"VIcon\",{attrs:{size:18,icon:\"close\"},on:{click:function(t){e.popupOpen=!1}}})],1)]),e._v(\" \"),n(\"div\",{staticClass:\"keymap-settings-content\"},[n(\"div\",{staticClass:\"keymap-settings-grid\"},[n(\"div\",{staticClass:\"grid-header\"},[n(\"div\",{staticClass:\"header-name\"},[e._v(\"\\n            动作\\n          \")]),e._v(\" \"),n(\"div\",{staticClass:\"header-default-binding\"},[e._v(\"\\n            默认按键\\n          \")]),e._v(\" \"),n(\"div\",{staticClass:\"header-preset-binding\"},[n(\"VDropdown\",{attrs:{items:e.presetOptions,\"key-mapper\":function(e){return e}},scopedSlots:e._u([{key:\"item\",fn:function(t){var n=t.item;return[e._v(\"\\n                \"+e._s(n)+\"\\n              \")]}}]),model:{value:e.selectedPreset,callback:function(t){e.selectedPreset=t},expression:\"selectedPreset\"}})],1),e._v(\" \"),n(\"div\",{staticClass:\"header-custom-binding\"},[e._v(\"\\n            自定义按键\\n          \")])]),e._v(\" \"),e._l(e.rows,(function(t){return n(\"KeymapSettingsRow\",{key:t.name,attrs:{row:t,\"selected-preset\":e.selectedPreset}})}))],2)])])])};i._withStripped=!0;var o=n(986),r=n(648),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"grid-row\"},[n(\"div\",{staticClass:\"row-name\",attrs:{title:e.row.name}},[e._v(\"\\n    \"+e._s(e.row.displayName)+\"\\n  \")]),e._v(\" \"),n(\"div\",{staticClass:\"row-default-binding\",class:{overwritten:e.isOverwrittern(e.presets[e.selectedPreset],e.customKeyBindings),\"not-set\":void 0===e.presetBase[e.row.name]}},[e._v(\"\\n    \"+e._s(e.showReadonlyKey(e.presetBase))+\"\\n  \")]),e._v(\" \"),n(\"div\",{staticClass:\"row-preset-binding\",class:{overwritten:e.isOverwrittern(e.customKeyBindings),\"not-set\":void 0===e.presets[e.selectedPreset][e.row.name]}},[e._v(\"\\n    \"+e._s(e.showReadonlyKey(e.presets[e.selectedPreset]))+\"\\n  \")]),e._v(\" \"),n(\"div\",{staticClass:\"row-custom-binding\"},[e.editable?n(\"div\",{staticClass:\"custom-binding-edit\"},[n(\"TextBox\",{ref:\"customBindingTextBox\",attrs:{placeholder:\"禁用\",\"change-on-blur\":\"\",text:e.customKeyBindings[e.row.name]},on:{change:e.updateCustomBinding}}),e._v(\" \"),n(\"VButton\",{attrs:{type:\"transparent\",title:\"删除自定义键位\"},on:{click:function(t){return e.removeCustomBinding()}}},[n(\"VIcon\",{attrs:{icon:\"mdi-trash-can-outline\",size:16}})],1)],1):n(\"div\",{staticClass:\"custom-binding-add\"},[n(\"VButton\",{attrs:{type:\"transparent\",title:\"添加自定义键位\"},on:{click:function(t){return e.addCustomBinding()}}},[n(\"VIcon\",{attrs:{icon:\"mdi-plus\",size:16}})],1)],1)])])};s._withStripped=!0;var a=n(455);const l=(0,o.getComponentSettings)(\"keymap\").options;var c=Vue.extend({components:{TextBox:r.TextBox,VButton:r.VButton,VIcon:r.VIcon},props:{row:{type:Object,required:!0},selectedPreset:{type:String,required:!0}},data:()=>({presets:a.um,presetBase:a.Wb,customKeyBindings:l.customKeyBindings,editable:!1}),created(){this.checkEditable()},methods:{checkEditable(){this.editable=void 0!==this.customKeyBindings[this.row.name]},showReadonlyKey(e){const{name:t}=this.row,n=e[t];return void 0===n?\"继承\":\"\"===n?\"禁用\":n},isOverwrittern(){const{name:e}=this.row;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.some((t=>void 0!==t[e]))},async addCustomBinding(){const{name:e}=this.row;this.customKeyBindings[e]=\"\",this.checkEditable(),await this.$nextTick(),this.$refs.customBindingTextBox.focus()},removeCustomBinding(){const{name:e}=this.row;delete this.customKeyBindings[e],this.checkEditable()},updateCustomBinding(e){console.log(\"update\",e);const{name:t}=this.row;this.customKeyBindings[t]=e}}}),d=c,p=n(379),u=n.n(p),m=n(542),g=n.n(m),f={insert:\"head\",singleton:!1},y=(u()(g(),f),g().locals,n(900)),h=(0,y.Z)(d,s,[],!1,null,null,null);h.options.__file=\"registry/lib/components/utils/keymap/settings/KeymapSettingsRow.vue\";var v=h.exports,b=n(709);const w=(0,o.getComponentSettings)(\"keymap\").options;console.log(a.um,b.Nw,w.preset,w.customKeyBindings);var k=Vue.extend({components:{VIcon:r.VIcon,VDropdown:r.VDropdown,VPopup:r.VPopup,KeymapSettingsRow:v},props:{triggerElement:{type:HTMLElement,default:null}},data:()=>({popupOpen:!1,actions:b.Nw,presets:a.um,customKeyBindings:w.customKeyBindings}),computed:{selectedPreset:{get:()=>w.preset,set(e){w.preset=e}},rows(){return Object.entries(this.actions).map((e=>{let[t,n]=e;return{name:t,...n}}))},presetOptions(){return Object.keys(this.presets)}}}),x=n(848),_=n.n(x),C={insert:\"head\",singleton:!1},B=(u()(_(),C),_().locals,(0,y.Z)(k,i,[],!1,null,null,null));B.options.__file=\"registry/lib/components/utils/keymap/settings/KeymapSettings.vue\";var S=B.exports},900:function(e,t,n){\"use strict\";function i(e,t,n,i,o,r,s,a){var l,c=\"function\"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId=\"data-v-\"+r),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:c}}n.d(t,{Z:function(){return i}})},153:function(e){\"use strict\";e.exports=coreApis.pluginApis.data},986:function(e){\"use strict\";e.exports=coreApis.settings},648:function(e){\"use strict\";e.exports=coreApis.ui},605:function(e){\"use strict\";e.exports=coreApis.utils}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,exports:{}};return n[e](r,r.exports,o),r.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if(\"object\"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&\"function\"==typeof n.then)return n}var r=Object.create(null);o.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;\"object\"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){s[e]=function(){return n[e]}}));return s.default=function(){return n},o.d(r,s),r},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return function(){\"use strict\";o.d(r,{component:function(){return u}});var e=coreApis.componentApis.styledComponent,t=o(986),n=o(709),i=o(605),s=coreApis.utils.urls;const a=[\"shift\",\"alt\",\"ctrl\",\"meta\"],l=lodash.once((e=>{const t=s.watchlaterUrls.some((e=>(0,i.matchUrlPattern)(e))),o=s.mediaListUrls.some((e=>(0,i.matchUrlPattern)(e))),r={enable:!0,bindings:e};return document.body.addEventListener(\"keydown\",(e=>{r.enable&&r.bindings.forEach((r=>{if(0===r.keys.length)return;if(!1!==r.action.ignoreTyping&&(0,i.isTyping)())return;const s=e.key.toLowerCase(),l=dq(\".bilibili-player-sphere-control\");if(null!==l&&\"none\"!==l.style.display&&[\"w\",\"a\",\"s\",\"d\"].includes(s))return;if(a.some((t=>{const n=r.keys.includes(t);if(r.keys.includes(`[${t}]`))return!1;return n!==e[`${t}Key`]})))return;const c=r.keys.filter((e=>!a.includes(e.toLowerCase()))).map((e=>e.toLowerCase()));if(!(c.includes(e.key.toLowerCase())||c.includes(e.code.toLowerCase())))return;const d=r.action.run({binding:r,isWatchlater:t,isMediaList:o,event:e,clickElement:n.$j,changeVideoTime:n.vN,showTip:n.kW}),p=!lodash.isNil(d);(r.action.prevent??p)&&(e.stopPropagation(),e.preventDefault())}))})),r}));var c=o(455);let d=null;const p=(0,e.styledComponentEntry)((()=>Promise.resolve().then(o.t.bind(o,233,23))),(async e=>{let{settings:i}=e;const o=()=>{const e=i.options.preset,t=c.um[e]||{},o=(e=>Object.entries(e).map((e=>{let[t,i]=e;return{keys:i.split(\" \").filter((e=>\"\"!==e)),action:n.Nw[t]||none}})))({...c.Wb,...t,...i.options.customKeyBindings});d?d.bindings=o:d=l(o)};(0,t.addComponentListener)(\"keymap.preset\",o,!0),(0,t.addComponentListener)(\"keymap.customKeyBindings\",o)})),u={name:\"keymap\",displayName:\"快捷键扩展\",tags:[componentsTags.video,componentsTags.utils],entry:p,unload:()=>{d&&(d.enable=!1)},reload:()=>{d&&(d.enable=!0)},description:{\"zh-CN\":\"为脚本的功能和 b 站的功能启用键盘快捷键支持, 快捷键列表可在`快捷键设置`中查看和配置.\"},extraOptions:()=>Promise.resolve().then(o.bind(o,658)).then((e=>e.default)),options:{longJumpSeconds:{defaultValue:85,displayName:\"长跳跃秒数\"},customKeyBindings:{defaultValue:{},displayName:\"自定义键位\",hidden:!0},preset:{defaultValue:\"Default\",displayName:\"预设\",hidden:!0}},plugin:{displayName:\"快捷键扩展 - 搜索支持\",setup:e=>{let{addData:t}=e;t(\"launchBar.actions\",(e=>{e.push({name:\"keymapSettings\",getActions:async()=>[{name:\"快捷键扩展设置\",description:\"Keymap Settings\",icon:\"mdi-keyboard-settings-outline\",action:async()=>{const{toggleKeymapSettings:e}=await Promise.resolve().then(o.bind(o,781));e()}}]})}))}},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"}}(),r=r.component}()}));",
      "metadata": {
        "name": "keymap",
        "displayName": "快捷键扩展",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          },
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "description": {
          "zh-CN": "为脚本的功能和 b 站的功能启用键盘快捷键支持, 快捷键列表可在`快捷键设置`中查看和配置."
        },
        "options": {
          "longJumpSeconds": {
            "defaultValue": 85,
            "displayName": "长跳跃秒数"
          },
          "customKeyBindings": {
            "defaultValue": {},
            "displayName": "自定义键位",
            "hidden": true
          },
          "preset": {
            "defaultValue": "Default",
            "displayName": "预设",
            "hidden": true
          }
        },
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {
          "longJumpSeconds": 85,
          "customKeyBindings": {
            "previousFrame": "-",
            "nextFrame": "=",
            "videoSpeedIncrease": "r",
            "videoSpeedDecrease": "e",
            "videoSpeedToggle": "q"
          },
          "preset": "Default"
        }
      }
    },
    "bvidConvert": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/bvid-convert\"]=t():e[\"video/bvid-convert\"]=t()}(self,(function(){return function(){var e={230:function(e,t,n){var i=n(645)((function(e){return e[1]}));i.push([e.id,\".bvid-convert {\\n  order: -1;\\n  flex-direction: column;\\n  border-radius: 4px;\\n  padding: 6px 8px;\\n  width: 100%;\\n  -webkit-user-select: text;\\n          user-select: text;\\n  box-sizing: border-box;\\n  box-shadow: 0 0 0 1px rgba(136, 136, 136, 0.2666666667);\\n  background-color: #fff;\\n}\\nbody.dark .bvid-convert {\\n  background-color: #333;\\n}\\n.bvid-convert-item {\\n  font-size: 14px;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n.bvid-convert-item-copy {\\n  transition: transform 0.3s ease-out;\\n  cursor: pointer;\\n}\\n.bvid-convert-item-copy:active {\\n  transform: scale(0.9);\\n}\",\"\"]),e.exports=i},645:function(e){\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,i){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(i)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);i&&o[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},379:function(e,t,n){\"use strict\";var i,o=function(){return void 0===i&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\ni=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],c=t.base?r[0]+t.base:r[0],d=n[c]||0,u=\"\".concat(c,\" \").concat(d);n[c]=d+1;var l=s(u),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==l?(a[l].references++,a[l].updater(f)):a.push({identifier:u,updater:b(f,t),references:1}),i.push(u)}return i}function d(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var a=r(e.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join(\"\\n\")});function f(e,t,n,i){var o=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=l(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function p(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,m=0;function b(e,t){var n,i,o;if(t.singleton){var r=m++;n=v||(v=d(t)),i=f.bind(null,n,r,!1),o=f.bind(null,n,r,!0)}else n=d(t),i=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=s(n[i]);a[o].references--}for(var r=c(e,t),d=0;d<n.length;d++){var u=s(n[d]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=r}}}},512:function(e,t,n){\"use strict\";n.r(t),n.d(t,{default:function(){return _}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"bvid-convert\"},[e.aid&&e.bvid?[n(\"div\",{staticClass:\"bvid-convert-item\"},[e._v(\"\\n      \"+e._s(e.aid)+\"\\n      \"),n(\"div\",{staticClass:\"bvid-convert-item-copy\",attrs:{title:\"复制链接\"},on:{click:function(t){return e.copyLink(\"aid\")}}},[n(\"VIcon\",{attrs:{size:16,icon:e.aidCopied?\"mdi-check\":\"mdi-link\"}})],1)]),e._v(\" \"),n(\"div\",{staticClass:\"bvid-convert-item\"},[e._v(\"\\n      \"+e._s(e.bvid)+\"\\n      \"),n(\"div\",{staticClass:\"bvid-convert-item-copy\",attrs:{title:\"复制链接\"},on:{click:function(t){return e.copyLink(\"bvid\")}}},[n(\"VIcon\",{attrs:{size:16,icon:e.bvidCopied?\"mdi-check\":\"mdi-link\"}})],1)])]:e._e()],2)};i._withStripped=!0;var o=coreApis.observer,r=coreApis.settings,a=n(200),s=coreApis.utils,c=coreApis.utils.title,d=n(457),u=coreApis.ui;const{options:l}=(0,r.getComponentSettings)(\"bvidConvert\");var f;!function(e){e.Aid=\"aid\",e.Bvid=\"bvid\"}(f||(f={}));const p=[f.Aid,f.Bvid],v=[e=>{let{id:t,query:n}=e;return p.some((e=>n.includes(`${e}=`)))?`https://www.bilibili.com/video/${t}`:null},e=>{let{id:t}=e;return d.bangumiUrls.some((e=>(0,s.matchUrlPattern)(e)))?`https://www.bilibili.com/video/${t}`:null},e=>{let{id:t,url:n,query:i}=e;return n.replace(/\\/[^\\/]+$/,`/${t}`)+i}];var m=Vue.extend({components:{VIcon:u.VIcon},data:()=>({aid:\"\",aidCopied:!1,bvid:\"\",bvidCopied:!1}),async mounted(){(0,o.videoChange)((async()=>{this.aid=`av${unsafeWindow.aid}`,this.bvid=unsafeWindow.bvid;const e=await(0,a.select)(\".av-link,.bv-link,.bvid-link\");e&&(this.bvid=e.innerHTML.trim())}))},methods:{async copyLink(e){if(this[`${e}Copied`])return;const t={query:location.search,url:location.origin+location.pathname,id:this[e]},n=v.map((e=>e(t))).filter((e=>null!==e))[0];l.copyWithTitle?await navigator.clipboard.writeText(`${(0,c.getFriendlyTitle)()} ${n}`):await navigator.clipboard.writeText(n),this[`${e}Copied`]=!0,setTimeout((()=>this[`${e}Copied`]=!1),1e3)}}}),b=n(379),h=n.n(b),y=n(230),g=n.n(y),x={insert:\"head\",singleton:!1};h()(g(),x),g().locals;var C=function(e,t,n,i,o,r,a,s){var c,d=\"function\"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),r&&(d._scopeId=\"data-v-\"+r),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=c):o&&(c=s?function(){o.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(d.functional){d._injectStyles=c;var u=d.render;d.render=function(e,t){return c.call(t),u(e,t)}}else{var l=d.beforeCreate;d.beforeCreate=l?[].concat(l,c):[c]}return{exports:e,options:d}}(m,i,[],!1,null,null,null);C.options.__file=\"registry/lib/components/video/bvid-convert/BvidConvert.vue\";var _=C.exports},200:function(e){\"use strict\";e.exports=coreApis.spinQuery},457:function(e){\"use strict\";e.exports=coreApis.utils.urls}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return function(){\"use strict\";n.d(i,{component:function(){return a}});var e=coreApis.componentApis.define,t=n(200),o=n(457);const r=(0,e.defineOptionsMetadata)({copyWithTitle:{defaultValue:!1,displayName:\"复制链接时带上标题\"}}),a=(0,e.defineComponentMetadata)({name:\"bvidConvert\",displayName:\"BV 号转换\",options:r,entry:none,description:{\"zh-CN\":\"在功能面板中显示视频的 AV 号和 BV 号.\"},tags:[componentsTags.video,componentsTags.utils],widget:{component:()=>Promise.resolve().then(n.bind(n,512)).then((e=>e.default)),condition:t.hasVideo},urlInclude:o.videoAndBangumiUrls,commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"})}(),i=i.component}()}));",
      "metadata": {
        "name": "bvidConvert",
        "displayName": "BV 号转换",
        "options": {
          "copyWithTitle": {
            "defaultValue": false,
            "displayName": "复制链接时带上标题"
          }
        },
        "description": {
          "zh-CN": "在功能面板中显示视频的 AV 号和 BV 号."
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          },
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {
          "copyWithTitle": false
        }
      }
    },
    "extendVideoSpeed": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/extend-speed\"]=t():e[\"video/player/extend-speed\"]=t()}(self,(function(){return function(){\"use strict\";var e={d:function(t,n){for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{component:function(){return Q}});var n=coreApis.utils.urls,s=coreApis.settings,i=coreApis.utils.log,o=coreApis.pluginApis.hook;const r=e=>\"function\"==typeof e?{next:e}:e,a=e=>function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=!1;const a=[],l=[];let c=!1;const d=()=>{for(;a.length;)a.pop()();l.length=0,c=!0},p=e=>{c||(l.forEach((t=>{var n;null===(n=t.error)||void 0===n||n.call(t,e),(0,s.getGeneralSettings)().devMode&&console.error(e)})),d())},u=e=>{c||l.forEach((t=>{try{t.next(e)}catch(e){p(e)}}))},h=()=>{l.forEach((e=>{var t;null===(t=e.complete)||void 0===t||t.call(e)})),d()},m=()=>{if(o)return;const e=null==t?void 0:t({next:u,error:p,complete:h});e&&a.push(e),o=!0},b=e=>null==e?null:(l.push(e),()=>{lodash.pull(l,e)}),v=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return 0===n.length?{subscribe:e=>{const t=b(r(e));return((null==i?void 0:i.connect)??m)(),t},pipe:v,next:u,error:p,complete:h,...i}:e(n[0],{subscribe:b},i||{connect:m,next:u}).pipe(...n.slice(1))};if(n){const e=null==t?void 0:t({subscribe:e=>n.subscribe({error:p,complete:h,...r(e)}),next:u,error:p,complete:h});e&&a.push(e)}return v()}(e),l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a((e=>{let{next:n,complete:s}=e;t.forEach((e=>{n(e)})),s()}))},c=(e,t)=>a((n=>{let{next:s}=n;return e.addEventListener(t,s),()=>e.removeEventListener(t,s)})),d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return a((t=>{let{next:s}=t;e(...n,s)}))},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a((e=>{let{next:n,complete:s}=e;const i=[...t],o=()=>{const e=i.shift();e||s(),e.subscribe({next:n,complete:()=>{o()}})};o()}))},u=e=>new Promise(((t,n)=>{const s=e.subscribe({next:e=>{t(e),s()},error:()=>{n(),s()},complete:()=>{n(),s()}})}));var h=coreApis.componentApis.video.playerAgent,m=coreApis.lifeCycle,b=coreApis.observer,v=coreApis.utils,f=coreApis.utils.sort;const y=e=>t=>{let{subscribe:n,next:s,complete:i,error:o}=t;n(lodash.mapValues({next:s,complete:i,error:o},(t=>e(t))))},g=e=>function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];Promise.resolve().then((()=>e(...n)))},x=e=>{const t=new Set;return e((e=>{lodash.castArray(e).forEach((e=>{t.add(e)}))})),()=>{t.forEach((e=>{e()}))}},S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a((e=>{let{next:n,error:s,complete:i}=e;return x((e=>{const o=[];let r=0;e(t.map(((e,a)=>e.pipe(y(g)).subscribe({next:e=>{o[a]=e,o.reduce((e=>e+1),0)===t.length&&n(o.slice())},complete:()=>{r++,r===t.length&&i()},error:s})))),e((()=>{o.length=0,r=0}))}))}))},w=e=>t=>{let{subscribe:n,next:s,error:i}=t;n(lodash.debounce((e=>{try{s(e)}catch(e){i(e)}}),e))},E=e=>t=>{let{subscribe:n,next:s}=t;n((t=>{e(t)&&s(t)}))},$=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let{next:n,subscribe:s}=e,i=!1;s((e=>{i||t.forEach((e=>n(e))),n(e),i=!0}))}};var C=coreApis.pluginApis.data;const V=e=>e.split(\",\").map((e=>e.trim().replace(/^\\./,\"\"))).join(\",\"),M=e=>e.split(\",\").join(\" \"),A=(e,t)=>{const n=t=>{(0,C.registerAndGetData)(e,t)[0]=t},s=(0,C.getData)(e);if(s.length)return[s[0],n];if(t){const e=t();return n(e),[e,n]}return[void 0,n]},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&1===e?\"倍速\":Math.trunc(e)===e?`${e}.0x`:`${e}x`},k=e=>{if(\"倍速\"===e)return 1;const t=/([0-9]*[.]?[0-9]+)x/.exec(e);if(t)return parseFloat(t[1]);throw new Error(`unknown speed text: ${e}`)};const N=h.playerAgent.provideCustomQuery({video:{speedMenuList:\".bilibili-player-video-btn-speed-menu,.bpx-player-ctrl-playbackrate-menu\",speedMenuItem:\".bilibili-player-video-btn-speed-menu-list,.bpx-player-ctrl-playbackrate-menu-item\",speedNameBtn:\".bilibili-player-video-btn-speed-name,.bpx-player-ctrl-playbackrate-result\",speedContainer:\".bilibili-player-video-btn-speed,.bpx-player-ctrl-playbackrate\",active:\".bilibili-player-active,.bpx-state-active\",show:\".bilibili-player-speed-show,.bpx-state-show\"},bangumi:{speedMenuList:\".squirtle-speed-select-list\",speedMenuItem:\".squirtle-select-item\",speedNameBtn:\".squirtle-speed-select-result\",speedContainer:\".squirtle-speed-wrap\",active:\".active\",show:\".bilibili-player-speed-show\"}});let O;!function(e){e[e.MIN=0]=\"MIN\",e[e.CURRENT=1]=\"CURRENT\",e[e.MAX=2]=\"MAX\"}(O||(O={}));const j=(e,t,n)=>{const s=new MutationObserver(n);return s.observe(e,t),s},T=e=>{let[t,n]=e;if(!t)throw new Error(\"speed container element not found!\");if(!n)throw new Error(\"video element not found!\");const s=t.querySelector(N.custom.speedNameBtn.selector),i=t.querySelector(N.custom.speedMenuList.selector);let o,r,l;const c=a(),d=a().pipe((e=>{let t,{subscribe:n,next:s}=e,i=!0;n((e=>{(i||t!==e)&&(i=!1,t=e,s(e))}))}));d.pipe($(void 0),(e=>{let{subscribe:t,next:n}=e;const s=[];return t((e=>{2===s.length&&s.shift(),s.push(e),2===s.length&&n(s.slice())})),()=>{s.length=0}})).subscribe((e=>{let[t,n]=e;r=t,o=n}));const p=e=>{if(e)switch(e.nodeType){case Node.TEXT_NODE:d.next(k(e.data));break;case Node.ELEMENT_NODE:d.next(k(e.innerHTML));break;default:console.warn(\"The target parameter of updateActiveVideoSpeed must be a Node, and the node type must be one of TEXT_NODE and ELEMENT_NODE\")}},u=()=>{l=lodash([...i.children]).map((e=>lodash.attempt((()=>k(e.textContent))))).reject((e=>lodash.isError(e))).sort((0,f.ascendingSort)()).value()};p(s),u();const h=j(i,{childList:!0,attributes:!0},(e=>{const{attributes:t=[],childList:n=[]}=lodash.groupBy(e,\"type\");n.length&&u(),c.next({attributes:t,childList:n})})),m=j(s,{childList:!0,subtree:!0},(e=>{e.forEach((e=>{const[t]=e.addedNodes;p(t)}))}));return{containerElement:t,videoElement:n,nameBtnElement:s,menuListElement:i,query:e=>(0,v.des)(`./*[(${function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"or\";return e.split(\",\").map(V).flat().map((e=>`contains(@class, \"${e}\")`)).join(` ${t} `)}(N.custom.speedMenuItem.selector)}) and normalize-space()=\"${L(e)}\"]`,i),dispose:()=>{h.disconnect(),m.disconnect()},activeVideoSpeed$:d,menuListElementMutations$:c,getActiveVideoSpeed:()=>o,getOldActiveVideoSpeed:()=>r,getAvailableSpeedValues:()=>l}},I=e=>{const{videoElement:t,menuListElement:n}=e,s=c(n,\"click\").pipe((i=e=>{const{innerText:t,innerHTML:n}=e.target,s=t.trim()||n.trim();return lodash.attempt((()=>k(s)))},e=>{let{subscribe:t,next:n}=e;t((e=>{n(i(e))}))}),E((e=>!lodash.isError(e))));var i;const o=a((e=>{let{next:n}=e,s=t;do{s=Object.getPrototypeOf(s)}while(null===s||!Object.prototype.hasOwnProperty.call(s,\"playbackRate\"));const i=Object.getOwnPropertyDescriptor(s,\"playbackRate\");return Object.defineProperty(s,\"playbackRate\",{set(e){i.set.call(this,e),n(e)}}),()=>{Object.defineProperty(s,\"playbackRate\",i)}})),r=s.pipe((e=>{let t,{subscribe:n,next:s}=e,i=!0;n((e=>{(i||t!==e)&&(i=!1,t=e,s(e))}))})),l=o.pipe((e=>{let t,{subscribe:n,next:s}=e,i=!0;n((e=>{(i||t!==e)&&(i=!1,t=e,s(e))}))})),d=a((e=>{let{next:t}=e;const n=S(r,l);return n.subscribe((e=>{let[n,s]=e;n===s&&t(s)})),()=>n.complete()})).pipe((e=>{let t,{subscribe:n,next:s}=e,i=!0;n((e=>{(i||t!==e)&&(i=!1,t=e,s(e))}))}));let p;l.pipe(w(200),$(void 0),(e=>{let{subscribe:t,next:n}=e;const s=[];return t((e=>{2===s.length&&s.shift(),s.push(e),2===s.length&&n(s.slice())})),()=>{s.length=0}})).subscribe((e=>{let[t]=e;p=t}));const u={menuListElementClickSpeed$:s,menuListElementClickSpeedChange$:r,playbackRate$:o,playbackRateChange$:l,videoSpeedChange$:d};return{...e,...u,dispose:()=>{lodash.values(u).forEach((e=>{e.complete()})),e.dispose()},getOldPlaybackRate:()=>p}},[R]=A(\"speed.NoSuchSpeedMenuItemElementError\",(()=>class extends Error{constructor(e){const t=lodash.attempt((()=>L(e))),n=lodash.isError(t)?String(e):String(t);var s,i,o;super(`There is no such speed menu item as ${n}`),this.speed=e,o=void 0,(i=\"formattedSpeed\")in(s=this)?Object.defineProperty(s,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[i]=o,this.formattedSpeed=n}})),P=e=>{const{query:t,videoElement:n,videoSpeedChange$:s,getOldActiveVideoSpeed:i,getAvailableSpeedValues:o,getActiveVideoSpeed:r}=e,a=async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;const o=t(e);if(null==o)throw new R(e);o.click();const r=t=>{if((t??n.playbackRate)!==e)throw new Error(`failed to set ${L(e)} video speed.`)},a=[u(s.pipe(w(Math.max(0,i||0))))];i>0&&a.push(new Promise(((e,t)=>setTimeout((()=>setTimeout(t,i)))))),await Promise.all(a).then(r).catch(r)},l=async()=>{await a(1)},c=async(e,t)=>{if(lodash.isNil(e)&&(e=!1),\"boolean\"==typeof e)e||1===n.playbackRate?await a(i()):await l();else{const n=o();switch(t){case O.MIN:await a(n[e]);break;case O.MAX:await a(n[n.length-1+e]);break;case O.CURRENT:default:{const t=n.indexOf(r());if(-1===t)throw new Error(\"Unexpected Error: The available speed values do not include the active speed value, this should be a bug, please report the issue on github!\");await a(n[t+e])}}}},d=async e=>{try{await c(e,O.CURRENT)}catch(e){if(console.warn(e),!(e instanceof R))throw e}};return Object.assign(e,{set:a,force:async e=>{n.playbackRate=e},reset:l,toggle:c,step:d,increase:async()=>{await d(1)},decrease:async()=>{await d(-1)}})},q=()=>A(\"speed.speedContext\"),U=()=>A(\"speed.buildArguments$\",(()=>{return a().pipe((e=e=>e.settings.enabled,t=>{let{subscribe:n,next:s}=t;const i=new Set;return n((t=>{const n=i.size;e(t)?i.add(t):i.delete(t),i.size!==n&&s([...i])})),()=>{i.clear()}}));var e})),z=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lodash.identity;const[t,n]=q();if(t)return t;let s,i;const[o]=A(\"lifeCycleComponentLoaded$\",(()=>c(unsafeWindow,m.LifeCycleEventTypes.ComponentsLoaded))),[r]=U(),[h]=A(\"speed.videoChange$\",(()=>d(b.videoChange).pipe(E((e=>{let{aid:t,cid:n}=e;return t||n}))))),[v]=A(\"speed.speedContext$\",(()=>a((t=>{let{next:n}=t;return S(h,p(l([]),r),o).subscribe((t=>{var o;let[r,a]=t;const[l]=q();null==l||l.dispose(),null===(o=i)||void 0===o||o(\"context update\");const c=new Promise(((e,t)=>{s=e,i=t}));Promise.all([Promise.all([N.custom.speedContainer(),N.query.video.element()]).then(s),c]).then((e=>{let[,t]=e;return t})).then(T).then(I).then(P).then((e=>Object.assign(e,{videoIdObject:r,speedContext$:v,videoChange$:h}))).then(e(a)).then(n).catch((e=>console.error(e)))}))}))));return v.subscribe(n),u(v)};function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=[.5,.75,1,1.25,1.5,2],D=.0625;class X{constructor(e){var t;this.entryContext=e,H(this,\"speedContext\",void 0),H(this,\"settings\",void 0),H(this,\"coreApis\",void 0),H(this,\"metadata\",void 0),H(this,\"options\",void 0),H(this,\"getVideoIdObject\",void 0),H(this,\"getAvailableSpeedValues\",void 0),H(this,\"getOldActiveVideoSpeed\",void 0),H(this,\"forceVideoSpeed\",void 0),H(this,\"getVideoSpeed\",void 0),H(this,\"setVideoSpeed\",void 0),H(this,\"resetVideoSpeed\",void 0),H(this,\"toggleVideoSpeed\",void 0),H(this,\"increaseVideoSpeed\",void 0),H(this,\"decreaseVideoSpeed\",void 0),lodash.assign(this,e,{options:e.settings.options}),null===(t=this.migrate)||void 0===t||t.call(this),lodash.assign(this,lodash.mapValues(X.contextMap,(e=>async function(){const t=await z(),n=lodash.get(t,e),s=lodash.isFunction(n)?await n(...arguments):n;return s})))}}H(X,\"create\",void 0),H(X,\"contextMap\",{getVideoIdObject:\"videoIdObject\",getAvailableSpeedValues:\"getAvailableSpeedValues\",getOldActiveVideoSpeed:\"getOldActiveVideoSpeed\",getVideoSpeed:\"videoElement.playbackRate\",setVideoSpeed:\"set\",forceVideoSpeed:\"force\",resetVideoSpeed:\"reset\",toggleVideoSpeed:\"toggle\",increaseVideoSpeed:\"increase\",decreaseVideoSpeed:\"decrease\"}),z((e=>t=>{const n=lodash.omit(t,\"dispose\"),i=e.map((e=>e.getSpeedContextMixin(n)));if(i.length>1){const e=lodash.intersection(...i.map(Object.keys));if(e.length)throw new Error(`In the registered speed component, there is an implementation of getSpeedContextMixin that causes the speed context to be mixed in ambiguous.\\nThe repeated key names are ${e.join(\", \")}`)}lodash.assign(n,...i);const o=[];return e.forEach((e=>{const t=lodash(e.settings.options).mapValues(((t,n)=>d(s.addComponentListener,`${e.metadata.name}.${n}`).pipe((e=>{let t,{subscribe:n,next:s}=e,i=!0;n((e=>{(i||t!==e)&&(i=!1,t=e,s(e))}))})))).mapKeys(((e,t)=>`${t}$`)).value();o.push(...lodash.values(t)),e.options=new Proxy(e.settings.options,{get:(e,n,s)=>lodash.isSymbol(n)?Reflect.get(e,n,s):!Reflect.has(e,n)&&n.endsWith(\"$\")?t[n]:Reflect.get(e,n,s)}),e.speedContext=n,e.onSpeedContext(n),e.settings.enabled&&lodash(t).entries().forEach((t=>{let[n,s]=t;s.next(e.settings.options[n.slice(0,-1)])}))})),{...n,dispose:()=>{o.forEach((e=>e.complete())),t.dispose()}}})),X.create=function(e){const t=a().pipe((e=>{let t,{subscribe:n,next:s}=e,i=!0;n((e=>{(i||t!==e)&&(i=!1,t=e,s(e))}))}));return{...e,entry:n=>{const s=lodash.attempt((()=>new this(n)));if(s instanceof Error)return(0,i.logError)(s),null;const[r]=U();return t.subscribe((()=>{r.next(s)})),r.next(s),(0,o.getHook)(`speed.component.${e.name}`).after(s),s},reload:()=>t.next(!0),unload:()=>t.next(!1)}};var W=coreApis.style,F=coreApis.toast;const _=e=>{let t,{style:n,name:s,container:i}=e;const o=()=>{var e;return null===(e=t)||void 0===e?void 0:e.remove()};return{next:e=>{o();const r=\"function\"==typeof n?n(e):n;r&&(t=(0,W.addStyle)(r,s,i))},complete:o}};function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const J=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=document.createElement(\"div\");n.innerHTML=e;const s={},i=n.children.item(0),o=e=>{t&&(e.id=`scoped-element-${Math.random().toString(36).replace(/[^a-z0-9]+/g,\"\")}`);const n=e.getAttribute(\"data-ref\");n&&(s[lodash.camelCase(n)]=e);for(let t=0;t<e.children.length;t++)o(e.children.item(t))};return o(i),{...s,root:i}};class K extends X{constructor(){super(...arguments),G(this,\"elementMap\",[]),G(this,\"inputElement\",void 0),G(this,\"unpatch\",void 0),G(this,\"currentSpeedValue\",void 0),G(this,\"filterNativeSpeed\",(()=>e=>{let{subscribe:t,next:n}=e;t((e=>{B.includes(e)&&n(e)}))}))}static get activeClassName(){return V(N.custom.active.selector)}static get showClassName(){return V(N.custom.show.selector)}static get speedMenuItemClassName(){return V(N.custom.speedMenuItem.selector)}addSpeedValue(e){this.options.extendSpeedList=lodash.sortedUniq(this.options.extendSpeedList.concat(e).sort((0,f.ascendingSort)()))}removeSpeedValue(e){this.options.extendSpeedList=lodash.without(this.options.extendSpeedList,e)}createInputElement(){const{input:e,root:t,icon:n}=J(`\\n      <li class=\"${M(V(N.custom.speedMenuItem.selector))} extend-speed-input\">\\n        <i data-ref=\"icon\" class=\"mdi mdi-playlist-plus\" style=\"font-size: 1.5em\"></i>\\n        <input data-ref=\"input\" type=\"number\" title=\"添加新的倍数值\" max=\"16\" step=\"0.5\" style=\"display: none;\"></input>\\n      </li>\\n    `),s=()=>{const t=this.speedContext.getAvailableSpeedValues().slice(-1)[0]+.5,n=lodash.toString(t>16?null:t);e.value=n,e.min=n};this.options.extendSpeedList$.pipe(y(g)).subscribe(s);const o=(0,W.addStyle)(`\\n      #${e.id} {\\n        font-size: inherit;\\n        color: inherit;\\n        line-height: inherit;\\n        background: transparent;\\n        outline: none;\\n        width: 100%;\\n        border: none;\\n        text-align: center;\\n        cursor: text;\\n      }\\n      /* https://stackoverflow.com/a/4298216 */\\n      /* Chrome */\\n      #${e.id}::-webkit-outer-spin-button,\\n      #${e.id}::-webkit-inner-spin-button {\\n        -webkit-appearance: none;\\n        margin: 0;\\n      }\\n      /* Firefox */\\n      #${e.id}[type=number] {\\n        -moz-appearance:textfield;\\n      }\\n    `),r=lodash.over(c(e,\"keydown\").pipe(w(200)).subscribe((t=>{let{key:n}=t;if(\"Enter\"!==n)return;const s=parseFloat(e.value);try{if(!lodash.isFinite(s))throw new Error(\"无效的倍数值\");if(s<D)throw new Error(\"倍数值太小了\");if(s>16)throw new Error(\"倍数值太大了\");if(this.speedContext.getAvailableSpeedValues().includes(s))throw new Error(\"不能重复添加已有的倍数值\");this.addSpeedValue(s)}catch(t){(0,i.logError)(String(t),5e3),e.focus(),e.select()}})),c(t,\"mouseenter\").subscribe((()=>{e.style.display=\"inline\",n.style.display=\"none\",s(),setTimeout((()=>e.focus()))})),c(t,\"mouseleave\").subscribe((()=>{e.style.display=\"none\",n.style.display=\"inline\"})),(()=>t.remove()),(()=>o.remove()));return{node:t,destroy:r}}createCustomSpeedMenuItemElement(e){const{closeBtn:t,root:n}=J(`\\n      <li class=\"${M(V(N.custom.speedMenuItem.selector))} extend-speed-item\" data-value=\"${e}\">\\n        ${L(e)}\\n        <i data-ref=\"close-btn\" class=\"mdi mdi-close-circle\"></i>\\n      </li>\\n    `),s=(0,W.addStyle)(`\\n      .extend-speed-item [data-ref=\"close-btn\"] {\\n        color: inherit;\\n        opacity: 0.5;\\n        display: none;\\n        position: absolute;\\n        right: 4px;\\n      }\\n      :is(${N.custom.speedMenuItem.selector}):not(${N.custom.active.selector}):hover [data-ref=\"close-btn\"] {\\n        display: inline;\\n      }\\n      .extend-speed-item [data-ref=\"close-btn\"]:hover {\\n        opacity: 1;\\n        transition: all .3s;\\n      }\\n    `),i=lodash.over(c(t,\"click\").subscribe((()=>{this.removeSpeedValue(e)})),(()=>n.remove()),(()=>s.remove()));return{tag:e,node:n,destroy:i}}migrate(){const{options:e}=this.settings,{options:t}=(0,s.getComponentSettings)(\"rememberVideoSpeed\");t.extendList&&(e.extendSpeedList=Array.from(t.extendList),delete t.extendList,delete t.extend,F.Toast.success(\"从「倍速记忆」组件迁移旧配置成功\",\"【扩展倍速】旧配置迁移完成\",8e3))}// eslint-disable-next-line class-methods-use-this\ngetSpeedContextMixin(e){let{menuListElement:t}=e;return{query:e=>(0,v.des)(`./*[(${K.speedMenuItemClassName.split(\",\").map((e=>`contains(@class, \"${e}\")`)).join(\" or \")}) and not(contains(@class, \"extend-speed-input\")) and normalize-space()=\"${L(e)}\"]`,t)}}onSpeedContext(e){let{menuListElementClickSpeedChange$:t,playbackRate$:n}=e;this.options.extendSpeedList$.subscribe({next:e=>this.patch(((e,t)=>{let n=0,s=e.length,i=0,o=t.length;for(;n<s&&i<o&&e[n]===t[i];)n++,i++;for(;n<s&&i<o&&e[s-1]===t[o-1];)s--,o--;return[n,s-n,t.slice(i,o)]})(this.elementMap.map((e=>e.tag)),Array.from(e))),complete:()=>{this.unpatch()}}),this.options.maxMenuHeight$.subscribe(_({name:\"extend-video-speed-style\",style:e=>`\\n                  ${N.custom.speedMenuList.selector} {\\n                    display: flex !important; /* 防止3.X样式覆盖 */\\n                    flex-direction: column;\\n                    justify-content: center; /* 添加倍速那一项，当鼠标在上半部分会有莫名其妙的'mouseleave', 用这个修复 */\\n                    overflow-y: auto;\\n                    max-height: ${e}px;\\n                    visibility: hidden;\\n                  }\\n                  /* 修复2.X倍速列表显示问题 */\\n                  :is(${N.custom.show.selector}) :is(${N.custom.speedMenuList.selector}){\\n                    visibility: visible;\\n                  }\\n                  /* 修复番剧区的列表显示问题 */\\n                  :is(${N.custom.speedMenuList.selector})[style*=\"block\"] {\\n                    visibility: visible;\\n                  }`})),this.options.hideScrollbar$.subscribe(_({name:\"extend-video-speed-no-scrollbar-style\",style:e=>e&&`\\n                ${N.custom.speedMenuList.selector} {\\n                  scrollbar-width: none !important;\\n                  overscroll-behavior: contain;\\n                }\\n                :is(${N.custom.speedMenuList.selector})::-webkit-scrollbar {\\n                    height: 0 !important;\\n                    width: 0 !important;\\n                }`}));let s=1;n.pipe(E((e=>B.includes(e)))).subscribe((e=>{s=e})),t.subscribe({next:e=>{this.forceVideoSpeedWithUpdateStyle(e),this.currentSpeedValue=e},complete:()=>{this.setVideoSpeed(s),this.forceVideoSpeedWithUpdateStyle(s)}}),this.currentSpeedValue&&requestIdleCallback((()=>{this.setVideoSpeed(this.currentSpeedValue,1e3)}))}async forceVideoSpeedWithUpdateStyle(e){await this.forceVideoSpeed(e),setTimeout((()=>this.forceUpdateStyle(e)))}patch(e){const[t,n,s]=e,{menuListElement:i}=this.speedContext;if(this.inputElement||(this.inputElement=this.createInputElement(),i.prepend(this.inputElement.node)),0===n&&0===s.length)return;const o=s.map((e=>this.createCustomSpeedMenuItemElement(e)));this.elementMap.splice(t,n,...o).forEach((e=>{e.destroy()})),(this.elementMap[t-1]||this.inputElement).node.after(...o.map((e=>e.node)).reverse()),i.querySelectorAll(`:is(${N.custom.speedMenuItem.selector}):not(#${this.inputElement.node.id})`).forEach((e=>{e.style.order=(1e4*(16-k(e.innerHTML))).toString()})),this.unpatch=()=>{this.inputElement.destroy(),this.inputElement=void 0,this.elementMap.forEach((e=>e.destroy())),this.elementMap.length=0}}forceUpdateStyle(e){const{menuListElement:t,containerElement:n,nameBtnElement:s,query:i}=this.speedContext;for(const e of(0,v.dea)(`./*[(${V(K.speedMenuItemClassName).split(\",\").map((e=>`contains(@class, \"${e}\")`)).join(\" or \")}) and (${V(K.activeClassName).split(\",\").map((e=>`contains(@class, \"${e}\")`)).join(\" or \")})]`,t))e.classList.remove(...K.activeClassName.split(\",\"));i(e).classList.add(...K.activeClassName.split(\",\")),n.classList.remove(...K.showClassName.split(\",\")),s.innerText=L(e,!0)}}const Q=K.create({name:\"extendVideoSpeed\",displayName:\"扩展倍速\",author:{name:\"JLoeve\",link:\"https://github.com/LonelySteve\"},description:{\"zh-CN\":\"\\n\\n> 扩展视频播放器的倍速菜单项，可用于突破原有播放倍数的上限或下限.\\n\\n### 🔧 **选项**\\n\\n- `隐藏滚动条`：如果添加的倍速过多，倍速菜单将出现滚动条，在 Windows 下，若没有安装并启用「细滚动条」组件会显得比较挤，建议开启此选项隐藏滚动条.\\n\\n### **新增倍速**\\n\\n开启组件后，在默认情况下，播放器的倍速菜单就会新增 2.5x 和 3.0x 两个倍速选项.\\n\\n如果需要添加更多倍速，只需将鼠标指针移到菜单顶部的新增图标上，图标将变成一个输入框，根据需要键入新的倍速值，或通过滚轮增减数值，或直接使用推荐的数值，回车确认即可.\\n\\n新增倍速的范围要求在 0.0625 到 16 之间，数量则不受限制.\\n\\n**不推荐设置超高倍速（>3.0x）**：原生播放器内部没有针对超高倍速进行优化，可能导致音画不同步、播放卡顿、声音嘈杂/消失等一系列问题.\\n\\n### **删除倍速**\\n\\n将鼠标指针移到**自定义**的倍速菜单项上，其右侧将会显示一个移除图标，单击即可删除相应的倍速.\\n\\n\"},tags:[componentsTags.video],urlInclude:n.playerUrls,options:{maxMenuHeight:{displayName:\"倍速菜单最大高度\",defaultValue:360,hidden:!0,validator:e=>Math.max(parseInt(e),360)||360},hideScrollbar:{displayName:\"隐藏滚动条\",defaultValue:!1},extendSpeedList:{displayName:\"扩展倍速列表\",defaultValue:[2.5,3],hidden:!0}},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"});return t=t.component}()}));",
      "metadata": {
        "name": "extendVideoSpeed",
        "displayName": "扩展倍速",
        "author": {
          "name": "JLoeve",
          "link": "https://github.com/LonelySteve"
        },
        "description": {
          "zh-CN": "\n\n> 扩展视频播放器的倍速菜单项，可用于突破原有播放倍数的上限或下限.\n\n### 🔧 **选项**\n\n- `隐藏滚动条`：如果添加的倍速过多，倍速菜单将出现滚动条，在 Windows 下，若没有安装并启用「细滚动条」组件会显得比较挤，建议开启此选项隐藏滚动条.\n\n### **新增倍速**\n\n开启组件后，在默认情况下，播放器的倍速菜单就会新增 2.5x 和 3.0x 两个倍速选项.\n\n如果需要添加更多倍速，只需将鼠标指针移到菜单顶部的新增图标上，图标将变成一个输入框，根据需要键入新的倍速值，或通过滚轮增减数值，或直接使用推荐的数值，回车确认即可.\n\n新增倍速的范围要求在 0.0625 到 16 之间，数量则不受限制.\n\n**不推荐设置超高倍速（>3.0x）**：原生播放器内部没有针对超高倍速进行优化，可能导致音画不同步、播放卡顿、声音嘈杂/消失等一系列问题.\n\n### **删除倍速**\n\n将鼠标指针移到**自定义**的倍速菜单项上，其右侧将会显示一个移除图标，单击即可删除相应的倍速.\n\n"
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "options": {
          "maxMenuHeight": {
            "displayName": "倍速菜单最大高度",
            "defaultValue": 360,
            "hidden": true
          },
          "hideScrollbar": {
            "displayName": "隐藏滚动条",
            "defaultValue": false
          },
          "extendSpeedList": {
            "displayName": "扩展倍速列表",
            "defaultValue": [
              2.5,
              3
            ],
            "hidden": true
          }
        },
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {
          "maxMenuHeight": 360,
          "hideScrollbar": true,
          "extendSpeedList": [
            0.25,
            1.75,
            2.5
          ]
        }
      }
    },
    "removePlayerPopup": {
      "code": "!function(e,o){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=o():\"function\"==typeof define&&define.amd?define([],o):\"object\"==typeof exports?exports[\"video/player/remove-popup\"]=o():e[\"video/player/remove-popup\"]=o()}(self,(function(){return function(){var e,o,p={926:function(e,o,p){var r=p(645)((function(e){return e[1]}));r.push([e.id,\"body.remove-player-popup-combo-likes .bilibili-player-video-popup-three,\\nbody.remove-player-popup-combo-likes .bilibili-player-video-popup-three-animate,\\nbody.remove-player-popup-combo-likes .bilibili-player-video-popup-follow,\\nbody.remove-player-popup-combo-likes .bilibili-player-video-popup-there-cyc,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-three,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-animate,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-follow,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-cyc {\\n  display: none !important;\\n}\\nbody.remove-player-popup-related-videos .bilibili-player-video-link,\\nbody.remove-player-popup-related-videos .bilibili-player-link,\\nbody.remove-player-popup-related-videos .bpx-player-link {\\n  display: none !important;\\n}\\nbody.remove-player-popup-votes .bilibili-player-video-popup-vote,\\nbody.remove-player-popup-votes .bpx-player-popup-dm-close,\\nbody.remove-player-popup-votes .bpx-player-popup-dm-shrink,\\nbody.remove-player-popup-votes .bpx-player-popup-vote {\\n  display: none !important;\\n}\\nbody.remove-player-popup-rates .bilibili-player-score,\\nbody.remove-player-popup-rates .bpx-player-popup-dm-close,\\nbody.remove-player-popup-rates .bpx-player-score-summary-wrap,\\nbody.remove-player-popup-rates .bpx-player-score {\\n  display: none !important;\\n}\",\"\"]),e.exports=r},645:function(e){\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var o=[];return o.toString=function(){return this.map((function(o){var p=e(o);return o[2]?\"@media \".concat(o[2],\" {\").concat(p,\"}\"):p})).join(\"\")},\n// eslint-disable-next-line func-names\no.i=function(e,p,r){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var t={};if(r)for(var n=0;n<this.length;n++){\n// eslint-disable-next-line prefer-destructuring\nvar i=this[n][0];null!=i&&(t[i]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);r&&t[l[0]]||(p&&(l[2]?l[2]=\"\".concat(p,\" and \").concat(l[2]):l[2]=p),o.push(l))}},o}},695:function(e,o,p){var r=p(926);r&&r.__esModule&&(r=r.default),e.exports=\"string\"==typeof r?r:r.toString()}},r={};function t(e){var o=r[e];if(void 0!==o)return o.exports;var n=r[e]={id:e,exports:{}};return p[e](n,n.exports,t),n.exports}o=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},t.t=function(p,r){if(1&r&&(p=this(p)),8&r)return p;if(\"object\"==typeof p&&p){if(4&r&&p.__esModule)return p;if(16&r&&\"function\"==typeof p.then)return p}var n=Object.create(null);t.r(n);var i={};e=e||[null,o({}),o([]),o(o)];for(var a=2&r&&p;\"object\"==typeof a&&!~e.indexOf(a);a=o(a))Object.getOwnPropertyNames(a).forEach((function(e){i[e]=function(){return p[e]}}));return i.default=function(){return p},t.d(n,i),n},t.d=function(e,o){for(var p in o)t.o(o,p)&&!t.o(e,p)&&Object.defineProperty(e,p,{enumerable:!0,get:o[p]})},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var n={};return function(){\"use strict\";t.d(n,{component:function(){return r}});var e=coreApis.settings,o=coreApis.utils.urls;const p=\"removePlayerPopup\",r={name:p,entry:o=>{let{settings:p,metadata:r}=o;const{options:t}=p,{kebabCase:n}=lodash;Object.keys(t).forEach((o=>{(0,e.addComponentListener)(`${r.name}.${o}`,(e=>{document.body.classList.toggle(`${n(r.name)}-${n(o)}`,e)}),!0)}))},instantStyles:[{name:p,style:()=>Promise.resolve().then(t.t.bind(t,695,23))}],displayName:\"删除视频弹窗\",tags:[componentsTags.video,componentsTags.style],description:{\"zh-CN\":\"删除视频播放器中出现的各种弹窗, 类别可在选项中分别选择.\"},urlInclude:o.playerUrls,options:{votes:{defaultValue:!1,displayName:\"投票\"},relatedVideos:{defaultValue:!0,displayName:\"关联视频\"},comboLikes:{defaultValue:!0,displayName:\"关注/三连\"},rates:{defaultValue:!0,displayName:\"评分\"}},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"}}(),n=n.component}()}));",
      "metadata": {
        "name": "removePlayerPopup",
        "displayName": "删除视频弹窗",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "description": {
          "zh-CN": "删除视频播放器中出现的各种弹窗, 类别可在选项中分别选择."
        },
        "options": {
          "votes": {
            "defaultValue": false,
            "displayName": "投票"
          },
          "relatedVideos": {
            "defaultValue": true,
            "displayName": "关联视频"
          },
          "comboLikes": {
            "defaultValue": true,
            "displayName": "关注/三连"
          },
          "rates": {
            "defaultValue": true,
            "displayName": "评分"
          }
        },
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {
          "votes": false,
          "relatedVideos": true,
          "comboLikes": true,
          "rates": true
        }
      }
    },
    "seekByFrames": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/seek-by-frames\"]=t():e[\"video/player/seek-by-frames\"]=t()}(self,(function(){return function(){\"use strict\";var e,t,n={833:function(e){e.exports=coreApis.componentApis.video.playerAgent}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,o),a.exports}t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if(\"object\"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&\"function\"==typeof n.then)return n}var a=Object.create(null);o.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){i[e]=function(){return n[e]}}));return i.default=function(){return n},o.d(a,i),a},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var a={};return function(){o.d(a,{component:function(){return c}});var e=coreApis.componentApis.video.videoControlBar,t=coreApis.observer,n=coreApis.utils,r=coreApis.utils.urls,i=coreApis.pluginApis.data;const s=\"seek-by-frame-disable\",c={name:\"seekByFrames\",displayName:\"启用逐帧调整\",tags:[componentsTags.video],description:{\"zh-CN\":\"在播放器的时间右边增加两个按钮, 用于**较精细**调整视频时间. 装有 `快捷键扩展` 时支持键盘快捷键<kbd>Shift</kbd>+<kbd>←</kbd>/<kbd>→</kbd>.\\n\\n> 注: `视频的实际播放帧率`跟`视频本身的帧率`和`显示器的刷新率`有关, 很难计算一个精准的数值, 部分视频仍然会有暂停不到那种一闪而过的图的情况.\"},entry:async()=>{await(0,n.playerReady)();const{playerAgent:r}=await Promise.resolve().then(o.t.bind(o,833,23));(0,i.addData)(\"ui.icons\",(e=>{e[\"seek-left\"]='<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- Generator: Adobe Illustrator 24.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\\x3e\\n<svg version=\"1.1\" id=\"图层_2_1_\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\"\\n\\t y=\"0px\" viewBox=\"0 0 24 24\" style=\"enable-background:new 0 0 24 24;\" xml:space=\"preserve\">\\n<g>\\n\\t<path d=\"M15.5,20.3c-0.4,0-0.7-0.1-1-0.4l-8.3-7.5c-0.3-0.3-0.5-0.7-0.5-1.1c0-0.4,0.2-0.8,0.5-1.1l8.3-7.5\\n\\t\\tc0.6-0.6,1.6-0.5,2.1,0.1c0.6,0.6,0.5,1.6-0.1,2.1l-7.1,6.3l7.1,6.4c0.6,0.6,0.7,1.5,0.1,2.1C16.3,20.2,15.9,20.3,15.5,20.3z\"/>\\n</g>\\n<circle cx=\"16.8\" cy=\"11.3\" r=\"2.4\"/>\\n</svg>\\n',e[\"seek-right\"]='<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- Generator: Adobe Illustrator 24.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\\x3e\\n<svg version=\"1.1\" id=\"图层_2\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n\\t viewBox=\"0 0 24 24\" style=\"enable-background:new 0 0 24 24;\" xml:space=\"preserve\">\\n<g>\\n\\t<path d=\"M8.2,20.3c0.4,0,0.7-0.1,1-0.4l8.3-7.5c0.3-0.3,0.5-0.7,0.5-1.1c0-0.4-0.2-0.8-0.5-1.1L9.2,2.7C8.6,2.2,7.7,2.2,7.1,2.9\\n\\t\\tC6.6,3.5,6.6,4.4,7.3,5l7.1,6.3l-7.1,6.4c-0.6,0.6-0.7,1.5-0.1,2.1C7.4,20.2,7.8,20.3,8.2,20.3z\"/>\\n</g>\\n<circle cx=\"7\" cy=\"11.3\" r=\"2.4\"/>\\n</svg>\\n'}));let a=0;(0,t.attributesSubtree)(`${r.query.control.buttons.quality.selector} ul`,(()=>{const e=dq(`${r.query.control.buttons.quality.selector} .bui-select-item-active, ${r.query.control.buttons.quality.selector} .active`),t=e?parseInt(e.getAttribute(\"data-value\")):0,n=(()=>{switch(t){case 116:case 74:return 6e4/1001;default:return 3e4/1001}})();a=1/n}));const s=e=>{r.changeTime(e*a)};(0,e.addControlBarButton)({name:\"seekPrevFrame\",displayName:\"上一帧\",icon:\"seek-left\",order:1,action:()=>{s(-1)}}),(0,e.addControlBarButton)({name:\"seekNextFrame\",displayName:\"下一帧\",icon:\"seek-right\",order:2,action:()=>{s(1)}})},reload:()=>document.body.classList.remove(s),unload:()=>document.body.classList.add(s),urlInclude:r.playerUrls,plugin:{displayName:\"逐帧调整 - 快捷键支持\",setup:()=>{(0,i.addData)(\"keymap.actions\",(e=>{e.previousFrame={displayName:\"上一帧\",run:e=>{const{clickElement:t}=e;return t('.be-video-control-bar-extend [data-name=\"seekPrevFrame\"]',e)}},e.nextFrame={displayName:\"下一帧\",run:e=>{const{clickElement:t}=e;return t('.be-video-control-bar-extend [data-name=\"seekNextFrame\"]',e)}}})),(0,i.addData)(\"keymap.presets\",(e=>{e.previousFrame=\"shift arrowLeft\",e.nextFrame=\"shift arrowRight\"}))}},commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"}}(),a=a.component}()}));",
      "metadata": {
        "name": "seekByFrames",
        "displayName": "启用逐帧调整",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "description": {
          "zh-CN": "在播放器的时间右边增加两个按钮, 用于**较精细**调整视频时间. 装有 `快捷键扩展` 时支持键盘快捷键<kbd>Shift</kbd>+<kbd>←</kbd>/<kbd>→</kbd>.\n\n> 注: `视频的实际播放帧率`跟`视频本身的帧率`和`显示器的刷新率`有关, 很难计算一个精准的数值, 部分视频仍然会有暂停不到那种一闪而过的图的情况."
        },
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "elegantScrollbar": {
      "code": "!function(t,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports[\"style/scrollbar\"]=n():t[\"style/scrollbar\"]=n()}(self,(function(){return function(){var t,n,e={518:function(t,n,e){var r=e(645)((function(t){return t[1]}));r.push([t.id,\"html ::-webkit-scrollbar {\\n  width: 5px !important;\\n  height: 5px !important;\\n}\\nhtml ::-webkit-scrollbar-corner,\\nhtml ::-webkit-scrollbar-track {\\n  background: transparent !important;\\n}\\nhtml ::-webkit-resizer,\\nhtml ::-webkit-scrollbar-thumb {\\n  background: #aaa;\\n  border-radius: 3px;\\n}\\nhtml ::-webkit-scrollbar-thumb:hover {\\n  background: #888;\\n}\\nhtml,\\nhtml * {\\n  scrollbar-color: #aaa transparent;\\n  scrollbar-width: thin !important;\\n}\",\"\"]),t.exports=r},645:function(t){\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=t(n);return n[2]?\"@media \".concat(n[2],\" {\").concat(e,\"}\"):e})).join(\"\")},\n// eslint-disable-next-line func-names\nn.i=function(t,e,r){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var o={};if(r)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[i][0];null!=a&&(o[a]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);r&&o[u[0]]||(e&&(u[2]?u[2]=\"\".concat(e,\" and \").concat(u[2]):u[2]=e),n.push(u))}},n}},110:function(t,n,e){var r=e(518);r&&r.__esModule&&(r=r.default),t.exports=\"string\"==typeof r?r:r.toString()}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={id:t,exports:{}};return e[t](i,i.exports,o),i.exports}n=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if(\"object\"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&\"function\"==typeof e.then)return e}var i=Object.create(null);o.r(i);var a={};t=t||[null,n({}),n([]),n(n)];for(var c=2&r&&e;\"object\"==typeof c&&!~t.indexOf(c);c=n(c))Object.getOwnPropertyNames(c).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},o.d(i,a),i},o.d=function(t,n){for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var i={};return function(){\"use strict\";o.d(i,{component:function(){return t}});const t=(0,coreApis.componentApis.define.defineComponentMetadata)({name:\"elegantScrollbar\",entry:none,displayName:\"使用细滚动条\",description:\"使用浏览器的滚动条风格替代系统的滚动条, 不过 macOS 系统滚动条比浏览器做得好一些, 因此不建议 macOS 使用此功能.\",tags:[componentsTags.style,componentsTags.general],instantStyles:[{name:\"elegant-scrollbar\",style:()=>Promise.resolve().then(o.t.bind(o,110,23))}],commitHash:\"124fff7f99d2437df482016133ef933bd1d837b3\",coreVersion:\"2.4.0\"})}(),i=i.component}()}));",
      "metadata": {
        "name": "elegantScrollbar",
        "displayName": "使用细滚动条",
        "description": "使用浏览器的滚动条风格替代系统的滚动条, 不过 macOS 系统滚动条比浏览器做得好一些, 因此不建议 macOS 使用此功能.",
        "tags": [
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          },
          {
            "name": "general",
            "displayName": "通用",
            "color": "#888",
            "icon": "mdi-progress-wrench",
            "order": 8
          }
        ],
        "commitHash": "124fff7f99d2437df482016133ef933bd1d837b3",
        "coreVersion": "2.4.0"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    }
  },
  "components": {
    "settingsPanel": {
      "enabled": true,
      "options": {
        "themeColor": "#00A0D8",
        "scriptLoadingMode": "同时",
        "styleLoadingMode": "同时",
        "textColor": "自动",
        "cdnRoot": "GitHub",
        "dockSide": "右侧",
        "filenameFormat": "[title][ - ep]",
        "batchFilenameFormat": "[n - ][ep]",
        "downloadPackageEmitMode": "打包下载",
        "devMode": false
      }
    },
    "launchBar": {
      "enabled": true,
      "options": {}
    },
    "i18n": {
      "enabled": true,
      "options": {
        "language": "简体中文",
        "translator": "GoogleCN"
      }
    },
    "autoUpdate": {
      "enabled": true,
      "options": {
        "lastUpdateCheck": 1662640224521,
        "lastInstalledVersion": "2.4.0",
        "localPortOverride": "",
        "minimumDuration": 86400000,
        "urls": {
          "components": {
            "downloadVideo": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/video/download.js",
              "lastUpdateCheck": 1662640222712,
              "installTime": 1662639254844,
              "alwaysUpdate": false
            },
            "downloadDanmaku": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/video/danmaku/download.js",
              "lastUpdateCheck": 1662640222760,
              "installTime": 1662639255438,
              "alwaysUpdate": false
            },
            "downloadLiveRecords": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/live/download-records.js",
              "lastUpdateCheck": 1662640224044,
              "installTime": 1662639255523,
              "alwaysUpdate": false
            },
            "downloadSubtitle": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/video/subtitle/download.js",
              "lastUpdateCheck": 1662640222469,
              "installTime": 1662639255538,
              "alwaysUpdate": false
            },
            "downloadAudio": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/utils/download-audio.js",
              "lastUpdateCheck": 1662640222575,
              "installTime": 1662639255550,
              "alwaysUpdate": false
            },
            "alwaysShowDuration": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/style/always-show-duration.js",
              "lastUpdateCheck": 1662640222514,
              "installTime": 1662639302754,
              "alwaysUpdate": false
            },
            "simplifyLiveroom": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/style/simplify/live.js",
              "lastUpdateCheck": 1662640222818,
              "installTime": 1662639353344,
              "alwaysUpdate": false
            },
            "keymap": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/utils/keymap.js",
              "lastUpdateCheck": 1662640222854,
              "installTime": 1662639382111,
              "alwaysUpdate": false
            },
            "bvidConvert": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/video/bvid-convert.js",
              "lastUpdateCheck": 1662640222940,
              "installTime": 1662639414729,
              "alwaysUpdate": false
            },
            "extendVideoSpeed": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/video/player/extend-speed.js",
              "lastUpdateCheck": 1662640222192,
              "installTime": 1662639464625,
              "alwaysUpdate": false
            },
            "removePlayerPopup": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/video/player/remove-popup.js",
              "lastUpdateCheck": 1662640222543,
              "installTime": 1662639489920,
              "alwaysUpdate": false
            },
            "seekByFrames": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/video/player/seek-by-frames.js",
              "lastUpdateCheck": 1662640222370,
              "installTime": 1662639494567,
              "alwaysUpdate": false
            },
            "elegantScrollbar": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/components/style/scrollbar.js",
              "lastUpdateCheck": 1662640222924,
              "installTime": 1662639559297,
              "alwaysUpdate": false
            }
          },
          "plugins": {
            "speed.keymap": {
              "url": "https://raw.githubusercontent.com/the1812/Bilibili-Evolved/master/registry/dist/plugins/video/player/speed.js",
              "lastUpdateCheck": 1662640224520,
              "installTime": 1662639520786,
              "alwaysUpdate": false
            }
          },
          "styles": {}
        },
        "maxUpdateCount": 4
      }
    },
    "notifyNewVersion": {
      "enabled": true,
      "options": {
        "lastUpdateCheck": 1662639228945,
        "minimumDuration": 86400000
      }
    }
  },
  "plugins": {
    "ajaxHook": true,
    "launchBar.actions.IDSearch": true
  }
}